:: Widgets Combat Man-Combat [widget]

<!-- GENERAL USE WIDGETS -->

<!-- pass "left" or "right" for which NPC hand this is called for -->
<<widget "combat-reset-hand">>
	<<if $args[0] is "both">>
		<<set $NPCList[_n].lefthand to 0>>
		<<set $NPCList[_n].righthand to 0>>
	<<else>>
		<<set $NPCList[_n][$args[0]+"hand"] to 0>>
	<</if>>
<</widget>>

<!-- pass "left" or "right" for which NPC hand this is called for, and the name of the targeted PC body part -->
<<widget "combat-set-hand-target">>
	<<set $NPCList[_n][$args[0]+"hand"] to $args[1]>>
<</widget>>

<<widget "combat-get-other-hand">>
	<<set $otherNPChand to ($args[0] is "left"? $NPCList[_n].righthand : $NPCList[_n].lefthand)>>
<</widget>>


<!-- SPECIFIC HAND ACTION WIDGETS -->

<<widget "combat-spank">>
	<<bruise bottom>><<hitstat>><<set $speechspank to 1>>
	<<He>> spanks your <<bottom>>
	<<if $worn.lower.anus_exposed is 1 and $worn.over_lower.anus_exposed is 1>>
		<<if $worn.under_lower.name isnot "naked" and $worn.under_lower.anus_exposed is 0>>
			through your $worn.under_lower.name.
		<<else>>
			reddening your exposed skin.
		<</if>>
	<<elseif $worn.over_lower.name isnot "naked" and $worn.over_lower.state is "waist">>
		through your $worn.over_lower.name.
	<<elseif $worn.lower.name isnot "naked" and $worn.lower.state is "waist">>
		through your $worn.lower.name.
	<<elseif $worn.under_lower.name isnot "naked" and $worn.under_lower.state is "waist">>
		through your $worn.under_lower.name.
	<<else>>
		reddening your exposed skin.
	<</if>>
	<<if random(1, 2) is 2>>
		<<bodypart_admire_chance left_bottom>>
	<<else>>
		<<bodypart_admire_chance right_bottom>>
	<</if>>
	<<violence 5>>
<</widget>>

<!-- pass "left" or "right" for which NPC hand this is called for -->
<<widget "combat-hand-on-arms">>
	<<if $enemytrust gte 20 and $enemyanger lte 20>>
		<span class="lblue"><<He>> releases your arms.</span>
		<<combat-reset-hand $args[0]>>
		<<set $leftarm to 0>><<set $rightarm to 0>>
	<<else>>
		<<He>> grips your arms.
		<<violence 6>><<bruise leftarm>><<bruise rightarm>>
		<<if random(1, 2) is 2>>
			<<bodypart_admire_chance left_shoulder>>
		<<else>>
			<<bodypart_admire_chance right_shoulder>>
		<</if>>
	<</if>>
<</widget>>

<!-- takes two args, both should be either "left" or "right". First is NPC hand, second is player arm. -->
<<widget "combat-hand-on-one-arm">>
	<<if $enemytrust gte 20 and $enemyanger lte 20>>
		<span class="lblue"><<He>> releases your $args[1] arm.</span>
		<<combat-reset-hand $args[0]>>
		<<if $args[1] is "left">>
			<<set $leftarm to 0>>
		<<else>>
			<<set $rightarm to 0>>
		<</if>>
	<<else>>
		<<He>> grips your $args[1] arm.
		<<if $args[1] is "left">>
			<<violence 3>><<bruise leftarm>>
			<<bodypart_admire_chance left_shoulder>>
		<<else>>
			<<violence 3>><<bruise rightarm>>
			<<bodypart_admire_chance right_shoulder>>
		<</if>>
	<</if>>
<</widget>>

<<widget "combat-hand-on-vaginaentrance">>
	<<set $rng to random(1, 100)>>
	<<if $rng gte 101>>
		<span class="blue"><<He>> moves <<his>> $args[0] hand away from your <<pussy>>.</span>
		<<combat-reset-hand $args[0]>><<set $vaginause to 0>>
	<<elseif $rng gte 61>>
		<<He>> <<strokes>> your labia.
		<<neutral 10>>
		<<bodypart_admire_chance pubic>>
	<<elseif ($rng gte 21 or $novaginal is 0) and (!$player.penisExist or random(1,100) gte 51)>>
		<<He>> gives your clitoris a tweak.
		<<set $speechclit to 1>><<neutral 10>>
		<<bodypart_admire_chance pubic>>
	<<elseif $rng gte 21 or $novaginal is 0>>
		<<He>> rubs the base of your penis while toying with your pussy.
		<<neutral 10>><<set $speechfutapenis to 1>>
		<<bodypart_admire_chance pubic>>
	<<elseif $rng lte 20 and $novaginal is 0>>
		<span class="pink"><<He>> plunges a finger into your warm <<pussy>>.</span>
		<<neutral 15>><<set $speechvagina to 1>><<combat-set-hand-target $args[0] "vagina">>
		<<bodypart_admire_chance pubic>>
	<</if>>
<</widget>>

<!-- pass "left" or "right" for which NPC hand this is called for -->
<<widget "combat-hand-on-penisentrance">>
	<<set $rng to random(1, 100)>>
	<<if $rng gte 101>>
		<span class="blue"><<He>> moves <<his>> $args[0] hand away from your <<penis>>.</span>
		<<combat-reset-hand $args[0]>>
		<<set $penisuse to 0>>
	<<elseif $rng gte 51>>
		<<He>> <<strokes>> your shaft.
		<<neutral 10>>
		<<bodypart_admire_chance pubic>>
	<<elseif $rng gte 21>>
		<<He>> rubs your glans.
		<<neutral 10>><<set $speechglans to 1>>
		<<bodypart_admire_chance pubic>>
	<<elseif $rng lte 20>>
		<span class="pink"><<He>> wraps <<his>> fingers around your penis.</span>
		<<neutral 15>>
		<<set $speechpenis to 1>>
		<<combat-set-hand-target $args[0] "penis">>
		<<bodypart_admire_chance pubic>>
	<</if>>
<</widget>>

<!-- pass "left" or "right" for which NPC hand this is called for -->
<<widget "combat-hand-on-vagina">>
	<<set $rng to random(1, 100)>>
	<<if $rng gte 101>>
		<span class="purple"><<He>> slides <<his>> finger out of your <<pussy>>.</span>
		<<combat-set-hand-target $args[0] "vaginaentrance">>
		<<neutral 15>>
	<<elseif $rng lte 100>>
		<<He>> <<strokes>> the inside of your <<pussy>>,
		<<neutral 20>><<set $speechvagina to 1>>
		<<if $arousal gte ($arousalmax / 5) * 4>>
			causing involuntary shudders.
		<<elseif $arousal gte $arousalmax / 5>>
			coaxing out lewd fluid.
		<<else>>
			invading your body in a most sordid manner.
		<</if>>
		<<bodypart_admire_chance pubic>>
	<</if>>
<</widget>>

<<widget "combat-hand-on-penis">>
	<<set $rng to random(1, 100)>>
	<<if $rng gte 101>>
		<span class="purple"><<He>> releases your <<penis>> from <<his>> grip.</span>
		<<combat-set-hand-target $args[0] "penisentrance">>
		<<neutral 15>>
	<<elseif $rng lte 100>>
		<<He>> massages the length of your <<penis>>,
		<<neutral 20>><<set $speechpenis to 1>>
		<<if $arousal gte ($arousalmax / 5) * 4>>
			causing you involuntary shudders.
		<<elseif $arousal gte $arousalmax / 5>>
			coaxing out lewd fluid.
		<<else>>
			exploiting your body's natural reactions in a most sordid manner.
		<</if>>
		<<bodypart_admire_chance pubic>>
	<</if>>
<</widget>>

<<widget "combat-hand-on-anusentrance">>
	<<set $rng to random(1, 100)>>
	<<if $rng gte 101>>
		<span class="blue"><<He>> moves <<his>> hand away from your ass.</span>
		<<combat-reset-hand $args[0]>>
		<<set $vaginause to 0>>
	<<elseif $rng gte 21 or $noanal is 1>>
		<<He>> <<strokes>> your anus.
		<<neutral 10>>
		<<if random(1, 2) is 2>>
			<<bodypart_admire_chance left_bottom>>
		<<else>>
			<<bodypart_admire_chance right_bottom>>
		<</if>>
	<<elseif $rng lte 20 and $noanal is 0>>
		<span class="pink"><<He>> plunges a finger into your ass.</span>
		<<combat-set-hand-target $args[0] "anus">>
		<<neutral 15>>
		<<set $speechanus to 1>>
		<<if random(1, 2) is 2>>
			<<bodypart_admire_chance left_bottom>>
		<<else>>
			<<bodypart_admire_chance right_bottom>>
		<</if>>
	<</if>>
<</widget>>

<<widget "combat-hand-on-anus">>
	<<set $rng to random(1, 100)>>
	<<if $rng gte 101>>
		<span class="purple"><<He>> slides <<his>> finger out of your ass.</span>
		<<combat-set-hand-target $args[0] "anusentrance">>
		<<neutral 15>>
	<<elseif $rng lte 100>>
		<<He>> rhythmically slides <<his>> finger in and out of your ass,
		<<neutral 20>><<set $speechanus to 1>>
		<<if $player.gender is "f">>
			teasing your anus.
		<<else>>
			teasing your prostate.
		<</if>>
		<<if random(1, 2) is 2>>
			<<bodypart_admire_chance left_bottom>>
		<<else>>
			<<bodypart_admire_chance right_bottom>>
		<</if>>
	<</if>>
<</widget>>

<<widget "combat-hand-on-mouth">>
	<<set $rng to random(1, 100)>>
	<<if $enemyanger lte 20 and $enemytrust gte 20>>
		<span class="teal">Made confident by your accommodating behaviour, <<he>> releases <<his>> hand from your mouth.</span>
		<<combat-reset-hand $args[0]>>
		<<set $mouthuse to 0>>
	<<else>>
		<<He>> continues to clasp your mouth shut.
		<<violence 1>><<bruise face>>
		<<bodypart_admire_chance forehead>>
	<</if>>
<</widget>>

<<widget "combat-hand-on-overlowerclothes">>
	<<set $rng to random(1, 100)>>
	<<if $worn.over_lower.name is "naked">>
		<<cast_aside_clothes>>
		<<combat-reset-hand $args[0]>>
	<<elseif $overlowerstruggle is 1>>
		<<set $overlowerstruggle to 0>>
		You manage to keep <<him>> from stripping you of your $worn.over_lower.name.
		<<set $speechstripstruggle to 1>>
	<<elseif $rng gte 101>>
		<<He>> releases <<his>> hand from your $worn.over_lower.name.
		<<combat-reset-hand $args[0]>>
	<<elseif $rng lte 100>>
		<<if $worn.over_lower.skirt is 1>>
			<<if $worn.over_lower.skirt_down is 1>>
				<<He>> lifts up your skirt, exposing your
				<<if $worn.lower.state is "waist">>
					$worn.lower.name.
					<<neutral 2>>
				<<elseif $worn.under_lower.state is "waist">>
					$worn.under_lower.name.
					<<neutral 2>>
				<<elseif $worn.genitals.name isnot "naked">>
					$worn.genitals.name.
					<<neutral 2>>
				<<else>>
					<span class="lewd"><<genitals>>.</span>
					<<neutral 5>><<set $speechgenitals to 1>>
				<</if>>
				<<set $worn.over_lower.skirt_down to 0>><<set $worn.over_lower.vagina_exposed to 1>><<set $worn.over_lower.anus_exposed to 1>><<set $worn.over_lower.exposed to 2>>
			<<elseif $worn.over_lower.skirt_down is 0>>
				<<if _overOutfit>>
					<<if $worn.over_upper.state is "waist">>
						<<if $position is "wall" and $walltype isnot "front">>
							<<He>> tugs at your $worn.over_upper.name, tearing <<overupperit>> before <span class="blue">letting go.</span>
							<<combat-reset-hand $args[0]>><<neutral 1>><<set $worn.over_lower.integrity -= 10>>
						<<else>>
							<<He>> lifts your $worn.over_upper.name above your midriff.
							<<set $worn.over_lower.state to "midriff">><<set $worn.over_upper.state to "midriff">><<neutral 1>>
							<<if $worn.over_upper.state_top is "waist">>
								<<set $worn.over_upper.state_top to "midriff">>
							<</if>>
						<</if>>
					<<elseif $worn.over_upper.state is "midriff">>
						<<He>> lifts up your $worn.over_upper.name,
						<<if $worn.upper.name isnot "naked">>
							exposing your $worn.upper.name.
						<<else>>
							<span class="lewd">exposing your<<breasts>>.</span><<set $speechbreasts to 1>>
						<</if>>
						<<set $worn.over_lower.state to "chest">><<set $worn.over_upper.state to "chest">><<neutral 2>><<set $worn.over_upper.exposed to 2>>
						<<if $worn.upper.state_top is "midriff">>
							<<set $worn.upper.state_top to "chest">>
						<</if>>
					<<elseif $worn.over_upper.state is "chest">>
						<span class="purple"><<He>> pulls your $worn.over_upper.name off completely.</span>
						<<set $worn.over_lower.state to 0>><<set $worn.over_upper.state to 0>><<overupperstrip>><<overlowerstrip>><<combat-reset-hand $args[0]>><<neutral 3>><<clothesstripstat>>
						<<if $worn.over_upper.state_top is "chest">>
							<<set $worn.over_upper.state_top to 0>>
						<</if>>
					<</if>>
				<<elseif _overOutfit is false>>
					<<if $worn.over_lower.state is "waist">>
						<<He>> pulls your $worn.over_lower.name down to your thighs.
						<<set $worn.over_lower.state to "thighs">><<neutral 1>>
					<<elseif $worn.over_lower.state is "thighs">>
						<<He>> pulls your $worn.over_lower.name down to your knees.
						<<set $worn.over_lower.state to "knees">><<neutral 1>>
					<<elseif $worn.over_lower.state is "knees">>
						<<He>> pulls your $worn.over_lower.name down to your ankles.
						<<set $worn.over_lower.state to "ankles">><<neutral 1>>
					<<elseif $worn.over_lower.state is "ankles">>
						<span class="purple"><<He>> completely pulls your $worn.over_lower.name off your legs.</span>
						<<lowerstrip>><<combat-reset-hand $args[0]>><<neutral 3>><<clothesstripstat>>
					<</if>>
				<</if>>
			<</if>>
		<<elseif _overOutfit>>
			<<if $worn.over_upper.open is 1>>
				<<if $worn.over_upper.state_top is "chest">>
					<<He>> tugs your $worn.over_lower.name, pulling down your $worn.over_upper.name and
					<<if $worn.upper.name isnot "naked">>
						revealing your $worn.upper.name.
					<<else>>
						<span class="lewd">revealing your <<breasts>>.</span><<set $speechbreasts to 1>>
					<</if>>
					<<set $worn.over_upper.state_top to "midriff">><<neutral 3>><<set $worn.over_upper.exposed to 2>>
					<<if $worn.over_upper.state is "chest">>
						<<set $worn.over_upper.state to "midriff">>
					<</if>>
					<<if $worn.over_lower.state is "chest">>
						<<set $worn.over_lower.state to "midriff">>
					<</if>>
				<<elseif $worn.over_upper.state_top is "midriff">>
					<<He>> tugs your $worn.over_lower.name, pulling down your $worn.over_upper.name passed your midriff.
					<<set $worn.over_upper.state_top to "waist">><<neutral 1>>
					<<if $worn.over_upper.state is "midriff">>
						<<set $worn.over_upper.state to "waist">>
					<</if>>
					<<if $worn.over_lower.state is "midriff">>
						<<set $worn.over_lower.state to "waist">>
					<</if>>
				<<elseif $worn.over_upper.state_top is "waist">>
					<<He>> pulls your $worn.over_upper.name down to your thighs, revealing your
					<<if $worn.under_lower.state is "waist">>
						$worn.lower.name
						<<neutral 2>>
					<<elseif $worn.under_lower.state is "waist">>
						$worn.under_lower.name
						<<neutral 2>>
					<<else>>
						<span class="lewd"><<genitals>>.</span>
						<<neutral 5>><<set $speechgenitals to 1>>
					<</if>>
					<<set $worn.over_lower.vagina_exposed to 1>><<set $worn.over_lower.anus_exposed to 1>><<set $worn.over_upper.state_top to "thighs">><<set $worn.over_upper.state to "thighs">>
					<<if $worn.over_lower.state is "waist">>
						<<set $worn.over_lower.state to "thighs">>
					<</if>>
				<<elseif $worn.over_upper.state_top is "thighs">>
					<<He>> pulls your $worn.over_upper.name down to your knees.
					<<set $worn.over_upper.state_top to "knees">><<set $worn.over_upper.state to "knees">><<neutral 1>>
					<<if $worn.over_lower.state is "thighs">>
						<<set $worn.over_lower.state to "knees">>
					<</if>>
				<<elseif $worn.over_upper.state_top is "knees">>
					<<He>> pulls your $worn.over_upper.name down to your ankles.
					<<set $worn.over_upper.state_top to "ankles">><<set $worn.over_upper.state to "ankles">><<neutral 1>>
					<<if $worn.over_lower.state is "knees">>
						<<set $worn.over_lower.state to "ankles">>
					<</if>>
				<<elseif $worn.over_upper.state_top is "ankles">>
					<span class="purple"><<He>> pulls your $worn.over_upper.name off the bottom of your legs.</span>
					<<neutral 5>><<set $worn.over_upper.state_top to 0>><<set $worn.over_upper.state to 0>><<overupperstrip>>
					<<if $worn.over_lower.state is "ankles">>
						<<set $worn.over_lower.state to 0>><<overlowerstrip>>
					<</if>>
				<</if>>
			<<else>>
				<<He>> tugs at your $worn.over_lower.name, tearing <<overlowerit>> before <span class="blue">letting go.</span>
				<<combat-reset-hand $args[0]>><<set $worn.over_lower.integrity -= 10>><<neutral 1>>
			<</if>>
		<<elseif _overOutfit is false>>
			<<if $worn.over_lower.state is "waist">>
				<<He>> pulls down your $worn.over_lower.name, exposing your
				<<if $worn.lower.state is "waist">>
					$worn.lower.name.
					<<neutral 2>>
				<<elseif $worn.under_lower.state is "waist">>
					$worn.under_lower.name.
					<<neutral 2>>
				<<else>>
					<span class="lewd"><<genitals>>.</span>
					<<neutral 5>><<set $speechgenitals to 1>>
				<</if>>
				<<set $worn.over_lower.vagina_exposed to 1>><<set $worn.over_lower.anus_exposed to 1>><<set $worn.over_lower.exposed to 2>><<set $worn.over_lower.state to "thighs">>
			<<elseif $worn.over_lower.state is "thighs">>
				<<He>> pulls your $worn.over_lower.name down to your knees.
				<<set $worn.over_lower.state to "knees">><<neutral 1>>
			<<elseif $worn.over_lower.state is "knees">>
				<<He>> pulls your $worn.over_lower.name down to your ankles.
				<<set $worn.over_lower.state to "ankles">><<neutral 1>>
			<<elseif $worn.over_lower.state is "ankles">>
				<span class="purple"><<He>> completely pulls your $worn.over_lower.name off your legs.</span>
				<<overlowerstrip>><<combat-reset-hand $args[0]>><<neutral 3>><<clothesstripstat>>
			<</if>>
		<<else>>
			<<He>> tugs at your $worn.over_lower.name, tearing <<overlowerit>> before <span class="blue">letting go.</span>
			<<combat-reset-hand $args[0]>><<neutral 1>><<set $worn.over_lower.integrity -= 10>>
		<</if>>
	<</if>>
	<<bodypart_admire_chance back>>
<</widget>>

<<widget "combat-hand-on-hair">>
	<<set $rng to random(1, 100)>>
	<<if $rng gte 101>>
		<span class="lblue"><<He>> releases <<his>> hand from your hair.</span>
		<<combat-reset-hand $args[0]>>
	<<elseif $enemyanger gte 61>>
		With your hair in <<his>> grip, <<he>> yanks back your head.
		<<violence 4>><<set $speechhair to 1>>
		<<bodypart_admire_chance forehead>>
	<<elseif $enemyanger gte 21>>
		<<He>> strokes your hair while holding it bunched in <<his>> grip.
		<<set $speechhair to 1>><<neutral 1>>
		<<bodypart_admire_chance forehead>>
	<<else>>
		<span class="lblue"><<He>> releases <<his>> hand from your hair.</span>
		<<combat-reset-hand $args[0]>>
	<</if>>
<</widget>>

<<widget "combat-hand-on-underclothes">>
	<<set $rng to random(1, 100)>>
	<<if $worn.under_lower.name is "naked">>
		<<cast_aside_clothes>>
		<<combat-reset-hand $args[0]>>
	<<elseif $understruggle is 1>>
		You manage to keep <<him>> from pulling down your $worn.under_lower.name.
		<<set $understruggle to 0>><<set $speechstripstruggle to 1>>
	<<elseif $rng gte 101>>
		<span class="blue"><<He>> releases <<his>> hand from your $worn.under_lower.name.</span>
		<<combat-reset-hand $args[0]>>
	<<elseif $rng lte 100>>
		<<if (($worn.over_lower.skirt is 1 and $worn.lower.skirt is 1) or ($worn.over_lower.skirt is 1 and $worn.lower.type.includes("naked")) or ($worn.lower.skirt is 1 and $worn.over_lower.type.includes("naked")))>>
			<<if $worn.under_lower.state is "waist">>
				<<if $combatgoal is "strip" or $rng gt 20 or $worn.under_lower.no_aside>>
					<<He>> pulls your $worn.under_lower.name down your thighs, <span class="lewd">revealing your <<genitals>>.</span>
					<<set $worn.under_lower.state to "thighs">>
				<<else>>
					<<He>> pulls your $worn.under_lower.name to the side, <span class="lewd">revealing your <<genitals>>.</span>
					<<set $worn.under_lower.state to "totheside">>
					<<combat-reset-hand $args[0]>>
				<</if>>
				<<neutral 5>><<set $worn.under_lower.vagina_exposed to 1>><<set $worn.under_lower.anus_exposed to 1>><<set $worn.under_lower.exposed to 1>><<set $speechgenitals to 1>>
			<<elseif $worn.under_lower.state is "thighs">>
				<<He>> pulls your $worn.under_lower.name down to your knees.
				<<set $worn.under_lower.state to "knees">><<neutral 1>>
			<<elseif $worn.under_lower.state is "knees">>
				<<He>> pulls your $worn.under_lower.name down to your ankles.
				<<set $worn.under_lower.state to "ankles">><<neutral 1>>
			<<elseif $worn.under_lower.state is "ankles">>
				<span class="purple"><<He>> pulls your $worn.under_lower.name off your legs.</span>
				<<underlowerstrip>><<neutral 3>><<combat-reset-hand $args[0]>><<clothesstripstat>>
			<</if>>
		<<elseif $worn.lower.state isnot "waist">>
			<<if $worn.under_lower.state is "waist">>
				<<if $combatgoal is "strip" or $rng gt 20 or $worn.under_lower.no_aside>>
					<<He>> pulls your $worn.under_lower.name down your thighs, <span class="lewd">revealing your <<genitals>>.</span>
					<<set $worn.under_lower.state to "thighs">>
				<<else>>
					<<He>> pulls your $worn.under_lower.name to the side, <span class="lewd">revealing your <<genitals>>.</span>
					<<set $worn.under_lower.state to "totheside">>
					<<combat-reset-hand $args[0]>>
				<</if>>
				<<neutral 5>><<set $worn.under_lower.vagina_exposed to 1>><<set $worn.under_lower.anus_exposed to 1>><<set $worn.under_lower.exposed to 1>><<set $speechgenitals to 1>>
			<<elseif $worn.under_lower.state is "thighs">>
				<<He>> pulls your $worn.under_lower.name down to your knees.
				<<set $worn.under_lower.state to "knees">><<neutral 1>>
			<<elseif $worn.under_lower.state is "knees">>
				<<He>> pulls your $worn.under_lower.name down to your ankles.
				<<set $worn.under_lower.state to "ankles">><<neutral 5>>
			<<elseif $worn.under_lower.state is "ankles">>
				<span class="purple"><<He>> pulls your $worn.under_lower.name off your legs.</span>
				<<underlowerstrip>><<neutral 3>><<combat-reset-hand $args[0]>><<clothesstripstat>>
			<</if>>
		<<else>>
			<<He>> tugs on your $worn.under_lower.name.
			<<neutral 1>><<set $worn.under_lower.integrity -= 10>>
		<</if>>
	<</if>>
	<<bodypart_admire_chance pubic>>
<</widget>>

<<widget "combat-hand-on-lowerclothes">>
	<<set $rng to random(1, 100)>>
	<<if $worn.lower.name is "naked">>
		<<cast_aside_clothes>>
		<<combat-reset-hand $args[0]>>
	<<elseif $lowerstruggle is 1>>
		<<set $lowerstruggle to 0>>
		You manage to keep <<him>> from stripping you of your $worn.lower.name.
		<<set $speechstripstruggle to 1>>
	<<elseif $rng gte 101>>
		<span class="lblue"><<He>> releases <<his>> hand from your $worn.lower.name.</span>
		<<combat-reset-hand $args[0]>>
	<<elseif $rng lte 100>>
		<<if (($worn.over_lower.skirt is 1 and $worn.lower.skirt is 1) or ($worn.over_lower.skirt is 1 and $worn.lower.type.includes("naked")) or ($worn.lower.skirt is 1 and $worn.over_lower.type.includes("naked")))>>
			<<if $worn.lower.skirt_down is 1>>
				<<He>> lifts up your skirt, exposing your
				<<if $worn.under_lower.state is "waist">>
					$worn.under_lower.name.
					<<neutral 2>>
				<<elseif $worn.genitals.name isnot "naked">>
					$worn.genitals.name.
					<<neutral 2>>
				<<else>>
					<span class="lewd"><<genitals>>.</span>
					<<neutral 5>><<set $speechgenitals to 1>>
				<</if>>
				<<set $worn.lower.skirt_down to 0>><<set $worn.lower.vagina_exposed to 1>><<set $worn.lower.anus_exposed to 1>><<set $worn.lower.exposed to 2>>
			<<elseif $worn.lower.skirt_down is 0>>
				<<if _middleOutfit>>
					<<if $worn.upper.state is "waist">>
						<<if $position is "wall" and $walltype isnot "front">>
							<<He>> tugs at your $worn.upper.name, tearing <<upperit>> before <span class="blue">letting go.</span>
							<<combat-reset-hand $args[0]>><<neutral 1>><<set $worn.lower.integrity -= 10>>
						<<else>>
							<<He>> lifts your $worn.upper.name above your midriff.
							<<set $worn.lower.state to "midriff">><<set $worn.upper.state to "midriff">><<neutral 1>>
							<<if $worn.upper.state_top is "waist">>
								<<set $worn.upper.state_top to "midriff">>
							<</if>>
						<</if>>
					<<elseif $worn.upper.state is "midriff">>
						<<He>> lifts up your $worn.upper.name, <span class="lewd">exposing your <<breasts>>.</span>
						<<set $worn.lower.state to "chest">><<set $worn.upper.state to "chest">><<neutral 2>><<set $worn.upper.exposed to 2>><<set $speechbreasts to 1>>
						<<if $worn.upper.state_top is "midriff">>
							<<set $worn.upper.state_top to "chest">>
						<</if>>
					<<elseif $worn.upper.state is "chest">>
						<span class="purple"><<He>> pulls your $worn.upper.name off completely.</span>
						<<set $worn.lower.state to 0>><<set $worn.upper.state to 0>><<upperstrip>><<lowerstrip>><<combat-reset-hand $args[0]>><<neutral 3>><<clothesstripstat>>
						<<if $worn.upper.state_top is "chest">>
							<<set $worn.upper.state_top to 0>>
						<</if>>
					<</if>>
				<<elseif _middleOutfit is false>>
					<<if $worn.lower.state is "waist">>
						<<He>> pulls your $worn.lower.name down to your thighs.
						<<set $worn.lower.state to "thighs">><<neutral 1>>
					<<elseif $worn.lower.state is "thighs">>
						<<He>> pulls your $worn.lower.name down to your knees.
						<<set $worn.lower.state to "knees">><<neutral 1>>
					<<elseif $worn.lower.state is "knees">>
						<<He>> pulls your $worn.lower.name down to your ankles.
						<<set $worn.lower.state to "ankles">><<neutral 1>>
					<<elseif $worn.lower.state is "ankles">>
						<span class="purple"><<He>> completely pulls your $worn.lower.name off your legs.</span>
						<<lowerstrip>><<combat-reset-hand $args[0]>><<neutral 3>><<clothesstripstat>>
					<</if>>
				<</if>>
			<</if>>
		<<elseif _middleOutfit>>
			<<if $worn.upper.open is 1>>
				<<if $worn.upper.state_top is "chest">>
					<<He>> tugs your $worn.lower.name, pulling down your $worn.upper.name and <span class="lewd">revealing your <<breasts>>.</span>
					<<set $worn.upper.state_top to "midriff">><<neutral 3>><<set $worn.upper.exposed to 2>><<set $speechbreasts to 1>>
					<<if $worn.upper.state is "chest">>
						<<set $worn.upper.state to "midriff">>
					<</if>>
					<<if $worn.lower.state is "chest">>
						<<set $worn.lower.state to "midriff">>
					<</if>>
				<<elseif $worn.upper.state_top is "midriff">>
					<<He>> tugs your $worn.lower.name, pulling down your $worn.upper.name passed your midriff.
					<<set $worn.upper.state_top to "waist">><<neutral 1>>
					<<if $worn.upper.state is "midriff">>
						<<set $worn.upper.state to "waist">>
					<</if>>
					<<if $worn.lower.state is "midriff">>
						<<set $worn.lower.state to "waist">>
					<</if>>
				<<elseif $worn.upper.state_top is "waist">>
					<<He>> pulls your $worn.upper.name down to your thighs, revealing your
					<<if $worn.under_lower.state is "waist">>
						$worn.under_lower.name
						<<neutral 2>>
					<<else>>
						<span class="lewd"><<genitals>>.</span>
						<<neutral 5>><<set $speechgenitals to 1>>
					<</if>>
					<<set $worn.lower.vagina_exposed to 1>><<set $worn.lower.anus_exposed to 1>><<set $worn.upper.state_top to "thighs">><<set $worn.upper.state to "thighs">><<set $worn.lower.exposed to 2>>
					<<if $worn.lower.state is "waist">>
						<<set $worn.lower.state to "thighs">>
					<</if>>
				<<elseif $worn.upper.state_top is "thighs">>
					<<He>> pulls your $worn.upper.name down to your knees.
					<<set $worn.upper.state_top to "knees">><<set $worn.upper.state to "knees">><<neutral 1>>
					<<if $worn.lower.state is "thighs">>
						<<set $worn.lower.state to "knees">>
					<</if>>
				<<elseif $worn.upper.state_top is "knees">>
					<<He>> pulls your $worn.upper.name down to your ankles.
					<<set $worn.upper.state_top to "ankles">><<set $worn.upper.state to "ankles">><<neutral 1>>
					<<if $worn.lower.state is "knees">>
						<<set $worn.lower.state to "ankles">>
					<</if>>
				<<elseif $worn.upper.state_top is "ankles">>
					<span class="purple"><<He>> pulls your $worn.upper.name off the bottom of your legs.</span>
					<<neutral 5>><<set $worn.upper.state_top to 0>><<set $worn.upper.state to 0>><<upperstrip>>
					<<if $worn.lower.state is "ankles">>
						<<set $worn.lower.state to 0>><<lowerstrip>>
					<</if>>
				<</if>>
			<<else>>
				<<He>> tugs at your $worn.lower.name, tearing <<lowerit>> before <span class="blue">letting go.</span>
				<<combat-reset-hand $args[0]>><<set $worn.lower.integrity -= 10>><<neutral 1>>
			<</if>>
		<<elseif _middleOutfit is false>>
			<<if $worn.lower.state is "waist">>
				<<He>> pulls down your $worn.lower.name, exposing your
				<<if $worn.under_lower.state is "waist">>
					$worn.under_lower.name.
					<<neutral 2>><<set $worn.lower.vagina_exposed to 1>><<set $worn.lower.anus_exposed to 1>><<set $worn.lower.exposed to 2>>
				<<else>>
					<span class="lewd"><<genitals>>.</span>
					<<neutral 5>><<set $speechgenitals to 1>>
				<</if>>
				<<set $worn.lower.vagina_exposed to 1>><<set $worn.lower.anus_exposed to 1>><<set $worn.lower.exposed to 2>><<set $worn.lower.state to "thighs">>
			<<elseif $worn.lower.state is "thighs">>
				<<He>> pulls your $worn.lower.name down to your knees.
				<<set $worn.lower.state to "knees">><<neutral 1>>
			<<elseif $worn.lower.state is "knees">>
				<<He>> pulls your $worn.lower.name down to your ankles.
				<<set $worn.lower.state to "ankles">><<neutral 1>>
			<<elseif $worn.lower.state is "ankles">>
				<span class="purple"><<He>> completely pulls your $worn.lower.name off your legs.</span>
				<<lowerstrip>><<combat-reset-hand $args[0]>><<neutral 3>><<clothesstripstat>>
			<</if>>
		<<else>>
			<<He>> tugs at your $worn.lower.name, tearing <<lowerit>> before <span class="blue">letting go.</span>
			<<combat-reset-hand $args[0]>><<neutral 1>><<set $worn.lower.integrity -= 10>>
		<</if>>
	<</if>>
	<<bodypart_admire_chance back>>
<</widget>>

<<widget "combat-hand-on-overupperclothes">>
	<<set $rng to random(1, 100)>>
	<<if $worn.over_upper.name is "naked">>
		<<cast_aside_clothes>>
		<<combat-reset-hand $args[0]>>
	<<elseif $overupperstruggle is 1>>
		<<set $overupperstruggle to 0>>
		You manage to keep <<him>> from stripping you of your $worn.over_upper.name.
		<<set $speechstripstruggle to 1>>
	<<elseif $rng gte 101>>
		<span class="lblue"><<He>> releases <<his>> hand from your $worn.over_upper.name.</span>
		<<combat-reset-hand $args[0]>>
	<<elseif $rng lte 100>>
		<<if _overOutfit is false>>
			<<if $worn.over_upper.open is 1>>
				<<if $worn.over_upper.state_top is "chest">>
					<<He>> pulls down your $worn.over_upper.name,
					<<if $worn.upper.name isnot "naked">>
						revealing your $worn.upper.name.
					<<else>>
						<span class="lewd">revealing your <<breasts>>.</span><<set $speechbreasts to 1>>
					<</if>>
					<<set $worn.over_upper.state_top to "midriff">><<neutral 3>><<set $worn.over_upper.exposed to 2>>
					<<if $worn.over_upper.state is "chest">>
						<<set $worn.over_upper.state to "midriff">>
					<</if>>
				<<elseif $worn.over_upper.state_top is "midriff">>
					<<He>> pulls your $worn.over_upper.name down past your midriff.
					<<set $worn.over_upper.state_top to "waist">><<neutral 1>>
					<<if $worn.over_upper.state is "midriff">>
						<<set $worn.over_upper.state to "waist">>
					<</if>>
				<<elseif $worn.over_upper.state_top is "waist">>
					<<He>> pulls your $worn.over_upper.name down to your thighs.
					<<set $worn.over_upper.state_top to "thighs">><<set $worn.over_upper.state to "thighs">>
				<<elseif $worn.over_upper.state_top is "thighs">>
					<<He>> pulls your $worn.over_upper.name down to your knees.
					<<set $worn.over_upper.state_top to "knees">><<set $worn.over_upper.state to "knees">><<neutral 1>>
				<<elseif $worn.over_upper.state_top is "knees">>
					<<He>> pulls your $worn.over_upper.name down to your ankles.
					<<set $worn.over_upper.state_top to "ankles">><<set $worn.over_upper.state to "ankles">><<neutral 1>>
				<<elseif $worn.over_upper.state_top is "ankles">>
					<span class="purple"><<He>> pulls your $worn.over_upper.name off the bottom of your legs.</span>
					<<neutral 5>><<set $worn.over_upper.state_top to 0>><<set $worn.over_upper.state to 0>><<overupperstrip>><<combat-reset-hand $args[0]>>
				<</if>>
			<<elseif $worn.over_upper.open is 0>>
				<<if $position is "wall" and $walltype isnot "front">>
					<<He>> tugs at your $worn.over_upper.name, tearing <<overupperit>> before <span class="blue">letting go.</span>
					<<combat-reset-hand $args[0]>><<set $worn.over_upper.integrity -= 10>><<neutral 1>>
				<<elseif $position isnot "wall">>
					<<if $worn.over_upper.state is "waist">>
						<<He>> lifts up your $worn.over_upper.name, exposing your midriff.
						<<set $worn.over_upper.state to "midriff">><<neutral 1>>
					<<elseif $worn.over_upper.state is "midriff">>
						<<He>> lifts up your $worn.over_upper.name,
						<<if $worn.upper.name isnot "naked">>
							revealing your $worn.upper.name.
						<<else>>
							<span class="lewd">revealing your <<breasts>>.</span><<set $speechbreasts to 1>>
						<</if>>
						<<set $worn.over_upper.state to "chest">><<neutral 2>><<set $worn.over_upper.exposed to 2>>
					<<elseif $worn.over_upper.state is "chest">>
						<span class="purple"><<He>> removes your $worn.over_upper.name completely.</span>
						<<overupperstrip>><<combat-reset-hand $args[0]>><<neutral 3>><<clothesstripstat>>
					<</if>>
				<</if>>
			<</if>>
		<<elseif _overOutfit>>
			<<if $worn.over_upper.open is 1>>
				<<if $worn.over_lower.state is $worn.over_upper.state_top and $worn.over_lower.state is $worn.over_upper.state and $worn.over_lower.skirt is 1>>
					<<if $position is "wall" and $walltype isnot "front">>
						<<He>> tugs at your $worn.over_upper.name, tearing <<overupperit>> before <span class="blue">letting go.</span>
						<<combat-reset-hand $args[0]>><<set $worn.over_upper.integrity -= 10>><<neutral 1>>
					<<elseif $position isnot "wall">>
						<<if $worn.over_upper.state is "waist">>
							<<He>> pulls your bundled $worn.over_upper.name up past your midriff.
							<<set $worn.over_upper.state to "midriff">><<neutral 1>><<set $worn.lower.state to "midriff">><<set $worn.over_upper.state_top to "midriff">>
						<<elseif $worn.over_upper.state is "midriff">>
							<<He>> pulls your bundled $worn.over_upper.name up past your
							<<if $worn.upper.name isnot "naked">>
								$worn.upper.name.
							<<else>>
								<<breasts>>.<<set $speechbreasts to 1>>
							<</if>>
							<<set $worn.over_upper.state to "chest">><<neutral 2>><<set $worn.over_upper.exposed to 2>><<set $worn.over_lower.state to "chest">><<set $worn.over_upper.state_top to "chest">>
						<<elseif $worn.over_upper.state is "chest">>
							<span class="purple"><<He>> pulls your $worn.over_upper.name off your body.</span>
							<<overupperstrip>><<combat-reset-hand $args[0]>><<neutral 3>><<clothesstripstat>>
						<</if>>
					<</if>>
				<<else>>
					<<if $worn.over_upper.state_top is "chest">>
						<<He>> pulls down the top of your $worn.over_upper.name,
						<<if $worn.upper.name isnot "naked">>
							revealing your $worn.upper.name.
						<<else>>
							<span class="lewd">revealing your <<breasts>>.</span><<set $speechbreasts to 1>>
						<</if>>
						<<set $worn.over_upper.state_top to "midriff">><<neutral 2>><<set $worn.over_upper.exposed to 2>>
						<<if $worn.over_upper.state is "chest">>
							<<set $worn.over_upper.state to "midriff">>
						<</if>>
						<<if $worn.lower.state is "chest">>
							<<set $worn.lower.state to "midriff">>
						<</if>>
					<<elseif $worn.over_upper.state_top is "midriff">>
						<<He>> pulls your $worn.over_upper.name down past your midriff.
						<<set $worn.over_upper.state_top to "waist">><<neutral 1>>
						<<if $worn.over_upper.state is "midriff">>
							<<set $worn.over_upper.state to "waist">>
						<</if>>
						<<if $worn.over_lower.state is "midriff">>
							<<set $worn.over_lower.state to "waist">>
						<</if>>
					<<elseif $worn.over_upper.state_top is "waist">>
						<<He>> pulls your $worn.over_upper.name down to your thighs, revealing your
						<<if $worn.lower.state is "waist">>
							$worn.lower.name
							<<neutral 2>>
						<<elseif $worn.under_lower.state is "waist">>
							$worn.under_lower.name
							<<neutral 2>>
						<<else>>
							<span class="lewd"><<genitals>>.</span>
							<<neutral 5>><<set $speechgenitals to 1>>
						<</if>>
						<<set $worn.over_lower.vagina_exposed to 1>><<set $worn.over_lower.anus_exposed to 1>><<set $worn.over_lower.exposed to 2>><<set $worn.over_upper.state_top to "thighs">><<set $worn.over_upper.state to "thighs">>
						<<if $worn.over_lower.state is "waist">>
							<<set $worn.over_lower.state to "thighs">>
						<</if>>
					<<elseif $worn.over_upper.state_top is "thighs">>
						<<He>> pulls your $worn.over_upper.name down to your knees.
						<<set $worn.over_upper.state_top to "knees">><<set $worn.over_upper.state to "knees">><<neutral 1>>
						<<if $worn.over_lower.state is "thighs">>
							<<set $worn.over_lower.state to "knees">>
						<</if>>
					<<elseif $worn.over_upper.state_top is "knees">>
						<<He>> pulls your $worn.over_upper.name down to your ankles.
						<<set $worn.over_upper.state_top to "ankles">><<set $worn.over_upper.state to "ankles">><<neutral 1>>
						<<if $worn.over_lower.state is "knees">>
							<<set $worn.over_lower.state to "ankles">>
						<</if>>
					<<elseif $worn.over_upper.state_top is "ankles">>
						<span class="purple"><<He>> pulls your $worn.over_upper.name off the bottom of your legs.</span>
						<<neutral 5>><<set $worn.over_upper.state_top to 0>><<set $worn.over_upper.state to 0>><<overupperstrip>><<combat-reset-hand $args[0]>>
						<<if $worn.over_lower.state is "ankles">>
							<<set $worn.over_lower.state to 0>><<overlowerstrip>>
						<</if>>
					<</if>>
				<</if>>
			<<else>>
				<<He>> tugs at your $worn.over_upper.name, tearing <<overupperit>> before <span class="blue">letting go.</span>
				<<combat-reset-hand $args[0]>><<set $worn.over_upper.integrity -= 10>><<neutral 1>>
			<</if>>
		<</if>>
	<</if>>
	<<bodypart_admire_chance breasts>>
<</widget>>

<<widget "combat-hand-on-upperclothes">>
	<<set $rng to random(1, 100)>>
	<<if $worn.upper.name is "naked">>
		<<cast_aside_clothes>>
		<<combat-reset-hand $args[0]>>
	<<elseif $upperstruggle is 1>>
		<<set $upperstruggle to 0>>
		You manage to keep <<him>> from stripping you of your $worn.upper.name.
		<<set $speechstripstruggle to 1>>
	<<elseif $rng gte 101>>
		<span class="lblue"><<He>> releases <<his>> hand from your $worn.upper.name.</span>
		<<combat-reset-hand $args[0]>>
	<<elseif $rng lte 100>>
		<<if _middleOutfit is false>>
			<<if $worn.upper.open is 1>>
				<<if $worn.upper.state_top is "chest">>
					<<He>> pulls down your $worn.upper.name, <span class="lewd">revealing your <<breasts>>.</span>
					<<set $worn.upper.state_top to "midriff">><<neutral 3>><<set $worn.upper.exposed to 2>><<set $speechbreasts to 1>>
					<<if $worn.upper.state is "chest">>
						<<set $worn.upper.state to "midriff">>
					<</if>>
				<<elseif $worn.upper.state_top is "midriff">>
					<<He>> pulls your $worn.upper.name down past your midriff.
					<<set $worn.upper.state_top to "waist">><<neutral 1>>
					<<if $worn.upper.state is "midriff">>
						<<set $worn.upper.state to "waist">>
					<</if>>
				<<elseif $worn.upper.state_top is "waist">>
					<<He>> pulls your $worn.upper.name down to your thighs.
					<<set $worn.upper.state_top to "thighs">><<set $worn.upper.state to "thighs">>
				<<elseif $worn.upper.state_top is "thighs">>
					<<He>> pulls your $worn.upper.name down to your knees.
					<<set $worn.upper.state_top to "knees">><<set $worn.upper.state to "knees">><<neutral 1>>
				<<elseif $worn.upper.state_top is "knees">>
					<<He>> pulls your $worn.upper.name down to your ankles.
					<<set $worn.upper.state_top to "ankles">><<set $worn.upper.state to "ankles">><<neutral 1>>
				<<elseif $worn.upper.state_top is "ankles">>
					<span class="purple"><<He>> pulls your $worn.upper.name off the bottom of your legs.</span>
					<<neutral 5>><<set $worn.upper.state_top to 0>><<set $worn.upper.state to 0>><<upperstrip>><<combat-reset-hand $args[0]>>
				<</if>>
			<<elseif $worn.upper.open is 0>>
				<<if $position is "wall" and $walltype isnot "front">>
					<<He>> tugs at your $worn.upper.name, tearing <<upperit>> before <span class="blue">letting go.</span>
					<<combat-reset-hand $args[0]>><<set $worn.upper.integrity -= 10>><<neutral 1>>
				<<elseif $position isnot "wall">>
					<<if $worn.upper.state is "waist">>
						<<He>> lifts up your $worn.upper.name, exposing your midriff.
						<<set $worn.upper.state to "midriff">><<neutral 1>>
					<<elseif $worn.upper.state is "midriff">>
						<<He>> lifts up your $worn.upper.name, <span class="lewd">exposing your <<breasts>>.</span>
						<<set $worn.upper.state to "chest">><<neutral 2>><<set $worn.upper.exposed to 2>><<set $speechbreasts to 1>>
					<<elseif $worn.upper.state is "chest">>
						<span class="purple"><<He>> removes your $worn.upper.name completely.</span>
						<<upperstrip>><<combat-reset-hand $args[0]>><<neutral 3>><<clothesstripstat>>
					<</if>>
				<</if>>
			<</if>>
		<<elseif _middleOutfit>>
			<<if $worn.upper.open is 1>>
				<<if $worn.lower.state is $worn.upper.state_top and $worn.lower.state is $worn.upper.state and $worn.lower.skirt is 1>>
					<<if $position is "wall" and $walltype isnot "front">>
						<<He>> tugs at your $worn.upper.name, tearing <<upperit>> before <span class="blue">letting go.</span>
						<<combat-reset-hand $args[0]>><<set $worn.upper.integrity -= 10>><<neutral 1>>
					<<elseif $position isnot "wall">>
						<<if $worn.upper.state is "waist">>
							<<He>> pulls your bundled $worn.upper.name up past your midriff.
							<<set $worn.upper.state to "midriff">><<neutral 1>><<set $worn.lower.state to "midriff">><<set $worn.upper.state_top to "midriff">>
						<<elseif $worn.upper.state is "midriff">>
							<<He>> pulls your bundled $worn.upper.name up past your <<breasts>>.
							<<set $worn.upper.state to "chest">><<neutral 2>><<set $worn.upper.exposed to 2>><<set $speechbreasts to 1>><<set $worn.lower.state to "chest">><<set $worn.upper.state_top to "chest">>
						<<elseif $worn.upper.state is "chest">>
							<span class="purple"><<He>> pulls your $worn.upper.name off your body.</span>
							<<upperstrip>><<combat-reset-hand $args[0]>><<neutral 3>><<clothesstripstat>>
						<</if>>
					<</if>>
				<<else>>
					<<if $worn.upper.state_top is "chest">>
						<<He>> pulls down the top of your $worn.upper.name, <span class="lewd">revealing your <<breasts>>.</span>
						<<set $worn.upper.state_top to "midriff">><<neutral 2>><<set $worn.upper.exposed to 2>><<set $speechbreasts to 1>>
						<<if $worn.upper.state is "chest">>
							<<set $worn.upper.state to "midriff">>
						<</if>>
						<<if $worn.lower.state is "chest">>
							<<set $worn.lower.state to "midriff">>
						<</if>>
					<<elseif $worn.upper.state_top is "midriff">>
						<<He>> pulls your $worn.upper.name down past your midriff.
						<<set $worn.upper.state_top to "waist">><<neutral 1>>
						<<if $worn.upper.state is "midriff">>
							<<set $worn.upper.state to "waist">>
						<</if>>
						<<if $worn.lower.state is "midriff">>
							<<set $worn.lower.state to "waist">>
						<</if>>
					<<elseif $worn.upper.state_top is "waist">>
						<<He>> pulls your $worn.upper.name down to your thighs, revealing your
						<<if $worn.under_lower.state is "waist">>
							$worn.under_lower.name
							<<neutral 2>>
						<<else>>
							<span class="lewd"><<genitals>>.</span>
							<<neutral 5>><<set $speechgenitals to 1>>
						<</if>>
						<<set $worn.lower.vagina_exposed to 1>><<set $worn.lower.anus_exposed to 1>><<set $worn.lower.exposed to 2>><<set $worn.upper.state_top to "thighs">><<set $worn.upper.state to "thighs">>
						<<if $worn.lower.state is "waist">>
							<<set $worn.lower.state to "thighs">>
						<</if>>
					<<elseif $worn.upper.state_top is "thighs">>
						<<He>> pulls your $worn.upper.name down to your knees.
						<<set $worn.upper.state_top to "knees">><<set $worn.upper.state to "knees">><<neutral 1>>
						<<if $worn.lower.state is "thighs">>
							<<set $worn.lower.state to "knees">>
						<</if>>
					<<elseif $worn.upper.state_top is "knees">>
						<<He>> pulls your $worn.upper.name down to your ankles.
						<<set $worn.upper.state_top to "ankles">><<set $worn.upper.state to "ankles">><<neutral 1>>
						<<if $worn.lower.state is "knees">>
							<<set $worn.lower.state to "ankles">>
						<</if>>
					<<elseif $worn.upper.state_top is "ankles">>
						<span class="purple"><<He>> pulls your $worn.upper.name off the bottom of your legs.</span>
						<<neutral 5>><<set $worn.upper.state_top to 0>><<set $worn.upper.state to 0>><<upperstrip>><<combat-reset-hand $args[0]>>
						<<if $worn.lower.state is "ankles">>
							<<set $worn.lower.state to 0>><<lowerstrip>>
						<</if>>
					<</if>>
				<</if>>
			<<else>>
				<<He>> tugs at your $worn.upper.name, tearing <<upperit>> before <span class="blue">letting go.</span>
				<<combat-reset-hand $args[0]>><<set $worn.upper.integrity -= 10>><<neutral 1>>
			<</if>>
		<</if>>
	<</if>>
	<<bodypart_admire_chance breasts>>
<</widget>>

<<widget "combat-hand-on-underupperclothes">>
	<<set $rng to random(1, 100)>>
	<<if $worn.under_upper.name is "naked">>
		<<cast_aside_clothes>>
		<<combat-reset-hand $args[0]>>
	<<elseif $upperstruggle is 1>>
		<<set $upperstruggle to 0>>
		You manage to keep <<him>> from stripping you of your $worn.under_upper.name.
		<<set $speechstripstruggle to 1>>
	<<elseif $rng gte 101>>
		<span class="lblue"><<He>> releases <<his>> hand from your $worn.under_upper.name.</span>
		<<combat-reset-hand $args[0]>>
	<<elseif $rng lte 100>>
		<<if _underOutfit is false>>
			<<if $worn.under_upper.open is 1>>
				<<if $worn.under_upper.state_top is "chest">>
					<<He>> pulls down your $worn.under_upper.name, <span class="lewd">revealing your <<breasts>>.</span>
					<<set $worn.under_upper.state_top to "midriff">><<neutral 3>><<set $worn.under_upper.exposed to 2>><<set $speechbreasts to 1>>
					<<if $worn.under_upper.state is "chest">>
						<<set $worn.under_upper.state to "midriff">>
					<</if>>
				<<elseif $worn.under_upper.state_top is "midriff">>
					<<He>> pulls your $worn.under_upper.name down past your midriff.
					<<set $worn.under_upper.state_top to "waist">><<neutral 1>>
					<<if $worn.under_upper.state is "midriff">>
						<<set $worn.under_upper.state to "waist">>
					<</if>>
				<<elseif $worn.under_upper.state_top is "waist">>
					<<He>> pulls your $worn.under_upper.name down to your thighs.
					<<set $worn.under_upper.state_top to "thighs">><<set $worn.under_upper.state to "thighs">>
				<<elseif $worn.under_upper.state_top is "thighs">>
					<<He>> pulls your $worn.under_upper.name down to your knees.
					<<set $worn.under_upper.state_top to "knees">><<set $worn.under_upper.state to "knees">><<neutral 1>>
				<<elseif $worn.under_upper.state_top is "knees">>
					<<He>> pulls your $worn.under_upper.name down to your ankles.
					<<set $worn.under_upper.state_top to "ankles">><<set $worn.under_upper.state to "ankles">><<neutral 1>>
				<<elseif $worn.under_upper.state_top is "ankles">>
					<span class="purple"><<He>> pulls your $worn.under_upper.name off the bottom of your legs.</span>
					<<neutral 5>><<set $worn.under_upper.state_top to 0>><<set $worn.under_upper.state to 0>><<underupperstrip>><<combat-reset-hand $args[0]>>
				<</if>>
			<<elseif $worn.under_upper.open is 0>>
				<<if $position is "wall" and $walltype isnot "front">>
					<<He>> tugs at your $worn.under_upper.name, tearing <<underupperit>> before <span class="blue">letting go.</span>
					<<combat-reset-hand $args[0]>><<set $worn.under_upper.integrity -= 10>><<neutral 1>>
				<<elseif $position isnot "wall">>
					<<if $worn.under_upper.state is "waist">>
						<<He>> lifts up your $worn.under_upper.name, exposing your midriff.
						<<set $worn.under_upper.state to "midriff">><<neutral 1>>
					<<elseif $worn.under_upper.state is "midriff">>
						<<He>> lifts up your $worn.under_upper.name, <span class="lewd">exposing your <<breasts>>.</span>
						<<set $worn.under_upper.state to "chest">><<neutral 2>><<set $worn.under_upper.exposed to 2>><<set $speechbreasts to 1>>
					<<elseif $worn.under_upper.state is "chest">>
						<span class="purple"><<He>> removes your $worn.under_upper.name completely.</span>
						<<underupperstrip>><<combat-reset-hand $args[0]>><<neutral 3>><<clothesstripstat>>
					<</if>>
				<</if>>
			<</if>>
		<<elseif _underOutfit>>
			<<if $worn.under_upper.open is 1>>
				<<if $worn.under_lower.state is $worn.under_upper.state_top and $worn.under_lower.state is $worn.under_upper.state and $worn.under_lower.skirt is 1>>
					<<if $position is "wall" and $walltype isnot "front">>
						<<He>> tugs at your $worn.under_upper.name, tearing <<underupperit>> before <span class="blue">letting go.</span>
						<<combat-reset-hand $args[0]>><<set $worn.under_upper.integrity -= 10>><<neutral 1>>
					<<elseif $position isnot "wall">>
						<<if $worn.under_upper.state is "waist">>
							<<He>> pulls your bundled $worn.under_upper.name up past your midriff.
							<<set $worn.under_upper.state to "midriff">><<neutral 1>><<set $worn.under_lower.state to "midriff">><<set $worn.under_upper.state_top to "midriff">>
						<<elseif $worn.under_upper.state is "midriff">>
							<<He>> pulls your bundled $worn.under_upper.name up past your <<breasts>>.
							<<set $worn.under_upper.state to "chest">><<neutral 2>><<set $worn.under_upper.exposed to 2>><<set $speechbreasts to 1>><<set $worn.under_lower.state to "chest">><<set $worn.under_upper.state_top to "chest">>
						<<elseif $worn.under_upper.state is "chest">>
							<span class="purple"><<He>> pulls your $worn.under_upper.name off your body.</span>
							<<underupperstrip>><<combat-reset-hand $args[0]>><<neutral 3>><<clothesstripstat>>
						<</if>>
					<</if>>
				<<else>>
					<<if $worn.under_upper.state_top is "chest">>
						<<He>> pulls down the top of your $worn.under_upper.name, <span class="lewd">revealing your <<breasts>>.</span>
						<<set $worn.under_upper.state_top to "midriff">><<neutral 2>><<set $worn.under_upper.exposed to 2>><<set $speechbreasts to 1>>
						<<if $worn.under_upper.state is "chest">>
							<<set $worn.under_upper.state to "midriff">>
						<</if>>
						<<if $worn.under_lower.state is "chest">>
							<<set $worn.under_lower.state to "midriff">>
						<</if>>
					<<elseif $worn.under_upper.state_top is "midriff">>
						<<He>> pulls your $worn.under_upper.name down past your midriff.
						<<set $worn.under_upper.state_top to "waist">><<neutral 1>>
						<<if $worn.under_upper.state is "midriff">>
							<<set $worn.under_upper.state to "waist">>
						<</if>>
						<<if $worn.under_lower.state is "midriff">>
							<<set $worn.under_lower.state to "waist">>
						<</if>>
					<<elseif $worn.under_upper.state_top is "waist">>
						<<He>> pulls your $worn.under_upper.name down to your thighs, revealing your
						<<if $worn.under_lower.state is "waist">>
							$worn.under_lower.name
							<<neutral 2>>
						<<else>>
							<span class="lewd"><<genitals>>.</span>
							<<neutral 5>><<set $speechgenitals to 1>>
						<</if>>
						<<set $worn.under_lower.vagina_exposed to 1>><<set $worn.under_lower.anus_exposed to 1>><<set $worn.under_lower.exposed to 2>><<set $worn.under_upper.state_top to "thighs">><<set $worn.under_upper.state to "thighs">>
						<<if $worn.under_lower.state is "waist">>
							<<set $worn.under_lower.state to "thighs">>
						<</if>>
					<<elseif $worn.under_upper.state_top is "thighs">>
						<<He>> pulls your $worn.under_upper.name down to your knees.
						<<set $worn.under_upper.state_top to "knees">><<set $worn.under_upper.state to "knees">><<neutral 1>>
						<<if $worn.under_lower.state is "thighs">>
							<<set $worn.under_lower.state to "knees">>
						<</if>>
					<<elseif $worn.under_upper.state_top is "knees">>
						<<He>> pulls your $worn.under_upper.name down to your ankles.
						<<set $worn.under_upper.state_top to "ankles">><<set $worn.under_upper.state to "ankles">><<neutral 1>>
						<<if $worn.under_lower.state is "knees">>
							<<set $worn.under_lower.state to "ankles">>
						<</if>>
					<<elseif $worn.under_upper.state_top is "ankles">>
						<span class="purple"><<He>> pulls your $worn.under_upper.name off the bottom of your legs.</span>
						<<neutral 5>><<set $worn.under_upper.state_top to 0>><<set $worn.under_upper.state to 0>><<underupperstrip>><<combat-reset-hand $args[0]>>
						<<if $worn.under_lower.state is "ankles">>
							<<set $worn.under_lower.state to 0>><<underlowerstrip>>
						<</if>>
					<</if>>
				<</if>>
			<<else>>
				<<He>> tugs at your $worn.under_upper.name, tearing <<underupperit>> before <span class="blue">letting go.</span>
				<<combat-reset-hand $args[0]>><<set $worn.under_upper.integrity -= 10>><<neutral 1>>
			<</if>>
		<</if>>
	<</if>>
	<<bodypart_admire_chance breasts>>
<</widget>>

<<widget "combat-hand-on-lube">>
	<<if $NPCList[_n].penis is "vaginaentrance" and $player.bodyliquid.vaginaoutside.goo lt 5>>
			<<He>> squeezes the bottle of lubricant in <<his>> $args[0] hand, <span class="pink">covering your <<pussy>> in slimy fluid.</span>
			<<neutral 10>><<set $player.bodyliquid.vaginaoutside.goo += 1>>
	<<elseif $NPCList[_n].penis is "anusentrance" and $player.bodyliquid.bottom.goo lt 5>>
			<<He>> squeezes the bottle of lubricant in <<his>> $args[0] hand, <span class="pink">covering your <<bottom>> in slimy fluid.</span>
			<<neutral 10>><<set $player.bodyliquid.bottom.goo += 1>>
	<<elseif $NPCList[_n].penis is "otheranusentrance" and $player.bodyliquid.penis.goo lt 5>>
			<<He>> squeezes the bottle of lubricant in <<his>> $args[0] hand, <span class="pink">covering your <<penis>> in slimy fluid.</span>
			<<neutral 10>><<set $player.bodyliquid.penis.goo += 1>>
	<<elseif $NPCList[_n].vagina is "penisentrance" and $player.bodyliquid.penis.goo lt 5>>
			<<He>> squeezes the bottle of lubricant in <<his>> $args[0] hand, <span class="pink">covering your <<penis>> in slimy fluid.</span>
			<<neutral 10>><<set $player.bodyliquid.penis.goo += 1>>
	<<elseif $NPCList[_n].vagina is "otheranusentrance" and $player.bodyliquid.penis.goo lt 5>>
			<<He>> squeezes the bottle of lubricant in <<his>> $args[0] hand, <span class="pink">covering your <<penis>> in slimy fluid.</span>
			<<neutral 10>><<set $player.bodyliquid.penis.goo += 1>>
	<<else>>
		<span class="lblue"><<He>> casts aside the lube in <<his>> $args[0] hand.</span>
		<<combat-reset-hand $args[0]>>
	<</if>>
<</widget>>

<<widget "combat-hand-on-shoes">>
	<<if $worn.feet.name isnot "naked">>
		<<He>> tugs off your $worn.feet.name.
		<<feetstrip>>
		<<neutral 5>>
	<</if>>
	<<combat-reset-hand $args[0]>>
<</widget>>

<<widget "combat-hand-on-socks">>
	<<if $worn.legs.name isnot "naked">>
		<<He>> tugs off your $worn.legs.name, exposing your feet.
		<<legsstrip>>
		<<neutral 5>>
	<</if>>
	<<combat-reset-hand $args[0]>>
<</widget>>

<<widget "combat-hand-on-shackle">>
	<span class="red"><<He>> clamps the iron shackles around your ankles.</span> They lock with a click.
	<<shackle_feet>>
	<<combat-reset-hand $args[0]>>
<</widget>>

<<widget "combat-hand-on-shackle-imminent">>
	<span class="pink"><<He>> pulls your ankles into the iron shackles.</span>
	<<combat-set-hand-target $args[0] "shackle_imminent">>
<</widget>>


<<widget "combat-hand-on-head_breasts">>
	<<set $rng to random(1, 100)>>
	<<if $rng gte 70>>
		<<sex 3>>
		<<combat-set-hand-target $args[0] "head_nipples">>
		<<if $mouthstate isnot "nipple">>
			<<set $mouthactiondefault to "breastclosed">>
		<</if>>
		<<set $mouthstate to "nipple">><<set $NPCList[_n].chest to "mouth">>

		<<if $NPCList[_n].breastsize gte 1>>
			<<He>> pushes your mouth against <<hisselect _n>> $NPCList[_n].breastdesc, <span class="purple">and your mouth against <<hisselect _n>> nipple.</span>
		<<else>>
			<span class="purple"><<He>> pushes your mouth against <<hisselect _n>> $NPCList[_n].breastdesc.</span>
		<</if>>

		<<if $NPCList[_n].lactation is 1 and $breastfeedingdisable is "f">>
			<span class="pink">Milk leaks from <<hisselect _n>> bud.</span>
			<<set $speechheadsuckleclosed to 1>>
		<<else>>
			<<set $speechheadnippleclosed to 1>>
		<</if>>
	<<else>>
		<<neutral 3>>
		<<He>> holds your head between <<hisselect _n>> $NPCList[_n].breastsdesc.
		<<if $NPCList[_n].breastsize gte 6>>
			<<set $speechheadbreasts to 1>>
		<<else>>
			<<set $speechheadchest to 1>>
		<</if>>
	<</if>>
	<<bodypart_admire_chance forehead>>
<</widget>>

<!-- pass "left", "right" or "both" as the first argument, and "<<his> left/right hand" or "both hands" for the second argument -->
<<widget "combat-hand-on-mask">>
	<<if $face is "covered">>
		<<He>> tries to pull your $worn.face.name off your face with $args[1], <span class="lblue">but you grip it tight.</span>
		<<if random(1, 3) is 3>>
			<span class="lblue"><<He>> releases it with a frustrated sigh.</span>
			<<combat-reset-hand $args[0]>>
		<</if>>
	<<else>>
		<<He>> pulls your $worn.face.name off your face with $args[1], <span class="pink">revealing your identity.</span>
		<<facestrip>><<clothesstripstat>><<combat-reset-hand $args[0]>>
	<</if>>
<</widget>>

<<widget "combat-hand-on-chastity">>
	<<if $worn.genitals.name is "naked">>
		<<cast_aside_clothes>>
		<<combat-reset-hand $args[0]>>
	<<else>>
		<span class="blue"><<He>> tries to loosen your $worn.genitals.name.</span> <<His>> rough handling leaves you feeling more frustrated and aroused. <<He>> gives up after a few moments of impotent tugging, looking disappointed.
		<<neutral 1>><<set $enemyanger += 5>><<arousal 5>><<combat-reset-hand $args[0]>><<set $speechchastity to 1>><<set $worn.genitals.integrity -= 10>>
		<<bodypart_admire_chance pubic>>
	<</if>>
<</widget>>

<<widget "combat-set-hand-start">>
	<<set $rng to random(1, 100)>>


	<<combat-get-other-hand $args[0]>>

	<<if $askedtochoke is 1 and $consensual is 1 and $asphyxiaLvl gte 1 and ($neckuse isnot "hand" or ($otherNPChand is "throat" and $rng lte 30))>>
		<<set $neckuse to "hand">>
		<<set $askedtochoke to 0>>
		<<combat-set-hand-target $args[0] "throat">>
		<<neutral 1>>
	<<elseif $combatgoal is "strip">>
		<<if $worn.over_upper.name isnot "naked" and $noupper isnot 1>>
			<span class="purple"><<He>> grasps your $worn.over_upper.name with <<his>> $args[0] hand.</span>
			<<neutral 1>>
			<<set $handtarget to "overupperclothes">>
		<<elseif $worn.upper.name isnot "naked" and $noupper isnot 1>>
			<span class="purple"><<He>> grasps your $worn.upper.name with <<his>> $args[0] hand.</span>
			<<neutral 1>>
			<<set $handtarget to "upperclothes">>
		<<elseif $worn.under_upper.name isnot "naked" and $noupper isnot 1>>
			<span class="purple"><<He>> grasps your $worn.under_upper.name with <<his>> $args[0] hand.</span>
			<<neutral 1>>
			<<set $handtarget to "underupperclothes">>
		<<elseif $worn.over_lower.name isnot "naked" and $walltype isnot "front">>
			<span class="purple"><<He>> grasps your $worn.over_lower.name with <<his>> $args[0] hand.</span>
			<<neutral 1>>
			<<set $handtarget to "overlowerclothes">>
		<<elseif $worn.lower.name isnot "naked" and $walltype isnot "front">>
			<span class="purple"><<He>> grasps your $worn.lower.name with <<his>> $args[0] hand.</span>
			<<neutral 1>>
			<<set $handtarget to "lowerclothes">>
		<<elseif $worn.under_lower.name isnot "naked" and $worn.under_lower.state isnot "totheside" and $walltype isnot "front">>
			<span class="purple"><<He>> grasps your $worn.under_lower.name with <<his>> $args[0] hand.</span>
			<<neutral 1>>
			<<set $handtarget to "underclothes">>
		<<elseif $worn.genitals.name isnot "naked" and $walltype isnot "front">>
			<span class="purple"><<He>> grasps your $worn.genitals.name with <<his>> $args[0] hand.</span>
			<<neutral 1>>
			<<set $handtarget to "genitals">>
		<<else>>
			<!-- You're naked, so the strip attack stops. Either detect this and stop the attack, or just let the attack continue normally. -->
			<<set $combatgoal to 0>>
			<<set $handtarget to 0>>
			<<set $NPCList[_n].mouth to 0>>
			<<set _stripped to true>>
		<</if>>
		<<combat-set-hand-target $args[0] $handtarget>>
	<<elseif $rng lte 7 and ($consensual isnot 1 or ["Whitney", "Kylar", "Sydney"].includes($npc[$npcrow.indexOf(_n)])) and $bodywritingdisable is "f" and $enemytype isnot "beast">>
		<<set _rng to random(1, 5)>>
		<<if _rng is 5 or $npc.includes("Sydney")>>
			<span class="purple"><<He>> pulls a <span class="pink">permanent</span> marker pen from <<his>> pocket, flicking off the lid.</span>
			<<set $tooltarget to "marker">>
		<<elseif _rng is 4 and $NPCList[_n].pronoun is "f">>
			<span class="purple"><<He>> pulls lipstick from <<his>> pocket, and pushes out the tip.</span>
			<<set $tooltarget to "lipstick">>
		<<elseif _rng is 3 and $outside is 1 and ($location is "forest" or $location is "moor" or $location is "farmlands" or $location is "farm")>>
			<span class="purple"><<He>> lifts a handful of mud from the ground.</span>
			<<set $tooltarget to "mud">>
		<<else>>
			<span class="purple"><<He>> pulls a pen from <<his>> pocket, flicking off the lid.</span>
			<<set $tooltarget to "pen">>
		<</if>>
		<<if $args[0] is "left">>
			<<set $NPCList[_n].lefttool to $tooltarget>>
			<<set $NPCList[_n].lefthand to "pen">>
		<<else>>
			<<set $NPCList[_n].righttool to $tooltarget>>
			<<set $NPCList[_n].righthand to "pen">>
		<</if>>
		<<neutral 1>>
	<<elseif $enemyanger + $rng lte 20>>
		<<if $walltype is "front">>
			<<He>> strokes your cheek.
			<<neutral 10>>
		<<else>>
			<<set $handtarget to 0>>
			<<if $worn.over_lower.name isnot "naked">>
				<span class="purple"><<He>> grasps your $worn.over_lower.name with <<his>> $args[0] hand.</span>
				<<set $handtarget to "overlowerclothes">><<neutral 1>>
			<<elseif $worn.lower.name isnot "naked">>
				<span class="purple"><<He>> grasps your $worn.lower.name with <<his>> $args[0] hand.</span>
				<<set $handtarget to "lowerclothes">><<neutral 1>>
			<<elseif $worn.genitals.type.includes("chastity")>>
				<<He>> <<strokes>> your inner thigh and brushes <<his>> fingers against your $worn.genitals.name.
				<<neutral 10>><<set $speechchastity to 1>>
			<<elseif $player.penisExist and $player.vaginaExist>>
				<<if $player.ballsExist and random(0,1) is 1>>
					<<He>> <<strokes>> your <<testicles>> and teases your glans.
					<<neutral 10>><<set $speechglans to 1>>	
				<<else>>
					<<He>> strokes the base of your <<penis>> where it meets your <<pussy>>.
					<<neutral 10>><<set $speechfutapenis to 1>>
				<</if>>
			<<elseif $player.penisExist and $player.ballsExist>>
				<<He>> <<strokes>> your <<testicles>> and teases your glans.
				<<neutral 10>><<set $speechglans to 1>>
			<<elseif $player.vaginaExist>>
				<<He>> <<strokes>> your pubic mound and teases your clit.
				<<neutral 10>><<set $speechclit to 1>>
			<</if>>
		<</if>>
	<<elseif $enemyanger + $rng lte 30>>
		<<set $handtarget to 0>>
		<<if $position is "wall" and $walltype isnot "front">>
			<<if $worn.over_lower.name isnot "naked">>
				<span class="purple"><<He>> grasps your $worn.over_lower.name with <<his>> $args[0] hand.</span>
				<<set $handtarget to "overlowerclothes">><<neutral 1>>
			<<elseif $worn.lower.name isnot "naked">>
				<span class="purple"><<He>> grasps your $worn.lower.name with <<his>> $args[0] hand.</span>
				<<set $handtarget to "lowerclothes">><<neutral 1>>
			<<elseif $worn.genitals.type.includes("chastity")>>
				<<He>> <<strokes>> your inner thigh and brushes <<his>> fingers against your $worn.genitals.name.
				<<neutral 10>><<set $speechchastity to 1>>
			<<elseif $player.penisExist and $player.vaginaExist>>
				<<He>> runs <<his>> hand up your thigh and over the area where your <<penis>> and <<pussy>> meet.
				<<neutral 10>><<set $speechfutapenis to 1>>
			<<elseif $player.penisExist>>
				<<He>> <<strokes>> your inner thigh and brushes <<his>> fingers against your <<glans>>.
				<<neutral 10>><<set $speechglans to 1>>
			<<elseif $player.vaginaExist>>
				<<He>> <<strokes>> your inner thigh and brushes <<his>> fingers against your clit.
				<<neutral 10>><<set $speechclit to 1>>
			<</if>>
			<<combat-set-hand-target $args[0] $handtarget>>
			<<if random(1, 2) is 2>>
				<<bodypart_admire_chance left_thigh>>
			<<else>>
				<<bodypart_admire_chance right_thigh>>
			<</if>>
		<<else>>
			<<if $worn.over_upper.name isnot "naked" and $noupper isnot 1>>
				<span class="purple"><<He>> grasps your $worn.over_upper.name with <<his>> $args[0] hand.</span>
				<<set $handtarget to "overupperclothes">><<neutral 1>>
			<<elseif $worn.upper.name isnot "naked" and $noupper isnot 1>>
				<span class="purple"><<He>> grasps your $worn.upper.name with <<his>> $args[0] hand.</span>
				<<set $handtarget to "upperclothes">><<neutral 1>>
			<<elseif $worn.under_upper.name isnot "naked" and $noupper isnot 1>>
				<span class="purple"><<He>> grasps your $worn.under_upper.name with <<his>> $args[0] hand.</span>
				<<set $handtarget to "underupperclothes">><<neutral 1>>
			<<else>>
				<<He>> <<strokes>> your chest, <<his>> fingers lingering around your <<nipple>>.
				<<neutral 4>><<playWithBreasts>>
			<</if>>
			<<combat-set-hand-target $args[0] $handtarget>>
			<<bodypart_admire_chance breasts>>
		<</if>>
	<<elseif $enemyanger + $rng lte 35>>
		<<if $walltype is "front">>
			<<He>> cups your chin with <<his>> $args[0] hand.
			<<neutral 2>>
		<<else>>
			<<set $handtarget to 0>>
			<<if (($worn.over_lower.skirt is 1 and $worn.lower.skirt is 1) or ($worn.over_lower.skirt is 1 and $worn.lower.type.includes("naked")) or ($worn.lower.skirt is 1 and $worn.over_lower.type.includes("naked")))>>
				<<if $worn.under_lower.name isnot "naked" and $worn.under_lower.state isnot "totheside">>
					<span class="purple"><<He>> grasps your $worn.under_lower.name with <<his>> $args[0] hand.</span>
					<<set $handtarget to "underclothes">><<neutral 1>>
				<<elseif $worn.genitals.name isnot "naked">>
					<span class="purple"><<He>> grasps your $worn.genitals.name with <<his>> $args[0] hand.</span>
					<<set $handtarget to "genitals">><<neutral 1>>
				<<elseif $worn.under_lower.anus_exposed is 1 and $worn.genitals.anus_exposed is 1>>
					<<if $worn.lower.anus_exposed is 1 and $worn.over_lower.anus_exposed is 1>>
						<<if $anususe is 0 and $analdisable is "f">>
							<span class="purple"><<He>> presses <<his>> left hand against your <<bottom>>.</span>
							<<set $handtarget to "anusentrance">><<set $anususe to 1>><<neutral 1>>
						<</if>>
					<</if>>
				<</if>>
			<<elseif $worn.lower.name isnot "waist">>
				<<if $worn.under_lower.name isnot "naked" and $worn.under_lower.state isnot "totheside">>
					<span class="purple"><<He>> grasps your $worn.under_lower.name with <<his>> $args[0] hand.</span>
					<<set $handtarget to "underclothes">><<neutral 1>>
				<<elseif $worn.genitals.name isnot "naked">>
					<span class="purple"><<He>> grasps your $worn.genitals.name with <<his>> $args[0] hand.</span>
					<<set $handtarget to "genitals">><<neutral 1>>
				<<elseif $worn.under_lower.anus_exposed is 1 and $worn.genitals.anus_exposed is 1>>
					<<if $worn.lower.anus_exposed is 1 and $worn.over_lower.anus_exposed is 1>>
						<<if $anususe is 0 and $analdisable is "f">>
							<span class="purple"><<He>> presses <<his>> left hand against your <<bottom>>.</span>
							<<set $handtarget to "anusentrance">><<set $anususe to 1>><<neutral 1>>
						<</if>>
					<</if>>
				<</if>>
			<</if>>
			<<combat-set-hand-target $args[0] $handtarget>>
			<<bodypart_admire_chance back>>
		<</if>>
	<<elseif $enemyanger + $rng lte 40>>
		<<if $walltype is "front">>
			<<He>> runs <<his>> fingers through your hair with <<his>> $args[0] hand.
			<<neutral 2>>
		<<else>>
			<<set $handtarget to 0>>
			<<if (($worn.over_lower.skirt is 1 and $worn.lower.skirt is 1) or ($worn.over_lower.skirt is 1 and $worn.lower.type.includes("naked")) or ($worn.lower.skirt is 1 and $worn.over_lower.type.includes("naked")))>>
				<<if $worn.under_lower.name isnot "naked" and $worn.under_lower.state isnot "totheside">>
					<span class="purple"><<He>> grasps your $worn.under_lower.name with <<his>> $args[0] hand.</span>
					<<set $handtarget to "underclothes">><<neutral 1>>
				<<elseif $worn.genitals.name isnot "naked">>
					<span class="purple"><<He>> grasps your $worn.genitals.name with <<his>> $args[0] hand.</span>
					<<set $handtarget to "genitals">><<neutral 1>>
				<<elseif $worn.under_lower.vagina_exposed is 1 and $worn.genitals.vagina_exposed is 1>>
					<<if $worn.lower.vagina_exposed is 1 and $worn.over_lower.vagina_exposed is 1>>
						<<if $player.vaginaExist and $vaginause is 0 and (!$player.penisExist or $penisuse isnot 0 or random(0,100) gte 50)>>
							<span class="purple"><<He>> presses <<his>> $args[0] hand against your <<pussy>>, resting a finger on your entrance.</span>
							<<set $handtarget to "vaginaentrance">><<set $vaginause to 1>><<neutral 1>>
						<<elseif $player.penisExist and $penisuse is 0>>
							<span class="purple"><<He>> presses <<his>> $args[0] hand against your <<penis>>.</span>
							<<set $handtarget to "penisentrance">><<set $penisuse to 1>><<neutral 1>>
						<</if>>
					<</if>>
				<</if>>
			<<elseif $worn.lower.name isnot "waist">>
				<<if $worn.under_lower.name isnot "naked" and $worn.under_lower.state isnot "totheside">>
					<span class="purple"><<He>> grasps your $worn.under_lower.name with <<his>> $args[0] hand.</span>
					<<set $handtarget to "underclothes">><<neutral 1>>
				<<elseif $worn.genitals.name isnot "naked">>
					<span class="purple"><<He>> grasps your $worn.genitals.name with <<his>> $args[0] hand.</span>
					<<set $handtarget to "genitals">><<neutral 1>>
				<<elseif $worn.under_lower.vagina_exposed is 1 and $worn.genitals.vagina_exposed is 1>>
					<<if $worn.lower.vagina_exposed is 1 and $worn.over_lower.vagina_exposed is 1>>
						<<if $player.vaginaExist and $vaginause is 0 and (!$player.penisExist or $penisuse isnot 0 or random(0,100) gte 50)>>
							<span class="purple"><<He>> presses <<his>> $args[0] hand against your <<pussy>>, resting a finger above your entrance.</span>
							<<set $handtarget to "vaginaentrance">><<set $vaginause to 1>><<neutral 1>>
						<<elseif $player.penisExist and $penisuse is 0>>
							<span class="purple"><<He>> presses <<his>> $args[0] hand against your <<penis>>.</span>
							<<set $handtarget to "penisentrance">><<set $penisuse to 1>><<neutral 1>>
						<</if>>
					<</if>>
				<</if>>
			<</if>>
			<<combat-set-hand-target $args[0] $handtarget>>
			<<bodypart_admire_chance pubic>>
		<</if>>
	<<elseif $enemyanger + $rng lte 45>>
		<<if $position is "wall" and $walltype isnot "front">>
			<<He>> leans against the wall.
		<<else>>
			<<He>> caresses your tummy.
			<<neutral 1>>
		<</if>>
	<<bodypart_admire_chance back>>
	<<elseif $enemyanger + $rng lte 50>>
		<<if $position is "wall" and $walltype isnot "front">>
			<<He>> grips your thigh and pulls, but you're stuck firm.
			<<neutral 1>>
			<<if random(1, 2) is 2>>
				<<bodypart_admire_chance left_thigh>>
			<<else>>
				<<bodypart_admire_chance right_thigh>>
			<</if>>
		<<else>>
			<<He>> <<strokes>> your hair.
			<<neutral 1>>
			<<bodypart_admire_chance forehead>>
		<</if>>
	<<elseif $enemyanger + $rng lte 55>>
		<<if $position is "wall" and $walltype isnot "front">>
			<<He>> grips your thigh and pulls, but you're stuck firm.
			<<neutral 1>>
			<<if random(1, 2) is 2>>
				<<bodypart_admire_chance left_thigh>>
			<<else>>
				<<bodypart_admire_chance right_thigh>>
			<</if>>
		<<elseif $worn.face.type.includes("mask")>>
			<span class="purple"><<He>> grasps your $worn.face.name with <<his>> $args[0] hand.</span>
			<<neutral 1>><<combat-set-hand-target $args[0] "mask">>
		<<else>>
			<<He>> <<strokes>> your hair.
			<<neutral 1>>
			<<bodypart_admire_chance forehead>>
		<</if>>
	<<elseif $enemyanger + $rng lte 60>>
		<<if $position is "wall" and $walltype isnot "front">>
			<<He>> tugs on your leg with <<his>> $args[0] hand, but you're stuck firm.
			<<neutral 1>>
			<<bodypart_admire_chance back>>
		<<elseif !$worn.upper.type.includes("naked") and $worn.upper.state isnot "chest" and $worn.upper.state_top is "chest">>
			<<He>> gropes your <<breasts>> through your $worn.upper.name.
			<<if $body_temperature is "chilly" or $body_temperature is "cold">>
				Your buds stand erect and vulnerable in the cold.
			<</if>>
			<<neutral 2>><<playWithBreasts>>
			<<bodypart_admire_chance breasts>>
		<<elseif !$worn.under_upper.type.includes("naked") and $worn.under_upper.state isnot "chest" and $worn.under_upper.state_top is "chest">>
			<<He>> gropes your <<breasts>> through your $worn.under_upper.name.
			<<if $body_temperature is "chilly" or $body_temperature is "cold">>
				Your buds stand erect and vulnerable in the cold.
			<</if>>
			<<neutral 2>><<playWithBreasts>>
			<<bodypart_admire_chance breasts>>
		<<else>>
			<<He>> gropes your exposed <<breasts>> with <<his>> $args[0] hand.
			<<if $body_temperature is "chilly" or $body_temperature is "cold">>
				Your buds stand erect and vulnerable in the cold.
			<</if>>
			<<neutral 4>><<playWithBreasts>>
			<<bodypart_admire_chance breasts>>
		<</if>>
	<<elseif $enemyanger + $rng lte 70 and $pronoun is "f" and $position isnot "wall" and ($head is 0 or $NPCList[_n].chest is "head") and ($mouthuse is 0 or $mouthuse is "breasts") and $NPCList[_n].chest is 0 and $NPCList[_n].location.genitals isnot "head">>
		<<He>> cradles the back of your head in <<his>> $args[0] hand, and <span class="pink">pushes your face against <<his>> $NPCList[_n].breastsdesc.</span>
		<<if $NPCList[_n].lactation is 1 and $breastfeedingdisable is "f">>
			<span class="purple">It carries a scent of milk.</span>
		<</if>>
		<<combat-set-hand-target $args[0] "head_breasts">><<set $mouthuse to "breasts">><<set $mouthstate to "breasts">><<set $head to "breasts">>
		<<set $NPCList[_n].chest to "mouthentrance">><<set $speechheadbreasts to 1>><<neutral 3>><<set $mouthactiondefault to "breastclosed">>
		<<set $NPCList[_n].location.head to "head">>
		<<bodypart_admire_chance forehead>>
	<<elseif $enemyanger + $rng lte 80>>
		<<if $walltype is "front">>
			<<He>> pushes your shoulder with <<his>> $args[0] hand, testing how stuck you are.
			<<neutral 2>>
		<<else>>
			<<set $speechbottom to 1>>
			<<if $worn.over_lower.state is "waist" and $worn.over_lower.skirt is 0>>
				<<if $worn.lower.state is "waist" and $worn.lower.skirt is 0>>
					<<He>> tries to grope your <<bottom>> through your $worn.over_lower.name, but you're wearing too much to really feel it.
					<<neutral 1>>
				<<else>>
					<<He>> gropes your <<bottom>> through your $worn.over_lower.name.
					<<neutral 5>>
				<</if>>
			<<elseif $worn.lower.state is "waist" and $worn.lower.skirt is 0>>
				<<He>> gropes your <<bottom>> through your $worn.lower.name.
				<<neutral 2>>
			<<elseif $worn.under_lower.state is "waist">>
				<<He>> gropes your <<bottom>> through your $worn.under_lower.name.
				<<neutral 2>>
			<<else>>
				<<He>> fondles and <<strokes>> your exposed <<bottom>>.
				<<neutral 4>>
			<</if>>
			<<if random(1, 2) is 2>>
				<<bodypart_admire_chance left_bottom>>
			<<else>>
				<<bodypart_admire_chance right_bottom>>
			<</if>>
		<</if>>
	<<elseif $enemyanger + $rng lte 90 and $enemytype isnot "beast">>
		<<combat-set-hand-target $args[0] "lube">>
		<<if $NPCList[_n].penis is "vaginaentrance" and $player.bodyliquid.vaginaoutside.goo lt 5 and !$worn.genitals.type.includes("chastity")>>
			<span class="purple"><<He>> holds a bottle of lubricant near your <<pussy>>.</span>
		<<elseif $NPCList[_n].penis is "anusentrance" and $player.bodyliquid.bottom.goo lt 5 and $worn.genitals.anal_shield isnot 1>>
			<span class="purple"><<He>> holds a bottle of lubricant near your <<bottom>>.</span>
		<<elseif $NPCList[_n].penis is "otheranusentrance" and $player.bodyliquid.penis.goo lt 5 and !$worn.genitals.type.includes("chastity")>>
			<span class="purple"><<He>> holds a bottle of lubricant near your <<penis>>.</span>
		<<elseif $NPCList[_n].vagina is "penisentrance" and $player.bodyliquid.penis.goo lt 5 and !$worn.genitals.type.includes("chastity")>>
			<span class="purple"><<He>> holds a bottle of lubricant near your <<penis>>.</span>
		<<elseif $NPCList[_n].vagina is "otheranusentrance" and $player.bodyliquid.penis.goo lt 5 and !$worn.genitals.type.includes("chastity")>>
			<span class="purple"><<He>> holds a bottle of lubricant near your <<penis>>.</span>
		<<else>>
			<<He>> smacks your hip.
			<<neutral 5>>
			<<combat-reset-hand $args[0]>>
		<</if>>
	<<elseif $enemyanger + $rng lte 95>>
		<<if $worn.feet.cursed isnot 1 or $worn.feet.name is "naked">>
			<<if $worn.legs.name is "naked">>
				<<He>> rubs your foot.
				<<neutral 1>>
			<<else>>
				<span class="purple"><<He>> grasps your $worn.legs.name.</span>
				<<combat-set-hand-target $args[0] "socks">>
				<<neutral 3>>
			<</if>>
		<<else>>
			<span class="purple"><<He>> grasps your $worn.feet.name.</span>
			<<combat-set-hand-target $args[0] "shoes">>
			<<neutral 3>>
		<</if>>
	<<elseif $enemyanger + $rng lte 100 and $walltype isnot "front">>
		<<if $worn.genitals.type.includes("chastity")>>
			<<if $worn.over_lower.state is "waist" and $worn.over_lower.skirt is 0>>
				<<if $worn.lower.state is "waist" and $worn.lower.skirt is 0>>
					<<He>> tries to fondle you around your $worn.genitals.name through your $worn.over_lower.name, but you're wearing too much to really feel it.
					<<neutral 1>>
				<<else>>
					<<He>> fondles and <<strokes>> you around your $worn.genitals.name through your $worn.over_lower.name.
					<<neutral 5>>
				<</if>>
			<<elseif $worn.lower.state is "waist" and $worn.lower.skirt is 0>>
				<<He>> fondles and <<strokes>> around your $worn.genitals.name through your $worn.lower.name.
				<<neutral 5>>
			<<elseif $worn.under_lower.state is "waist">>
				<<He>> fondles and <<strokes>> around your $worn.genitals.name through your $worn.under_lower.name.
				<<neutral 5>>
			<<elseif $penisuse is 0>>
				<<He>> fondles and <<strokes>> around your $worn.genitals.name.
				<<neutral 10>>
			<<else>>
				<<He>> <<strokes>> your thighs.
				<<neutral 10>>
			<</if>>
			<<if random(1, 2) is 2>>
				<<bodypart_admire_chance left_thigh>>
			<<else>>
				<<bodypart_admire_chance right_thigh>>
			<</if>>
		<<elseif $player.penisExist and (!$player.vaginaExist or random(0,100) gte 50)>>
			<<if $worn.over_lower.state is "waist" and $worn.over_lower.skirt is 0>>
				<<if $worn.lower.state is "waist" and $worn.lower.skirt is 0>>
					<<He>> tries to grope your <<penis>> through your $worn.over_lower.name, but you're wearing too much to really feel it.
					<<neutral 1>>
				<<else>>
					<<He>> gropes and <<strokes>> your <<penis>> through your $worn.over_lower.name.
					<<neutral 5>>
				<</if>>
			<<elseif $worn.lower.state is "waist" and $worn.lower.skirt is 0>>
				<<He>> gropes and <<strokes>> your <<penis>> through your $worn.lower.name.
				<<neutral 5>>
			<<elseif $worn.under_lower.state is "waist">>
				<<He>> gropes and <<strokes>> your <<penis>> through your $worn.under_lower.name.
				<<neutral 5>>
			<<elseif $penisuse is 0>>
				<<He>> gropes and <<strokes>> your exposed <<penis>>.
				<<neutral 10>>
			<<elseif $player.ballsExist is true>>
				<<He>> cups and <<strokes>> your <<testicles>>.
				<<neutral 10>>
			<<else>>
				<<He>> runs a finger down your shaft, stopping and pressing against the point where your <<penis>> and <<pussy>> meet.
				<<neutral 10>>
			<</if>>
			<<bodypart_admire_chance pubic>>
		<<elseif $player.vaginaExist>>
			<<if $worn.over_lower.state is "waist" and $worn.over_lower.skirt is 0>>
				<<if $worn.lower.state is "waist" and $worn.lower.skirt is 0>>
					<<He>> tries to grope your labia through your $worn.over_lower.name, but you're wearing too much to really feel it.
					<<neutral 1>>
				<<else>>
					<<He>> gropes and <<strokes>> your labia through your $worn.over_lower.name.
					<<neutral 5>>
				<</if>>
			<<elseif $worn.lower.state is "waist" and $worn.lower.skirt is 0>>
				<<He>> gropes and <<strokes>> your labia through your $worn.lower.name.
				<<neutral 5>>
			<<elseif $worn.under_lower.state is "waist">>
				<<He>> gropes and <<strokes>> your labia through your $worn.under_lower.name.
				<<neutral 5>>
			<<else>>
				<<He>> gropes and <<strokes>> your exposed <<pussy>>.
				<<neutral 10>>
			<</if>>
			<<bodypart_admire_chance pubic>>
		<</if>>
	<<elseif $enemyanger + $rng lte 110 and $walltype isnot "front">>
		<<if $worn.over_lower.name isnot "naked">>
			<span class="purple"><<He>> grasps your $worn.over_lower.name with <<his>> $args[0] hand.</span>
			<<combat-set-hand-target $args[0] "overlowerclothes">><<neutral 1>>
		<<elseif $worn.lower.name isnot "naked">>
			<span class="purple"><<He>> grasps your $worn.lower.name with <<his>> $args[0] hand.</span>
			<<combat-set-hand-target $args[0] "lowerclothes">><<neutral 1>>
		<<elseif $player.penisExist>>
			/*$penis use need to be checked inside of $player.penisExist check to prevent mention of the clitoris*/
			<<if $penisuse is 0>>
				<<He>> pinches your glans.
				<<neutral 15>><<bruise penis>><<set $speechglans to 1>>
			<<else>>
				<<He>> pinches your shaft.
				<<neutral 10>><<bruise penis>>
			<</if>>
		<<elseif $player.vaginaExist>>
			<<He>> pinches your clitoris.
			<<neutral 15>><<bruise vagina>><<set $speechclit to 1>>
		<</if>>
		<<bodypart_admire_chance pubic>>
	<<elseif $enemyanger + $rng lte 120>>
		<<if $position is "wall" and $walltype isnot "front">>
			<<He>> squeezes your thigh.
			<<violence 1>><<hitstat>><<bruise thigh>>
			<<if random(1, 2) is 2>>
				<<bodypart_admire_chance left_thigh>>
			<<else>>
				<<bodypart_admire_chance right_thigh>>
			<</if>>
		<<else>>

			<<combat-get-other-hand $args[0]>>

			<<if $worn.over_upper.name isnot "naked" and $noupper isnot 1>>
				<span class="purple"><<He>> grasps your $worn.over_upper.name with <<his>> $args[0] hand.</span>
				<<combat-set-hand-target $args[0] "overupperclothes">><<neutral 1>>
			<<elseif $worn.upper.name isnot "naked" and $noupper isnot 1>>
				<span class="purple"><<He>> grasps your $worn.upper.name with <<his>> $args[0] hand.</span>
				<<combat-set-hand-target $args[0] "upperclothes">><<neutral 1>>
			<<elseif $asphyxiaLvl gte 1 and $nochoke isnot 1 and ($neckuse isnot "hand" or $otherNPChand is "throat")>>
				<span class="purple"><<He>> grabs your throat.</span>
				<<violence 2>><<combat-set-hand-target $args[0] "throat">><<set $neckuse to "hand">>
			<<else>>
				<<He>> tugs your hair.
				<<violence 1>>
			<</if>>
			<<if random(1, 2) is 2>>
				<<bodypart_admire_chance left_shoulder>>
			<<else>>
				<<bodypart_admire_chance right_shoulder>>
			<</if>>
		<</if>>
	<<elseif $enemyanger + $rng lte 125 and $walltype isnot "front">>
		<<if (($worn.over_lower.skirt is 1 and $worn.lower.skirt is 1) or ($worn.over_lower.skirt is 1 and $worn.lower.type.includes("naked")) or ($worn.lower.skirt is 1 and $worn.over_lower.type.includes("naked")))>>
			<<if $worn.under_lower.name isnot "naked" and $worn.under_lower.state isnot "totheside">>
				<span class="purple"><<He>> grasps your $worn.under_lower.name with <<his>> $args[0] hand.</span>
				<<combat-set-hand-target $args[0] "underclothes">><<neutral 1>>
			<<elseif $worn.genitals.name isnot "naked">>
				<span class="purple"><<He>> grasps your $worn.genitals.name with <<his>> $args[0] hand.</span>
				<<combat-set-hand-target $args[0] "genitals">><<neutral 1>>
			<<elseif $worn.under_lower.anus_exposed is 1 and $worn.genitals.anus_exposed is 1>>
				<<if $worn.lower.anus_exposed is 1 and $worn.over_lower.anus_exposed is 1>>
					<<if $anususe is 0 and $analdisable is "f">>
						<span class="purple"><<He>> presses <<his>> $args[0] hand against your <<bottom>>.</span>
						<<combat-set-hand-target $args[0] "anusentrance">><<set $anususe to 1>><<neutral 1>>
					<</if>>
				<</if>>
			<</if>>
			<<bodypart_admire_chance back>>
		<!-- note: the sections above and below are identical other than the bodypart_admire_chance back -->
		<<elseif $worn.lower.name isnot "waist">>
			<<if $worn.under_lower.name isnot "naked" and $worn.under_lower.state isnot "totheside">>
				<span class="purple"><<He>> grasps your $worn.under_lower.name with <<his>> $args[0] hand.</span>
				<<combat-set-hand-target $args[0] "underclothes">><<neutral 1>>
			<<elseif $worn.genitals.name isnot "naked">>
				<span class="purple"><<He>> grasps your $worn.genitals.name with <<his>> $args[0] hand.</span>
				<<combat-set-hand-target $args[0] "genitals">><<neutral 1>>
			<<elseif $worn.under_lower.anus_exposed is 1 and $worn.genitals.anus_exposed is 1>>
				<<if $worn.lower.anus_exposed is 1 and $worn.over_lower.anus_exposed is 1>>
					<<if $anususe is 0 and $analdisable is "f">>
						<span class="purple"><<He>> presses <<his>> $args[0] hand against your <<bottom>>.</span>
						<<combat-set-hand-target $args[0] "anusentrance">><<set $anususe to 1>><<neutral 1>>
					<</if>>
				<</if>>
			<</if>>
		<</if>>
		<<if random(1, 2) is 2>>
			<<bodypart_admire_chance left_bottom>>
		<<else>>
			<<bodypart_admire_chance right_bottom>>
		<</if>>
	<<elseif $enemyanger + $rng lte 130 and $walltype isnot "front">>
		<<if (($worn.over_lower.skirt is 1 and $worn.lower.skirt is 1) or ($worn.over_lower.skirt is 1 and $worn.lower.type.includes("naked")) or ($worn.lower.skirt is 1 and $worn.over_lower.type.includes("naked")))>>
			<<if $worn.under_lower.name isnot "naked" and $worn.under_lower.state isnot "totheside">>
				<span class="purple"><<He>> grasps your $worn.under_lower.name with <<his>> $args[0] hand.</span>
				<<combat-set-hand-target $args[0] "underclothes">><<neutral 1>>
			<<elseif $worn.genitals.name isnot "naked">>
				<span class="purple"><<He>> grasps your $worn.genitals.name with <<his>> $args[0] hand.</span>
				<<combat-set-hand-target $args[0] "genitals">><<neutral 1>>
			<<elseif $worn.under_lower.vagina_exposed is 1 and $worn.genitals.vagina_exposed is 1>>
				<<if $worn.lower.vagina_exposed is 1 and $worn.over_lower.vagina_exposed is 1>>
					<<if $player.vaginaExist and $vaginause is 0 and (!$player.penisExist or $penisuse isnot 0 or random(0,100) gte 50)>>
						<span class="purple"><<He>> presses <<his>> $args[0] hand against your <<pussy>>, <<his>> finger resting on your entrance.</span>
						<<combat-set-hand-target $args[0] "vaginaentrance">><<set $vaginause to 1>><<neutral 1>>
					<<elseif $player.penisExist and $penisuse is 0>>
						<span class="purple"><<He>> presses <<his>> $args[0] hand against your <<penis>>.</span>
						<<combat-set-hand-target $args[0] "penisentrance">><<set $penisuse to 1>><<neutral 1>>
					<</if>>
				<</if>>
			<</if>>
			<<bodypart_admire_chance pubic>>
		<<elseif $worn.lower.name isnot "waist">>
			<<if $worn.under_lower.name isnot "naked" and $worn.under_lower.state isnot "totheside">>
				<span class="purple"><<He>> grasps your $worn.under_lower.name with <<his>> $args[0] hand.</span>
				<<combat-set-hand-target $args[0] "underclothes">><<neutral 1>>
			<<elseif $worn.genitals.name isnot "naked">>
				<span class="purple"><<He>> grasps your $worn.genitals.name with <<his>> $args[0] hand.</span>
				<<combat-set-hand-target $args[0] "genitals">><<neutral 1>>
			<<elseif $worn.under_lower.vagina_exposed is 1 and $worn.genitals.vagina_exposed is 1>>
				<<if $worn.lower.vagina_exposed is 1 and $worn.over_lower.vagina_exposed is 1>>
					<<if $player.vaginaExist and $vaginause is 0 and (!$player.penisExist or $penisuse isnot 0 or random(0,100) gte 50)>>
						<span class="purple"><<He>> presses <<his>> $args[0] hand against your <<pussy>>, <<his>> finger resting on your entrance.</span>
						<<combat-set-hand-target $args[0] "vaginaentrance">><<set $vaginause to 1>><<neutral 1>>
					<<elseif $player.penisExist and $penisuse is 0>>
						<span class="purple"><<He>> presses <<his>> $args[0] hand against your <<penis>>.</span>
						<<combat-set-hand-target $args[0] "penisentrance">><<set $penisuse to 1>><<neutral 1>>
					<</if>>
				<</if>>
			<</if>>
		<</if>>
		<<bodypart_admire_chance pubic>>
	<<elseif $enemyanger + $rng lte 140>>
		<<if $position is "wall" and $walltype isnot "front">>
			<<He>> slaps your <<bottom>>.
			<<violence 1>><<bruise bottom>><<hitstat>>
			<<if random(1, 2) is 2>>
				<<bodypart_admire_chance left_bottom>>
			<<else>>
				<<bodypart_admire_chance right_bottom>>
			<</if>>
		<<else>>
			<span class="purple"><<He>> seizes your hair with <<his>> $args[0] hand.</span>
			<<combat-set-hand-target $args[0] "hair">><<violence 2>><<set $speechhair to 1>>
			<<bodypart_admire_chance forehead>>
		<</if>>
	<<elseif $enemyanger + $rng lte 160>>
		<<if $asphyxiaLvl gte 4 and $nochoke isnot 1 and ($neckuse isnot "hand" or $otherNPChand is "throat") and random(1,2) is 1>>
			<span class="purple"><<He>> grabs your throat.</span>
			<<violence 2>><<combat-set-hand-target $args[0] "throat">><<set $neckuse to "hand">>
		<<elseif $leftarm isnot "bound" and $rightarm isnot "bound" and $NPCList[_n].lefthand isnot "arms" and $NPCList[_n].righthand isnot "arms">>
			<span class="purple"><<He>> pins down your arms.</span>
			<<combat-set-hand-target $args[0] "arms">><<set $leftarm to "grappled">><<set $rightarm to "grappled">><<disablearms>><<violence 2>><<bruise leftarm>><<bruise rightarm>><<set $speecharms to 1>>
			<<if $vaginause is "cover">>
				<<set $vaginause to 0>>
			<</if>>
			<<if $anususe is "cover">>
				<<set $anususe to 0>>
			<</if>>
			<<if $penisuse is "cover">>
				<<set $penisuse to 0>>
			<</if>>
			<<if random(1, 2) is 2>>
				<<bodypart_admire_chance left_shoulder>>
			<<else>>
				<<bodypart_admire_chance right_shoulder>>
			<</if>>
		<<else>>
			<<if $walltype is "front">>
				<<He>> slaps your face.
				<<violence 10>><<bruise face>><<hitstat>><<set $speechbeat to 1>>
				<<if random(1, 2) is 2>>
					<<bodypart_admire_chance left_cheek>>
				<<else>>
					<<bodypart_admire_chance right_cheek>>
				<</if>>
			<<else>>
				<<He>> slaps your <<bottom>>.
				<<violence 10>><<bruise bottom>><<hitstat>><<set $speechspank to 1>>
				<<if random(1, 2) is 2>>
					<<bodypart_admire_chance left_bottom>>
				<<else>>
					<<bodypart_admire_chance right_bottom>>
				<</if>>
			<</if>>
		<</if>>
	<<elseif $enemyanger + $rng lte 175>>
		<<if $walltype is "front">>
			<<He>> digs <<his>> nails into your <<breasts>> while groping, giving no heed to your comfort.
			<<violence 10>><<bruise chest>><<hitstat>><<set $speechbeat to 1>>
			<<bodypart_admire_chance back>>
		<<else>>
			<<He>> digs <<his>> nails into your <<bottom>> while groping, giving no heed to your comfort.
			<<violence 10>><<bruise bottom>><<hitstat>><<set $speechspank to 1>>
			<<bodypart_admire_chance back>>
		<</if>>
	<<elseif $enemyanger + $rng lte 180>>
		<<if $walltype is "front">>
			<<He>> smacks your <<breasts>>.
			<<violence 10>><<bruise chest>><<hitstat>><<set $speechbeat to 1>>
			<<bodypart_admire_chance back>>
		<<else>>
			<<He>> smacks your thighs.
			<<violence 10>><<bruise thigh>><<hitstat>><<set $speechbeat to 1>>
			<<if random(1, 2) is 2>>
				<<bodypart_admire_chance left_thigh>>
			<<else>>
				<<bodypart_admire_chance right_thigh>>
			<</if>>
		<</if>>
	<<elseif $enemyanger + $rng lte 185>>
		<<if $position is "wall" and $walltype isnot "front">>
			<<He>> beats your thigh.
			<<bruise thigh>><<hitstat>><<violence 10>><<set $speechbeat to 1>>
			<<if random(1, 2) is 2>>
				<<bodypart_admire_chance left_thigh>>
			<<else>>
				<<bodypart_admire_chance right_thigh>>
			<</if>>
		<<else>>
			<<He>> punches your tummy.
			<<violence 20>><<bruise tummy>><<hitstat>><<set $speechbeat to 1>>
			<<bodypart_admire_chance back>>
		<</if>>
	<<elseif $enemyanger + $rng lte 190>>
		<<if $position is "wall" and $walltype isnot "front">>
			<<He>> spanks your <<bottom>>.
			<<violence 20>><<bruise bottom>><<hitstat>><<set $speechbeat to 1>>
			<<if random(1, 2) is 2>>
				<<bodypart_admire_chance left_bottom>>
			<<else>>
				<<bodypart_admire_chance right_bottom>>
			<</if>>
		<<else>>
			<<He>> slaps your <<breasts>>.
			<<violence 20>><<bruise chest>><<hitstat>><<set $speechbeat to 1>><<playWithBreasts>>
			<<bodypart_admire_chance breasts>>
		<</if>>
	<<elseif $enemyanger + $rng lte 195>>
		<<if $walltype is "front">>
			<<He>> spits on your face.
			<<neutral 5>>
		<<else>>
			<<if $worn.feet.cursed is 1>>
				<<He>> tests the restraints binding your legs.
				<<neutral 5>>
			<<elseif $worn.feet.name isnot "naked">>
				<span class="purple"><<He>> grasps your $worn.feet.name.</span>
				<<combat-set-hand-target $args[0] "shoes">>
				<<neutral 3>>
			<<else>>
				<span class="pink"><<He>> produces a pair of menacing metal shackles.</span>
				<<combat-set-hand-target $args[0] "shackle_entrance">>
				<<neutral 4>>
			<</if>>
		<</if>>
	<<elseif $enemyanger + $rng gte 196>>
		<<if $args[0] is "left">>
			<<if $position is "wall" and $walltype isnot "front">>
				<<if $player.penisExist>>
					<<He>> scratches your helpless <<bottom>>.
					<<violence 20>><<bruise bottom>><<hitstat>><<set $speechbeat to 1>>
				<<elseif $player.vaginaExist>>
					<<He>> scratches your helpless <<bottom>>.
					<<violence 20>><<bruise bottom>><<hitstat>><<set $speechbeat to 1>>
				<</if>>
				<<if random(1, 2) is 2>>
					<<bodypart_admire_chance left_bottom>>
				<<else>>
					<<bodypart_admire_chance right_bottom>>
				<</if>>
			<<else>>
				<<set $rng to random(1, 100)>>
				<<if $rng gte 81>>
					<<He>> punches your nose.
					<<violence 20>><<bruise face>><<hitstat>><<set $speechbeat to 1>>
					<<bodypart_admire_chance forehead>>
				<<elseif $rng gte 61>>
					<<He>> punches the back of your neck.
					<<violence 20>><<bruise neck>><<hitstat>><<set $speechbeat to 1>>
					<<bodypart_admire_chance back>>
				<<elseif $rng gte 41>>
					<<He>> punches your cheek.
					<<violence 20>><<bruise face>><<hitstat>><<set $speechbeat to 1>>
					<<if random(1, 2) is 2>>
						<<bodypart_admire_chance left_cheek>>
					<<else>>
						<<bodypart_admire_chance right_cheek>>
					<</if>>
				<<elseif $rng gte 21>>
					<<He>> punches your jaw.
					<<violence 20>><<bruise face>><<hitstat>><<set $speechbeat to 1>>
					<<bodypart_admire_chance breasts>>
				<<else>>
					<<He>> jabs the front of your neck.
					<<violence 20>><<bruise neck>><<hitstat>><<set $speechbeat to 1>>
					<<if random(1, 2) is 2>>
						<<bodypart_admire_chance left_shoulder>>
					<<else>>
						<<bodypart_admire_chance right_shoulder>>
					<</if>>
				<</if>>
			<</if>>
		<<else>>
			<<if $position is "wall" and $walltype isnot "front">>
				<<if $player.penisExist and (!$player.vaginaExist or random(0,100) gte 50)>>
					<<He>> jabs your gooch.
					<<violence 20>><<bruise penis>><<hitstat>><<set $speechbeat to 1>>
				<<elseif $player.vaginaExist>>
					<<He>> jabs your gooch.
					<<violence 20>><<bruise vagina>><<hitstat>><<set $speechbeat to 1>>
				<</if>>
				<<bodypart_admire_chance pubic>>
			<<else>>
				<<set $rng to random(1, 100)>>
				<<if $rng gte 81>>
					<<He>> scratches the side of your face.
					<<violence 20>><<bruise face>><<hitstat>><<set $speechbeat to 1>>
					<<if random(1, 2) is 2>>
						<<bodypart_admire_chance left_cheek>>
					<<else>>
						<<bodypart_admire_chance right_cheek>>
					<</if>>
				<<elseif $rng gte 61>>
					<<He>> scratches the back of your neck.
					<<violence 20>><<bruise neck>><<hitstat>><<set $speechbeat to 1>>
					<<bodypart_admire_chance back>>
				<<elseif $rng gte 41>>
					<<He>> scratches your cheek.
					<<violence 20>><<bruise face>><<hitstat>><<set $speechbeat to 1>>
					<<if random(1, 2) is 2>>
						<<bodypart_admire_chance left_cheek>>
					<<else>>
						<<bodypart_admire_chance right_cheek>>
					<</if>>
				<<elseif $rng gte 21>>
					<<He>> scratches your jaw.
					<<violence 20>><<bruise face>><<hitstat>><<set $speechbeat to 1>>
					<<if random(1, 2) is 2>>
						<<bodypart_admire_chance left_shoulder>>
					<<else>>
						<<bodypart_admire_chance right_shoulder>>
					<</if>>
				<<else>>
					<<He>> scratches the front of your neck.
					<<violence 20>><<bruise neck>><<hitstat>><<set $speechbeat to 1>>
					<<bodypart_admire_chance back>>
				<</if>>
			<</if>>
		<</if>>
	<</if>>
<</widget>>



<<widget "man-combat">>
<<outfitChecks>>
<<set _n to $args[0]-1>>
<!-- Converted his1-6 to hisselect #. Person1-6 to personselect #. $intro1-6 as array $NPCList[_n].intro -->
<!-- Converted man1-6speech to manspeech #. Randomized penissize reaction.-->
<<set _ppbigreaction to ["Your body feels weak at the sight.","You shudder at the sight.","You moan involuntarily at its size.","You gasp at its massive girth.","Your thighs feel weak as you look on."]>>
<<set _ppsmallreaction to ["You stifle a laugh at the sight.","You smirk at the sight.","You stifle a chuckle at the sight.","You stifle a giggle at the sight.","You try not to laugh."]>>
<<set _pprng to random(0, 4)>>
<<if ["m", "f", "i", "n", "t"].includes($NPCList[_n].pronoun)>>
	<<set $pronoun to $NPCList[_n].pronoun>>
<<elseif $debugdisable is "f">>
	<span class="red">ERROR: Unexpected $$NPCList[_n].pronoun: [$NPCList[_n].pronoun]</span>
<</if>>
<<switch _n>>
<<case 0>>
	<<manspeech _n>>
	<<if $enemyno gte 2>>
		<<set $NPCList[0].intro to 1>>
	<</if>>
<<case 1 2 3 4 5>>
	<<manspeech _n>><<set $NPCList[_n].intro to 1>>
<</switch>>

<<if $NPCList[_n].state is "stalk">>
	<<man-stalk>>
<<elseif $NPCList[_n].state is "pursuit">>
	<<man-pursuit>>
<<else>>
	<!-- HAND SECTION -->

	<<hand_section>>

	<!-- PENIS START -->

	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].penis is "clothed" and $npcSub isnot 1>>
		<<if $pronoun is "m">>
			<<if $enemyarousal gte 40>>
				<<He>> unzips <<his>> fly, <span class="blue">revealing <<his>> $NPCList[_n].penisdesc, <<if $NPCList[_n].chastity.penis.includes("chastity")>>inside of a $NPCList[_n].chastity.penis<<else>>fully erect<</if>>.</span>
				<<switch $NPCList[_n].penissize>>
				<<case 4>>
					<span class="red"> _ppbigreaction[_pprng]</span>
				<<case 1>>
					<span class="green"> _ppsmallreaction[_pprng]</span>
				<<default>>
				<</switch>>
				<<set $NPCList[_n].penis to 0>>
			<</if>>
		<<else>>
			<<if $enemyarousal gte 40>>
				<<He>> pulls up <<his>> skirt, <span class="blue">revealing <<his>> $NPCList[_n].penisdesc, <<if $NPCList[_n].chastity.penis.includes("chastity")>>inside of a $NPCList[_n].chastity.penis<<else>>fully erect<</if>>.</span>
				<<switch $NPCList[_n].penissize>>
				<<case 4>>
					<span class="red"> You gasp at its massive girth.</span>
				<<case 1>>
					<span class="green"> You stifle a giggle.</span>
				<<default>>
				<</switch>>
				<<set $NPCList[_n].penis to 0>>
			<</if>>
		<</if>>
		<<if $NPCList[_n].fullDescription is "Sydney">>
			<<sydneyExpose>>
		<</if>>	
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].penis is "thighs">>
		<<set $speechthigh to 1>>
		<<if $player.vaginaExist>>
			<<if $rng gte 101>>
				<<if $condomUse is false>>
				<<elseif ($condomUse is true or (random(0,100) lt $condomautochance and $npcCondoms isnot undefined)) and $NPCList[_n].condom is false>>
					<<equipCondom _n>>
					<span class="green"><<He>> puts a condom on <<his>> penis.</span>
				<</if>>
				<span class="blue"><<He>> angles <<his>> $NPCList[_n].penisdesc towards your <<pussy>>.</span>
				<<set $thighuse to 0>><<set $NPCList[_n].penis to "vaginaentrance">><<set $vaginause to "penis">><<set $vaginastate to "entrance">><<set $speechvaginaentrance to 1>>
			<<else>>
				<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc between your thighs and <<pussy>>.
				<<sex 5>>
			<</if>>
		<<else>>
			<<if $rng gte 101>>
				<<He>> moves <<his>> penis out from between your thighs.
				<<set $thighuse to 0>><<set $NPCList[_n].penis to 0>>
			<<else>>
				<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc between your thighs.
				<<sex 5>>
			<</if>>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].penis is "cheeks">>
		<<set $speechcheeks to 1>>
		<<if $rng gte 101>>
			<<if $condomUse is false>>
			<<elseif ($condomUse is true or (random(0,100) lt $condomautochance and $npcCondoms isnot undefined)) and $NPCList[_n].condom is false>>
				<<equipCondom _n>>
				<span class="green"><<He>> puts a condom on <<his>> penis.</span>
			<</if>>
			<span class="blue"><<He>> angles <<his>> $NPCList[_n].penisdesc towards your anus.</span>
			<<set $NPCList[_n].penis to "anusentrance">><<set $anusstate to "entrance">><<set $bottomuse to 0>><<set $cheekactiondefault to "cheeks">><<set $speechanusentrance to 1>>
		<<else>>
			<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc between your cheeks.
			<<submission 3>>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].penis is "leftarm">>
		<<set $speechhandjobpenis to 1>>
		<<if $rng gte 1>>
			<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc between your fingers.
			<<submission 1>>
		<<elseif $rng gte 101>>
			<<He>> moves <<his>> penis away from your hand.
			<<set $NPCList[_n].penis to 0>><<set $leftarm to 0>><<set $leftactiondefault to "leftgrab">>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].penis is "rightarm">>
		<<set $speechhandjobpenis to 1>>
		<<if $rng gte 1>>
			<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc between your fingers.
			<<submission 1>>
		<<elseif $rng gte 101>>
			<<He>> moves <<his>> penis away from your hand.
			<<set $NPCList[_n].penis to 0>><<set $rightarm to 0>><<set $rightactiondefault to "rightgrab">>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].penis is "botharm">>
		<<set $speechhandjobpenis to 1>>
		<<if $rng gte 1>>
			<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc between your hands.
			<<submission 2>>
		<<elseif $rng gte 101>>
			<<He>> moves <<his>> penis away from your hands.
			<<set $NPCList[_n].penis to 0>><<set $leftarm to 0>><<set $rightarm to 0>><<set $rightactiondefault to "rightgrab">><<set $leftactiondefault to "leftgrab">>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].penis is "feet">>
		<<set $speechfeet to 1>>
		<<if $rng gte 1>>
			<<if $enemyarousal gte (($enemyarousalmax / 10) * 8)>>
				<<if $npcSub>>You quicken your pace, rubbing <<his>> $NPCList[_n].penisdesc<<else>><<He>> fucks your feet<</if>> with increasing force as <<he>> approaches <<his>> peak.
				<<submission 1>>
			<<elseif $enemyarousal gte (($enemyarousalmax / 10) * 4)>>
				<<if $npcSub>>You rub and knead<<else>><<He>> pounds<</if>> <<his>> $NPCList[_n].penisdesc between your feet.
				<<submission 1>>
			<<else>>
				<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc between your feet.
				<<submission 1>>
			<</if>>
		<<elseif $rng gte 101>>
			<<He>> moves <<his>> penis away from your feet.
			<<set $NPCList[_n].penis to 0>><<set $feetuse to 0>>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].penis is "vagina">>
		<<if $rng gte 101>>
			<span class="purple"><<He>> slides <<his>> $NPCList[_n].penisdesc out of your <<pussy>>.</span>
			<<sex 30>><<set $NPCList[_n].penis to "vaginaimminent">><<bruise vagina>><<violence 1>><<set $vaginastate to "imminent">>
		<<elseif $rng gte 1>>
			<<set _pain to Math.floor($vaginalPain * (1.5 / (5 - ($NPCList[_n].penissize or 1))))>>
			<<if $enemyanger gte 100>><<set _pain *= 1.5>>
				<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
					<<He>> violates your <<pussy>> with increasing intensity.
				<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
					<<He>> continues to fuck your <<pussy>> with no regard for your comfort.
				<<else>>
					<<He>> fucks your <<pussy>> with rough thrusts, giving no regard to your comfort.
				<</if>>
			<<elseif $enemyanger gte 20>>
				<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
					You feel <<his>> $NPCList[_n].penisdesc throb as <<he>> pounds away at your <<pussy>>.
				<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
					<<He>> continues to violate your <<pussy>>.
				<<else>>
					<<He>> fucks your <<pussy>> with deep and deliberate thrusts.
				<</if>>
			<<else>>
				<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
					<<if $npcSub>>You feel <<him>> approaching <<his>> peak, and ride <<him>><<else>><<He>> fucks your <<pussy>><</if>> with increasing power.
				<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
					<<if $npcSub>>You continue to ride <<his>> $NPCList[_n].penisdesc.<<else>><<He>> continues thrusting into your <<pussy>>.<</if>>
				<<else>>
					<<if $npcSub>>You fuck <<his>> NPCList[_n].penisdesc<<else>><<He>> fucks your <<pussy>><</if>> with steady thrusts.
				<</if>>
			<</if>>
			<<sex 30>><<bruise vagina>><<violence 1>><<set $speechvaginapenetrated to 1>><<pain _pain>>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].penis is "vaginaimminent">>
		<<if $rng gte 101>>
			<span class="blue"><<He>> stops pressing <<his>> $NPCList[_n].penisdesc against your pussy.</span>
			<<set $NPCList[_n].penis to "vaginaentrance">><<set $vaginastate to "entrance">>
		<<elseif $rng gte 1>>
			<<if $novaginal is 0>>
				<<set _pain to Math.floor($vaginalPain * (1.5 / (5 - ($NPCList[_n].penissize or 1))))>>
				<<if $player.virginity.vaginal isnot true>>
					<<if $enemyanger gte 80>>
						<span class="pink"><<He>> thrusts <<his>> $NPCList[_n].penisdesc deep into your <<pussy>>.</span>
						<<set _pain *= 1.5>>
					<<elseif $enemyanger gte 20>>
						<span class="pink"><<He>> thrusts <<his>> $NPCList[_n].penisdesc deep into your <<pussy>>.</span>
					<<else>>
						<span class="pink"><<He>> glides <<his>> $NPCList[_n].penisdesc deep into your <<pussy>>.</span>
					<</if>>
					<<switch $NPCList[_n].penissize>>
					<<case 4>>
						<span class="red"> You whimper as your <<pussy>> stretches to accommodate <<his>> cock.</span>
					<<default>>
					<</switch>>
					<<sex 30>><<set $NPCList[_n].penis to "vagina">><<vaginalstat>><<bruise vagina>><<violence 1>><<raped>><<vaginaraped>><<set $vaginastate to "penetrated">><<set $speechvaginapenetrated to 1>>
					<<pain _pain>>
				<<elseif $player.virginity.vaginal is true>>
					<<if $sexStats.vagina.pregnancy.totalBirthEvents gt 0>>
						<span class="red">Despite your lack of a hymen, you feel something inside you change as your virginity and purity are taken.</span>
						<<violence 10>>
					<<else>>
						<<switch $NPCList[_n].penissize>>
						<<case 4>>
							<span class="red"><<His>> $NPCList[_n].penisdesc thrusts deep into your virgin pussy, obliterating your hymen and forever robbing you of your purity. You scream out as your <<pussy>> struggles to accommodate <<his>> cock.</span>
							<<violence 200>>
						<<case 1>>
							<span class="red"><<His>> $NPCList[_n].penisdesc pushes into your virgin pussy, breaking your hymen and forever robbing you of your purity.</span> <span class="green"> While technically no longer a virgin, you can barely feel it.</span>
							<<violence 25>>
						<<default>>
							<span class="pink"><<His>> $NPCList[_n].penisdesc thrusts deep into your virgin pussy,</span><span class="red"> tearing your hymen and forever robbing you of your purity.</span>
							<<violence 100>>
						<</switch>>
					<</if>>
					<<sex 100>><<set $NPCList[_n].penis to "vagina">><<takeVirginity $NPCList[_n].fullDescription "vaginal">><<raped>><<vaginaraped>><<set $vaginastate to "penetrated">><<set $speechvaginavirgin to 1>><<bruise vagina>><<vaginalstat>>
					<<if $enemyanger gte 100>><<set _pain *= 1.5>><</if>><<pain _pain>>
				<</if>>
				<<takeNPCVirginity $NPCList[_n].fullDescription "penile">>
			<<else>>
				Respecting your wishes, <<he>> presses <<his>> $NPCList[_n].penisdesc against your <<pussy>> but does not penetrate.
				<<sex 15>><<set $speechvaginawithhold to 1>>
			<</if>>
		<</if>>
	<</if>>

	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].penis is "vaginaentrance">>
		<<if $rng gte 101>>
			<span class="lblue"><<He>> moves <<his>> penis away from your <<pussy>>.</span>
			<<set $NPCList[_n].penis to 0>><<set $vaginause to 0>><<set $vaginastate to 0>>
		<<elseif $rng gte 1>>
			<<if $worn.over_lower.vagina_exposed is 0>>
				<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc against your <<pussy>> through your $worn.over_lower.name.
				<<sex 5>><<set $worn.over_lower.integrity -= 10>><<set $speechvaginaentrance to 1>><<set $enemyanger += 15>>
			<<elseif $worn.lower.vagina_exposed is 0>>
				<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc against your <<pussy>> through your $worn.lower.name.
				<<sex 5>><<set $worn.lower.integrity -= 10>><<set $speechvaginaentrance to 1>><<set $enemyanger += 15>>
			<<elseif $worn.lower.vagina_exposed is 1 and $worn.over_lower.vagina_exposed is 1>>
				<<set $rng to random(1, 100)>>
				<<if $worn.under_lower.vagina_exposed is 0>>
					<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc against your <<pussy>> through your $worn.under_lower.name.
					<<sex 5>><<set $worn.under_lower.integrity -= 10>><<set $speechvaginaentrance to 1>>
				<<elseif $worn.under_lower.vagina_exposed is 1>>
					<<if $rng gte 51>>
						<<if $NPCList[_n].chastity.penis.includes("chastity")>>
							<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].chastity.penis against your <<pussy>><<if $worn.genitals.type.includes("chastity")>><<set $worn.genitals.integrity -= 10>> through your $worn.genitals.name<</if>>.
							<<sex 25>><<set $speechNPCChastity to 1>>
						<<elseif $worn.genitals.type.includes("chastity")>>
							<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc against your <<pussy>> through your $worn.genitals.name.
							<<sex 25>><<set $worn.genitals.integrity -= 10>><<set $speechchastity to 1>>
						<<elseif !$npcSub>>
							<<if $vaginaWetness gte ($NPCList[_n].penissize * 15) + random(1, 40) or random(1, 2) is 2>>
								<<He>> pushes <<his>> $NPCList[_n].penisdesc against your <<pussy>>. <<vagina_lube_text>><span class="pink">the tip presses into you, a thrust away from penetrating.</span>
								<<sex 20>><<set $NPCList[_n].penis to "vaginaimminent">><<set $vaginastate to "imminent">><<set $speechvaginaimminent to 1>>
							<<else>>
								<<if $npcSub>>You push<<else>><<He>> pushes<</if>> <<his>> $NPCList[_n].penisdesc against your <<pussy>>, <span class="blue">but fail<<if !$npcSub>>s<</if>> to penetrate,</span> instead angling away and rubbing it against your <<clit>>.
								<<sex 5>><<set $speechvaginaimminent to 1>>
								<<if $enemyarousal gte ($enemyarousalmax / 2) and random(1, 3) is 3>>
									Precum leaks from the tip, <span class="blue">lubricating your pussy.</span>
									<<set $player.bodyliquid.vaginaoutside.semen += 1>>
								<</if>>
							<</if>>
						<</if>>
					<<elseif $rng gte 1>>
						<<if !$worn.genitals.type.includes("chastity")>>
							<<if $npcSub>>
								You tease <<his>> <<print $NPCList[_n].penisdesc>> with your <<pussy>> without trying to penetrate.
							<<else>>
								<<He>> teases your <<pussy>> with <<his>> <<print $NPCList[_n].penisdesc>> without trying to penetrate.
							<</if>>
							<<sex 10>><<set $speechvaginaentrance to 1>>
						<<else>>
							<<if $npcSub>>
								You tease <<his>> <<print $NPCList[_n].penisdesc>> with your <<pussy>> as best you can with your $worn.genitals.name in the way.
							<<else>>
								<<He>> teases your <<pussy>> with <<his>> <<print $NPCList[_n].penisdesc>> as best <<he>> can with your $worn.genitals.name in the way.
							<</if>>
							<<sex 5>><<set $speechchastity to 1>>
						<</if>>
					<</if>>
				<</if>>
			<</if>>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].penis is "anus">>
		<<if $rng gte 101>>
			<span class="purple"><<He>> withdraws <<his>> penis from your anus.</span>
			<<sex 30>><<set $NPCList[_n].penis to "anusimminent">><<bruise anus>><<violence 1>><<set $anusstate to "imminent">>
		<<elseif $rng gte 1>>
			<<set _pain to Math.floor($analPain * (1.5 / (5 - ($NPCList[_n].penissize or 1))))>>
			<<if $enemyanger gte 100>><<set _pain *= 1.5>>
				<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
					<<He>> ravages your <<bottom>> with a violent intensity.
				<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
					You feel <<his>> $NPCList[_n].penisdesc ever deeper within you as <<he>> fucks your <<bottom>>.
				<<else>>
					<<He>> fucks your <<bottom>> with rough thrusts, intent on showing you who's boss.
				<</if>>
			<<elseif $enemyanger gte 20>>
				<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
					You feel <<his>> $NPCList[_n].penisdesc throb within you as <<he>> fucks your <<bottom>>.
				<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
					<<He>> continues to violate your <<bottom>>, giving no regard to your comfort.
				<<else>>
					<<He>> fucks your <<bottom>> with deep and dominating thrusts.
				<</if>>
			<<else>>
				<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
					<<if $npcSub>>You feel <<him>> approaching <<his>> peak, and ride <<him>><<else>><<He>> fucks your <<bottom>><</if>> with increasing power.
				<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
					<<if $npcSub>>You continue to ride <<his>> $NPCList[_n].penisdesc.<<else>><<He>> continues thrusting into your <<bottom>>.<</if>>
				<<else>>
					<<if $npcSub>>You fuck <<his>> NPCList[_n].penisdesc<<else>><<He>> fucks your <<bottom>><</if>> with steady thrusts.
				<</if>>
			<</if>>
			<<sex 30>><<bruise anus>><<violence 1>><<set $speechanuspenetrated to 1>><<pain _pain>>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].penis is "anusimminent">>
		<<if $rng gte 101>>
			<span class="blue"><<He>> stops pressing <<his>> $NPCList[_n].penisdesc against your anus.</span>
			<<set $NPCList[_n].penis to "anusentrance">><<set $anusstate to "entrance">>
		<<elseif $rng gte 1>>
			<<if $noanal is 0>>
				<<set _pain to Math.floor($analPain * (1.5 / (5 - ($NPCList[_n].penissize or 1))))>>
				<<if $player.virginity.anal isnot true>>
					<span class="pink"><<He>> thrusts <<his>> $NPCList[_n].penisdesc deep into your <<bottom>>.</span>
					<<switch $NPCList[_n].penissize>>
					<<case 4>>
						<span class="red"> You whimper as your ass stretches to accommodate <<his>> cock.</span>
					<<default>>
					<</switch>>
					<<sex 30>><<set $NPCList[_n].penis to "anus">><<bruise anus>><<analstat>><<violence 1>><<raped>><<anusraped>><<set $anusstate to "penetrated">><<set $speechanuspenetrated to 1>>
					<<if $enemyanger gte 100>><<set _pain *= 1.5>><</if>><<pain _pain>>
				<<elseif $player.virginity.anal is true>>
					<span class="pink"><<He>> thrusts <<his>> $NPCList[_n].penisdesc deep into your virgin anus,</span> <span class="red">violating you in a way you hadn't conceived of.</span>
					<<switch $NPCList[_n].penissize>>
					<<case 4>>
						<span class="red"> You scream as your ass struggles to accommodate <<his>> cock.</span>
					<<case 1>>
						<span class="green"> While your ass is technically no longer virgin, you can barely feel it.</span>
					<<default>>
					<</switch>>
					<<sex 100>><<set $NPCList[_n].penis to "anus">><<takeVirginity $NPCList[_n].fullDescription "anal">><<bruise anus>><<analstat>><<violence 50>><<raped>><<anusraped>><<set $anusstate to "penetrated">><<set $speechanusvirgin to 1>>
					<<if $enemyanger gte 100>><<set _pain *= 1.5>><</if>><<pain _pain>>
				<</if>>
				<<takeNPCVirginity $NPCList[_n].fullDescription "penile">>
			<<else>>
				Respecting your wishes, <<he>> presses <<his>> $NPCList[_n].penisdesc against your anus but does not penetrate.
				<<sex 15>><<set $speechanuswithhold to 1>>
			<</if>>
		<</if>>
	<</if>>

	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].penis is "anusentrance">>
		<<if $rng gte 101>>
			<span class="lblue"><<He>> moves <<his>> penis away from your <<bottom>>.</span>
			<<set $NPCList[_n].penis to 0>><<set $anususe to 0>><<set $anusstate to 0>>
		<<elseif $rng gte 1>>
			<<if $worn.over_lower.anus_exposed is 0>>
				<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc against your <<bottom>> through your $worn.over_lower.name.
				<<sex 5>><<set $worn.over_lower.integrity -= 10>><<set $speechanusentrance to 1>>
			<<elseif $worn.lower.anus_exposed is 0>>
				<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc against your <<bottom>> through your $worn.lower.name.
				<<sex 5>><<set $worn.lower.integrity -= 10>><<set $speechanusentrance to 1>>
			<<elseif $worn.lower.anus_exposed is 1 and $worn.over_lower.anus_exposed is 1>>
				<<set $rng to random(1, 100)>>
				<<if $worn.under_lower.anus_exposed is 0>>
					<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc against your <<bottom>> through your $worn.under_lower.name.
					<<set $speechanusentrance to 1>><<sex 5>><<set $worn.under_lower.integrity -= 10>>
				<<elseif $worn.under_lower.anus_exposed is 1>>
					<<if $rng gte 51>>
						<<if $NPCList[_n].chastity.penis.includes("chastity")>>
							<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].chastity.penis against your anus<<if $worn.genitals.type.includes("chastity") and $worn.genitals.anal_shield is 1>><<set $worn.genitals.integrity -= 10>> through your $worn.genitals.name<</if>>.
							<<sex 25>><<set $speechNPCChastity to 1>>
						<<elseif $worn.genitals.type.includes("chastity") and $worn.genitals.anal_shield is 1>>
							<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc against your anus through your $worn.genitals.name.
							<<sex 25>><<set $worn.genitals.integrity -= 10>><<set $speechchastity to 1>>
						<<elseif !$npcSub>>
							<<if $anusWetness gte ($NPCList[_n].penissize * 15) + random(1, 40) or random(1, 2) is 2>>
								<<He>> presses <<his>> $NPCList[_n].penisdesc against your <<bottom>>. <<anus_lube_text>><span class="pink">the tip presses into you, a thrust away from penetrating.</span>
								<<sex 20>><<set $NPCList[_n].penis to "anusimminent">><<set $anusstate to "imminent">><<set $speechanusimminent to 1>>
							<<else>>
								<<if $npcSub>>You push<<else>><<He>> pushes<</if>> <<his>> $NPCList[_n].penisdesc against your <<bottom>>, <span class="blue">but fail<<if !$npcSub>>s<</if>> to penetrate,</span> instead angling away and rubbing it between your cheeks.
								<<sex 5>><<set $speechanusimminent to 1>>
								<<if $enemyarousal gte ($enemyarousalmax / 2) and random(1, 3) is 3>>
									Precum leaks from the tip, <span class="blue">lubricating your ass.</span>
									<<set $player.bodyliquid.bottom.semen += 1>>
								<</if>>
							<</if>>
						<</if>>
					<<elseif $rng gte 1>>
						<<His>> $NPCList[_n].penisdesc rubs against your <<bottom>>.
						<<sex 5>><<set $speechanusentrance to 1>>
					<</if>>
				<</if>>
			<</if>>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].penis is "mouth">>
		<<if $rng gte 101>>
			<span class="purple"><<He>> withdraws <<his>> penis from your mouth.</span>
			<<sex 30>><<set $NPCList[_n].penis to "mouthimminent">><<bruise face>><<violence 1>><<set $mouthstate to "imminent">>
		<<elseif $enemyanger gte random(1, 100) and $NPCList[_n].penissize gte 2>>
			<<if $oralskill gte random(1, 1200 + 100 * (2 - $NPCList[_n].penissize))>>
				<<He>> shoves <<his>> $NPCList[_n].penisdesc down your throat, <span class="blue">but you manage to gasp between <<his>> thrusts.</span>
				<<suffocatepass -1>>
			<<else>>
				<span class="pink">You gag as <<he>> thrusts <<his>> $NPCList[_n].penisdesc down your throat.</span>
					<<oxygen -150>>
				<<if $oxygen gte 900>>
					<span class="blue">You struggle for breath.</span>
				<<elseif $oxygen gte 600>>
					<span class="purple">You can't breathe!</span>
					<<violence 10 1 1 0.2 1>>
				<<elseif $oxygen gte 300>>
					<span class="pink">You feel light-headed.</span>
					<<violence 20 1 1 0.2 1>>
				<<elseif $oxygen gte 1>>
					<span class="pink">You see stars.</span>
					<<violence 40 1 1 0.2 1>>
				<<else>>
					<span class="red">You are suffocating.</span>
					<<violence 100 1 1 0.2 1>>
					<<suffocatepass>>
				<</if>>
			<</if>>
		<<submission 10>><<bruise face>><<bruise neck>><<violence 1>><<set $speechmouthpenetrated to 1>>
		<<elseif $rng gte 1>>
			<<if $npcSub>>
				You continue to service <<him>> with your mouth.
			<<else>>
				<<He>> continues thrusting into your mouth.
			<</if>>
			<<if $NPCList[_n].penissize gte 4>>
				<<switch random(1, 4)>>
				<<case 1>>
					It's a struggle not to gag as the $NPCList[_n].penisdesc fills you.
				<<case 2>>
					<span class="pink"> Saliva drools down your chin as you struggle to keep your lips wrapped around <<his>> $NPCList[_n].penisdesc.</span>
					<<set $hygiene += 500>><<set $player.bodyliquid.face.goo += 1>>
				<<default>>
				<</switch>>
			<</if>>
			<<submission 10>><<bruise face>><<violence 1>><<set $speechmouthpenetrated to 1>>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].penis is "mouthimminent">>
		<<if $pullaway is 1>>
			<<set $pullaway to 0>>
			Saliva drips from the tip of <<his>> phallus.
		<<else>>
			<<if $rng gte 101>>
				<span class="blue"><<He>> stops pressing <<his>> $NPCList[_n].penisdesc against your mouth.</span>
				<<set $NPCList[_n].penis to "mouthentrance">><<submission 5>><<set $mouthstate to "entrance">>
			<<elseif $rng lte 20>>
				<<if $player.virginity.oral isnot true>>
					<span class="pink"><<He>> thrusts <<his>> $NPCList[_n].penisdesc into your mouth.</span>
					<<submission 10>><<set $NPCList[_n].penis to "mouth">><<bruise face>><<oralstat>><<raped>><<set $mouthstate to "penetrated">><<set $speechmouthpenetrated to 1>>
				<<elseif $player.virginity.oral is true>>
					<span class="pink"><<He>> thrusts <<his>> $NPCList[_n].penisdesc into your mouth.</span><span class="red"> It tastes strange.</span>
					<<submission 30>><<set $NPCList[_n].penis to "mouth">><<takeVirginity $NPCList[_n].fullDescription "oral">><<bruise face>><<oralstat>><<violence 1>><<raped>><<set $mouthstate to "penetrated">><<set $speechmouthvirgin to 1>>
				<</if>>
			<<elseif $rng gte 21>>
				<<if $mouthsubmit is 1>>
					<<He>> allows you to pleasure <<his>> $NPCList[_n].penisdesc with your mouth.
					<<submission 5>><<set $speechmouthimminent to 1>>
				<<elseif $player.virginity.oral isnot true>>
					<span class="pink"> <<He>> thrusts <<his>> $NPCList[_n].penisdesc into your mouth.</span>
					<<submission 10>><<set $NPCList[_n].penis to "mouth">><<oralstat>><<bruise face>><<violence 1>><<raped>><<set $mouthstate to "penetrated">><<set $speechmouthpenetrated to 1>>
				<<elseif $player.virginity.oral is true>>
					<span class="pink"> <<He>> thrusts <<his>> $NPCList[_n].penisdesc into your mouth.</span><span class="red"> It tastes strange.</span>
					<<submission 30>><<set $NPCList[_n].penis to "mouth">><<takeVirginity $NPCList[_n].fullDescription "oral">><<oralstat>><<bruise face>><<violence 1>><<raped>><<set $mouthstate to "penetrated">><<set $speechmouthpenetrated to 1>>
				<</if>>
			<</if>>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].penis is "mouthentrance">>
		<<if $pullaway is 1>>
			<<set $pullaway to 0>>
			<<His>> $NPCList[_n].penisdesc hovers only inches from your face.
		<<else>>
			<<if $rng gte 101>>
				<span class="lblue"><<He>> moves <<his>> penis away from your mouth.</span>
				<<set $NPCList[_n].penis to 0>><<set $mouthuse to 0>><<set $mouthstate to 0>>
			<<elseif $NPCList[_n].chastity.penis.includes("chastity")>>
				<span class="purple"><<if $npcSub>>You pull<<else>><<He>> pushes<</if>> <<his>> $NPCList[_n].chastity.penis against your mouth.</span>
				<<sex 25>><<set $speechNPCChastity to 1>>
			<<elseif $rng gte 1 and !$npcSub>>
				<span class="purple"><<He>> pushes <<his>> $NPCList[_n].penisdesc against your lips.</span>
				<<set $NPCList[_n].penis to "mouthimminent">><<submission 5>><<set $mouthstate to "imminent">><<set $speechmouthimminent to 1>>
			<</if>>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].penis is "chest">>
		<<if $rng gte 101>>
			<<He>> moves <<his>> penis away from your chest.
			<<set $NPCList[_n].penis to 0>><<set $chestuse to 0>>
		<<elseif $rng gte 1>>
			<<submission 3>><<playWithBreasts>>
			<<if $breastcup is "none">>
				<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc against your <<breasts>>.
				<<set $speechchestrub to 1>>
			<<else>>
				<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc between your <<breasts>>.
				<<set $speechbreastrub to 1>>
			<</if>>
		<</if>>
	<</if>>
	<<if $NPCList[_n].penis is "footjob">>
		<<if $rng gte 101>>
			<span class="blue"><<He>> stops pressing <<his>> foot against your <<genitals>>.</span>
			<<set $NPCList[_n].penis to 0>>
			<<if $player.penisExist>>
				<<set $penisuse to 0>>
			<</if>>
			<<if $player.vaginaExist>>
				<<set $vaginause to 0>>
			<</if>>
		<<else>>
			<<if $player.penisExist>>
				<<He>> presses your <<penis>> against your stomach with <<his>> foot and rubs your glans between <<his>> toes.
				<<set $speechpenisfoot to 1>><<neutral 5>><<violence 1>>
			<<else>>
				<<He>> presses and teases your <<pussy>> with <<his>> foot.
				<<set $speechvaginafoot to 1>><<neutral 5>><<violence 1>>
			<</if>>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].penis is "otherfrot">>
		<<if $rng gte 101>>
			<span class="blue"><<He>> shifts <<his>> ass and presses <<his>> anus against your <<penis>>.</span>
			<<set $penisuse to "otheranus">><<set $NPCList[_n].penis to "otheranusentrance">><<set $penisstate to "otheranusentrance">><<set $speechotheranusentrance to 1>>
		<<else>>
			<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> ass against your <<penis>>.
			<<sex 5>>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].penis is "otheranus">>
		<<if $rng gte 101>>
			<span class="purple"><<He>> moves <<his>> pelvis away, releasing your <<penis>> from <<his>> anus.</span>
			<<sex 30>><<set $NPCList[_n].penis to "otheranusimminent">><<bruise penis>><<violence 1>><<set $penisstate to "otheranusimminent">><<set $speechotheranusimminent to 1>>
		<<elseif $rng gte 1>>
			<<if $enemyanger gte 100>>
				<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
					<<He>> continues to fuck your <<penis>> with <<his>> ass, <<his>> movements violent and erratic.
				<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
					<<He>> continues to ride you, your penis helpless as it's fucked.
				<<else>>
					<<He>> fucks your <<penis>> with rough movements, intent on showing you who's boss.
				<</if>>
			<<elseif $enemyanger gte 20>>
				<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
					You feel <<his>> ass twitch around your length as <<he>> fucks you.
				<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
					<<He>> continues to violate your <<penis>>, using you as a sex toy.
				<<else>>
					<<He>> fucks your <<penis>>, taking as much of you into <<his>> ass as <<he>> can.
				<</if>>
			<<else>>
				<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
					<<if $npcSub>>You continue thrusting into <<him>><<else>><<He>> continues riding your <<penis>><</if>>, <<his>> anus rhythmically pounding your length. <<His>> body jerks whenever you hit a sensitive spot.
				<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
					<<if $npcSub>>You continue thrusting into <<him>><<else>><<He>> continues riding your <<penis>><</if>>, <<his>> anus rhythmically pounding your length.
				<<else>>
					<<if $npcSub>>You press into <<his>> ass<<else>><<He>> rides your <<penis>><</if>> with steady movements.
				<</if>>
			<</if>>
			<<sex 30>><<bruise penis>><<violence 1>><<set $speechotheranuspenetrated to 1>>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].penis is "otheranusimminent">>
		<<if $rng gte 101>>
			<span class="blue"><<He>> stops pressing <<his>> ass against your <<penis>>.</span>
			<<set $NPCList[_n].penis to "otheranusentrance">><<set $penisstate to "otheranusentrance">><<set $speechotheranusentrance to 1>>
		<<elseif $rng gte 1>>
			<<if $nopenile is 0>>
				<<set $penisactiondefault to "otheranustake">>
				<<if (($penissize is -1 and $arousal lte ($arousalmax / 5) * 4) or ($penissize is -2 and $arousal lte ($arousalmax / 10) * 9))>>
					<<He>> presses <<his>> ass against the tip of your <<penis>>, trying to take you in. <span class="blue">But you don't have an erection.</span>
					<<set $speechpenissmall to 1>><<set $enemyanger += 5>>
				<<elseif $penissize lte 2 or $penissize is 3 and random(1, 100) gte 70 or $penissize gte 4 and random(1, 100) gte 90>>
					<<if $player.virginity.penile isnot true>>
						<span class="pink"><<He>> eases your <<penis>> into <<his>> ass, swallowing you to the base.</span>
						<<sex 30>><<set $NPCList[_n].penis to "otheranus">><<penilestat>><<bruise penis>><<violence 1>><<raped>><<penisraped>><<set $penisstate to "otheranus">><<set $speechotheranuspenetrated to 1>>
					<<elseif $player.virginity.penile is true>>
						<span class="pink"><<He>> eases your virgin penis into <<his>> ass,</span><span class="red"> separating your foreskin from your glans and forever robbing you of your purity.</span>
						<<sex 100>><<set $NPCList[_n].penis to "otheranus">><<takeVirginity $NPCList[_n].fullDescription "penile">><<bruise penis>><<penilestat>><<violence 100>><<raped>><<penisraped>><<set $penisstate to "otheranus">><<set $speechpenisvirgin to 1>>
					<</if>>
					<<takeNPCVirginity $NPCList[_n].fullDescription "anal">>
					<<if $penissize gte 4>>
						<<He>> looks proud to have taken something so big.
					<</if>>
				<<else>>
					<<He>> presses <<his>> ass against the tip of your <<penis>>, trying to take you in. <span class="blue">Your girth proves too much.</span>
					<<set $speechpenisbig to 1>><<set $enemyanger += 5>>
				<</if>>
			<<else>>
				Respecting your wishes, <<he>> does not envelope your <<penis>> with <<his>> ass, instead teasing the tip of your glans.
				<<sex 15>><<set $speechotheranuswithhold to 1>>
			<</if>>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].penis is "otheranusentrance">>
		<<if $rng gte 101>>
			<span class="lblue"><<He>> moves <<his>> ass away from your <<penis>>.</span>
			<<set $NPCList[_n].penis to 0>><<set $penisuse to 0>><<set $penisstate to 0>>
		<<elseif $rng gte 1>>
			<<if $worn.over_lower.vagina_exposed is 0>>
				<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> ass against your <<penis>> through your $worn.over_lower.name.
				<<sex 5>><<set $worn.over_lower.integrity -= 10>><<set $speechotheranusentrance to 1>>
			<<elseif $worn.lower.vagina_exposed is 0>>
				<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> ass against your <<penis>> through your $worn.lower.name.
				<<sex 5>><<set $worn.lower.integrity -= 10>><<set $speechotheranusentrance to 1>>
			<<elseif $worn.lower.vagina_exposed is 1 and $worn.over_lower.vagina_exposed is 1>>
				<<set $rng to random(1, 100)>>
				<<if $worn.under_lower.vagina_exposed is 0>>
					<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> ass against your <<penis>> through your $worn.under_lower.name.
					<<sex 5>><<set $worn.under_lower.integrity -= 10>><<set $speechotheranusentrance to 1>>
				<<elseif $worn.under_lower.vagina_exposed is 1>>
					<<if $rng gte 71>>
						<<if $NPCList[_n].chastity.anus.includes("shield")>>
							<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].chastity.anus against your <<penis>><<if $worn.genitals.type.includes("chastity")>><<set $worn.genitals.integrity -= 10>> through your $worn.genitals.name<</if>>.
							<<sex 25>><<set $speechNPCChastity to 1>>
						<<elseif $worn.genitals.type.includes("chastity")>>
							<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> ass against your <<penis>> through your $worn.genitals.name.
							<<sex 20>><<set $worn.genitals.integrity -= 10>><<set $speechchastity to 1>>
						<<elseif $nopenile is 1 and !$npcSub>>
							<span class="purple"><<He>> presses <<his>> ass against your <<penis>>.</span>
							<<sex 20>><<set $NPCList[_n].penis to "otheranusimminent">><<set $penisstate to "otheranusimminent">><<set $speechotheranusimminent to 1>>
						<<elseif $penisWetness gte ($penissize * 15) + random(1, 40) or random(1, 2) is 2 and !$npcSub>>
							<<He>> presses <<his>> ass against your <<penis>>. <<penis_lube_text>> <span class="pink">your tip is pushed into <<him>>, a thrust away from being enveloped.</span>
							<<sex 20>><<set $NPCList[_n].penis to "otheranusimminent">><<set $penisstate to "otheranusimminent">><<set $speechotheranusimminent to 1>>
						<<elseif !$npcSub>>
							<<He>> presses <<his>> ass against your <<penis>>, <span class="blue">but fails to envelop you.</span> Your penis angles away and rubs between <<his>> cheeks.
							<<sex 5>><<set $speechotheranusimminent to 1>>
						<</if>>
					<<elseif $rng gte 1>>
						<<if !$worn.genitals.type.includes("chastity")>>
							<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> your <<penis>> between <<his>> cheeks.
							<<sex 10>>
						<<else>>
							<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> cheeks using your $worn.genitals.name.
							<<sex 5>>
						<</if>>
					<</if>>
				<</if>>
			<</if>>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].penis is "mouthotheranus">>
		<<if $rng gte 1>>
			<<if $enemyarousal gte (($enemyarousalmax / 5) * 3)>>
				<<He>> grinds <<his>> ass against your mouth.
			<<else>>
				<<He>> slowly moves <<his>> ass against your lips.
			<</if>>
			<<sex 3>><<set $speechmouthotheranus to 1>>
			<<if $mouthactiondefault is "anallick">>
				<<set $speechanallick to 1>>
			<<elseif $mouthactiondefault is "analkiss">>
				<<set $speechanalkiss to 1>>
			<</if>>
		<<else>>
			<span class="purple"><<He>> moves <<his>> ass away from your face.</span>
			<<set $mouthuse to 0>><<set $mouthstate to 0>><<set $NPCList[_n].penis to 0>>
			<<set $NPCList[_n].location.genitals = 0>>
		<</if>>
	<</if>>

	<!-- VAGINA START -->

	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].vagina is "clothed" and $npcSub isnot 1>>
		<<if $pronoun is "f">>
			<<if $enemyarousal gte 40>>
				<span class="blue"><<He>> lifts up <<his>> skirt, revealing <<his>> moistened pussy<<if $NPCList[_n].chastity.vagina.includes("chastity")>> behind a $NPCList[_n].chastity.vagina<</if>>.</span>
				<<set $NPCList[_n].vagina to 0>>
			<</if>>
		<<else>>
			<<if $enemyarousal gte 40>>
				<span class="blue"><<He>> unzips <<his>> fly, revealing <<his>> moistened pussy<<if $NPCList[_n].chastity.vagina.includes("chastity")>> behind a $NPCList[_n].chastity.vagina<</if>>.</span>
				<<set $NPCList[_n].vagina to 0>>
			<</if>>
		<</if>>
		<<if $NPCList[_n].fullDescription is "Sydney">>
			<<sydneyExpose>>
		<</if>>	
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].vagina is "frot">>
		<<if $rng gte 101>>
			<span class="blue"><<He>> moves <<his>> clit away and presses <<his>> hungry pussy against your <<penis>>.</span>
			<<set $penisuse to "othervagina">><<set $NPCList[_n].vagina to "penisentrance">><<set $penisstate to "entrance">><<set $speechpenisentrance to 1>>
		<<else>>
			<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> clit against your glans.
			<<sex 5>>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].vagina is "penis">>
		<<if $rng gte 101>>
			<span class="purple"><<He>> moves <<his>> pelvis away, releasing your <<penis>> from <<his>> vagina.</span>
			<<sex 30>><<set $NPCList[_n].vagina to "penisimminent">><<bruise penis>><<violence 1>><<set $penisstate to "imminent">><<set $speechpenisimminent to 1>>
		<<elseif $rng gte 1>>
			<<if $enemyanger gte 100>>
				<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
					<<He>> continues to fuck your <<penis>>, <<his>> movements violent and erratic as <<his>> pussy slides along your length.
				<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
					<<He>> continues to ride you, your penis helpless as it's fucked.
				<<else>>
					<<He>> fucks your <<penis>> with rough movements, intent on showing you who's boss.
				<</if>>
			<<elseif $enemyanger gte 20>>
				<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
					You feel <<his>> vagina twitch and throb around your length as <<he>> fucks you.
				<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
					<<He>> continues to violate your <<penis>>, using you as a sex toy.
				<<else>>
					<<He>> fucks your <<penis>>, taking as much of you into <<his>> vagina as <<he>> can.
				<</if>>
			<<else>>
				<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
					<<if $npcSub>>You continue thrusting into <<him>><<else>><<He>> continues riding your <<penis>><</if>>, <<his>> vagina rhythmically kneading and squeezing your length. <<His>> body jerks whenever you hit a sensitive spot.
				<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
					<<if $npcSub>>You continue thrusting into <<him>><<else>><<He>> continues riding your <<penis>><</if>>, <<his>> vagina rhythmically kneading and squeezing your length.
				<<else>>
					<<if $npcSub>>You press into <<his>> pussy<<else>><<He>> rides your <<penis>><</if>> with steady movements.
				<</if>>
			<</if>>
			<<sex 30>><<bruise penis>><<violence 1>><<set $speechpenispenetrated to 1>>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].vagina is "penisimminent">>
		<<if $rng gte 101>>
			<span class="blue"><<He>> stops pressing <<his>> pussy against your <<penis>>.</span>
			<<set $NPCList[_n].vagina to "penisentrance">><<set $penisstate to "entrance">><<set $speechpenisentrance to 1>>
		<<elseif $rng gte 1>>
			<<if $nopenile is 0>>
				<<if (($penissize is -1 and $arousal lte ($arousalmax / 5) * 4) or ($penissize is -2 and $arousal lte ($arousalmax / 10) * 9))>>
					<<He>> presses <<his>> pussy against the tip of your <<penis>>, trying to take you in. <span class="blue">But you don't have an erection.</span>
					<<set $speechpenissmall to 1>><<set $enemyanger += 5>>
				<<elseif $penissize lte 2 or $penissize is 3 and random(1, 100) gte 70 or $penissize gte 4 and random(1, 100) gte 90>>
					<<if $player.virginity.penile isnot true>>
						<span class="pink"><<He>> eases your <<penis>> into <<his>> pussy, swallowing you to the base.</span>
						<<sex 30>><<set $NPCList[_n].vagina to "penis">><<penilestat>><<bruise penis>><<violence 1>><<raped>><<penisraped>><<set $penisstate to "penetrated">><<set $speechpenispenetrated to 1>>
					<<elseif $player.virginity.penile is true>>
						<span class="pink"><<He>> eases your virgin penis into <<his>> pussy,</span><span class="red"> separating your foreskin from your glans and forever robbing you of your purity.</span>
						<<sex 100>><<set $NPCList[_n].vagina to "penis">><<takeVirginity $NPCList[_n].fullDescription "penile">><<bruise penis>><<penilestat>><<violence 100>><<raped>><<penisraped>><<set $penisstate to "penetrated">><<set $speechpenisvirgin to 1>>
					<</if>>
					<<takeNPCVirginity $NPCList[_n].fullDescription "vaginal">>
					<<if $penissize gte 4>>
						<<He>> looks proud to have taken something so big.
					<</if>>
				<<else>>
					<<He>> presses <<his>> pussy against the tip of your <<penis>>, trying to take you in. <span class="blue">Your girth proves too much.</span> <<He>> frots against your length.
					<<set $speechpenisbig to 1>><<set $enemyanger += 5>>
				<</if>>
			<<else>>
				Respecting your wishes, <<he>> does not envelope your <<penis>> with <<his>> vagina, instead teasing the tip of your glans.
				<<sex 15>><<set $speechpeniswithhold to 1>>
			<</if>>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].vagina is "penisentrance">>
		<<if $rng gte 101>>
			<span class="lblue"><<He>> moves <<his>> pussy away from your <<penis>>.</span>
			<<set $NPCList[_n].vagina to 0>><<set $penisuse to 0>><<set $penisstate to 0>>
		<<elseif $rng gte 1>>
			<<if $worn.over_lower.vagina_exposed is 0>>
				<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> pussy against your <<penis>> through your $worn.over_lower.name.
				<<sex 5>><<set $worn.over_lower.integrity -= 10>><<set $speechpenisentrance to 1>>
			<<elseif $worn.lower.vagina_exposed is 0>>
				<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> pussy against your <<penis>> through your $worn.lower.name.
				<<sex 5>><<set $worn.lower.integrity -= 10>><<set $speechpenisentrance to 1>>
			<<elseif $worn.lower.vagina_exposed is 1 and $worn.over_lower.vagina_exposed is 1>>
				<<set $rng to random(1, 100)>>
				<<if $worn.under_lower.vagina_exposed is 0>>
					<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> pussy against your <<penis>> through your $worn.under_lower.name.
					<<sex 5>><<set $worn.under_lower.integrity -= 10>><<set $speechpenisentrance to 1>>
				<<elseif $worn.under_lower.vagina_exposed is 1>>
					<<if $rng gte 51>>
						<<if $NPCList[_n].chastity.vagina.includes("chastity")>>
							<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].chastity.vagina against your <<penis>><<if $worn.genitals.type.includes("chastity")>><<set $worn.genitals.integrity -= 10>> through your $worn.genitals.name<</if>>.
							<<sex 25>><<set $speechNPCChastity to 1>>
						<<elseif $worn.genitals.type.includes("chastity")>>
							<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> pussy against your <<penis>> through your $worn.genitals.name.
							<<sex 20>><<set $worn.genitals.integrity -= 10>><<set $speechchastity to 1>>
						<<elseif $nopenile is 1 and !$npcSub>>
							<span class="purple"><<He>> presses <<his>> pussy against your <<penis>>.</span>
							<<sex 20>><<set $NPCList[_n].vagina to "penisimminent">><<set $penisstate to "imminent">><<set $speechpenisimminent to 1>>
						<<elseif $penisWetness gte ($penissize * 15) + random(1, 40) or random(1, 2) is 2 and !$npcSub>>
							<<He>> presses <<his>> pussy against your <<penis>>. <<penis_lube_text>> <span class="pink">your tip is pushed into <<him>>, a thrust away from being enveloped.</span>
							<<sex 20>><<set $NPCList[_n].vagina to "penisimminent">><<set $penisstate to "imminent">><<set $speechpenisimminent to 1>>
						<<elseif !$npcSub>>
							<<He>> presses <<his>> pussy against your <<penis>>, <span class="blue">but fails to envelop you.</span> Your penis angles away and rubs against <<his>> clit.
							<<sex 5>><<set $speechpenisimminent to 1>>
							<<if $enemyarousal gte ($enemyarousalmax / 2) and random(1, 3) is 3>>
								Lewd fluid drips from <<his>> pussy, <span class="blue">lubricating your cock.</span>
								<<set $player.bodyliquid.penis.goo += 1>>
							<</if>>
						<</if>>
					<<elseif $rng gte 1>>
						<<if !$worn.genitals.type.includes("chastity")>>
							<<if $npcSub>>
								You tease <<his>> labia with your <<penis>>.
							<<else>>
								<<He>> teases your <<penis>> with <<his>> labia.
							<</if>>
							<<sex 10>>
						<<else>>
							<<if $npcSub>>
								You tease <<his>> labia with your <<penis>>.
							<<else>>
								<<He>> teases your <<penis>> with <<his>> labia.
							<</if>>
							<<sex 5>>
						<</if>>
					<</if>>
				<</if>>
			<</if>>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].vagina is "lefthand" or $NPCList[_n].vagina is "righthand">>
		/*<<set $_npchand to $NPCList[_n].vagina.slice(0,4)>>*/

		<<if $rng lte 80>>
			<<He>> strokes <<his>> pussy with <<his>> hand.
			<<neutral 1>><<set $enemyarousal += 20>>
		<<else>>
			<span class="blue"><<He>> moves <<his>> hand away from <<his>> pussy.</span>
			<<set $NPCList[_n][$NPCList[_n].vagina] to 0>><<set $NPCList[_n].vagina to 0>>
		<</if>>
	<</if>>
	<<if $NPCList[_n].vagina is "mouth">>
		<<if $enemyanger gte 100>>
			<<He>> covers your mouth with <<his>> pussy, making it difficult to breathe.
			<<violence 3>><<bruise face>><<set $speechvaginamouth to 1>>
		<<else>>
			<<if $mouthsubmit is 1>>
				<<if $rng gte 1>>
					<<if !$npcSub>>
						<<He>> rubs <<his>> pussy against your lips.
					<<else>>
						You continue to violate <<his>> pussy with your lips.
					<</if>>
					<<if $enemyarousal gte (($enemyarousalmax / 5) * 3)>>
						You can taste <<his>> juices.
					<</if>>
					<<sex 3>><<set $speechvaginamouth to 1>>
				<<else>>
					<<He>> moves <<his>> pussy away from your face.
					<<set $mouthuse to 0>><<set $mouthstate to 0>><<set $NPCList[_n].vagina to 0>>
				<</if>>
			<<else>>
				<<if $rng gte 1>>
					<<if !$npcSub>>
						<<He>> rubs <<his>> pussy against your lips.
					<<else>>
						You continue to violate <<his>> pussy with your lips.
					<</if>>
					<<if $enemyarousal gte (($enemyarousalmax / 5) * 3)>>
						You can taste <<his>> juices.
					<</if>>
					<<sex 3>><<set $speechvaginamouth to 1>>
				<<else>>
					<<He>> moves <<his>> pussy away from your face.
					<<set $mouthuse to 0>><<set $mouthstate to 0>><<set $NPCList[_n].vagina to 0>>
				<</if>>
			<</if>>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].vagina is "vaginaentrance" and !$npcSub>>
		<<if $rng gte 51>>
			<<He>> kisses your <<pussy>> with <<his>> own, <span class="purple">teasing what's to come.</span>
			<<set $vaginastate to "othervaginaimminent">><<set $NPCList[_n].vagina to "vaginaimminent">><<sex 10>>
		<<else>>
			<<He>> hovers <<his>> pussy closer to yours.
			<<neutral 1>>
		<</if>>
		<<set $speechtribentrance to 1>>
	<<elseif $NPCList[_n].vagina is "vaginaimminent" and !$npcSub>>
		<<He>> thrusts forward, <span class="pink">
		<<if $enemyarousal gte (($enemyarousalmax / 10) * 7)>>
			squelching
		<<elseif $enemyarousal gte (($enemyarousalmax / 10) * 4)>>
			smashing
		<<else>>
			pressing
		<</if>>
		<<his>> pussy against yours.</span>
		<<set $vaginastate to "othervagina">><<set $NPCList[_n].vagina to "vagina">><<sex 20>><<set $speechvaginavagina to 1>>
	<<elseif $NPCList[_n].vagina is "vagina">>
		<<if $rng gte 1>>
			<<if $enemyarousal gte $enemyarousalmax * 0.8>>
				<<He>> thrusts <<his>> hips, <<if $npcSub>>instinctively<</if>> pounding your <<pussy>> against <<his>> with a violent intensity.
				<<if $vaginaWetness gte 45>>
					<span class="purple">Your juices mingle.</span><<purity -1>>
				<</if>>
			<<elseif $enemyarousal gte $enemyarousalmax * 0.6>>
				<<He>> thrusts <<his>> hips, <<if $npcSub>>instinctively<</if>> smashing <<his>> pussy against yours.
				<<if $vaginaWetness gte 45>>
					<span class="purple">Your juices mingle.</span><<purity -1>>
				<</if>>
			<<elseif $enemyarousal gte $enemyarousalmax * 0.4>>
				<<He>> thrusts <<his>> hips, rubbing and kneading your pussy with <<his>> own.
			<<elseif $enemyarousal gte $enemyarousalmax * 0.2>>
				<<He>> rubs and kneads your <<pussy>> with <<his>> own.
			<<else>>
				<<He>> kneads and kisses your <<pussy>> with <<his>> own.
			<</if>>
			<<sex 20>><<set $speechvaginavagina to 1>>
		<<else>>
			<span class="lblue"><<He>> moves <<his>> pussy away from yours.</span>
			<<set $vaginause to 0>><<set $NPCList[_n].vagina to 0>>
		<</if>>
	<</if>>
	<<if $NPCList[_n].vagina is "leftarm">>
		<<if $rng gte 1>>
			<<if !$npcSub>>
				<<He>> rubs <<his>> pussy against your fingers.
				<<submission 2>>
			<<else>>
				You rub <<his>> pussy with your fingers.
			<</if>>
		<<else>>
			<<He>> moves your hand away from <<his>> pussy.
			<<set $leftarm to 0>><<set $NPCList[_n].vagina to 0>><<set $leftactiondefault to "leftplay">>
		<</if>>
	<</if>>
	<<if $NPCList[_n].vagina is "rightarm">>
		<<if $rng gte 1>>
			<<if !$npcSub>>
				<<He>> rubs <<his>> pussy against your fingers.
				<<submission 2>>
			<<else>>
				You rub <<his>> pussy with your fingers.
			<</if>>
		<<else>>
			<<He>> moves your hand away from <<his>> pussy.
			<<set $rightarm to 0>><<set $NPCList[_n].vagina to 0>><<set $rightactiondefault to "rightplay">>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].vagina is "feet">>
		<<set $speechfeet to 1>>
		<<if $rng gte 1>>
			<<if !$npcSub>>
				<<He>> rubs <<his>> pussy against your feet.
				<<submission 2>>
			<<else>>
				You rub <<his>> pussy with feet.
			<</if>>
		<<else>>
			<<He>> moves your feet away from <<his>> pussy.
			<<set $feetuse to 0>><<set $NPCList[_n].vagina to 0>>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].vagina is "footjob">>
		<<if $rng gte 101>>
			<span class="blue"><<He>> stops pressing <<his>> foot against your <<genitals>>.</span>
			<<set $NPCList[_n].vagina to 0>>
			<<if $player.penisExist>>
				<<set $penisuse to 0>>
			<<else>>
				<<set $vaginause to 0>>
			<</if>>
		<<else>>
			<<if $player.penisExist>>
				<<He>> presses your penis against your stomach with <<his>> foot and rubs your glans between <<his>> toes.
				<<set $speechpenisfoot to 1>><<neutral 5>><<violence 1>>
			<<else>>
				<<He>> rubs <<his>> foot against your <<pussy>>.
				<<set $speechvaginafoot to 1>><<neutral 5>><<violence 1>>
			<</if>>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].vagina is "otherfrot">>
		<<if $rng gte 101>>
			<<if $condomUse is false>>
			<<elseif $condomUse is true and $player.condom is false and $parasite.penis.name is undefined>>
				<<equipCondom>>
				<span class="green"><<He>> puts a condom on your <<penis>>.</span>
			<</if>>
			<span class="blue"><<He>> shifts <<his>> ass and presses <<his>> anus against your <<penis>>.</span>
			<<set $penisuse to "otheranus">><<set $NPCList[_n].vagina to "otheranusentrance">><<set $penisstate to "otheranusentrance">><<set $speechotheranusentrance to 1>>
		<<else>>
			<<He>> rubs <<his>> ass against your <<penis>>.
			<<sex 5>>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].vagina is "otheranus">>
		<<if $rng gte 101>>
			<span class="purple"><<He>> moves <<his>> pelvis away, releasing your <<penis>> from <<his>> anus.</span>
			<<sex 30>><<set $NPCList[_n].vagina to "otheranusimminent">><<bruise penis>><<violence 1>><<set $penisstate to "otheranusimminent">><<set $speechotheranusimminent to 1>>
		<<elseif $rng gte 1>>
			<<if $enemyanger gte 100>>
				<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
					<<He>> continues to fuck your <<penis>> with <<his>> ass, <<his>> movements violent and erratic. Fluid from <<his>> pussy drools onto your length.
				<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
					<<He>> continues to ride you, your penis helpless as it's fucked.
				<<else>>
					<<He>> fucks your <<penis>> with rough movements, intent on showing you who's boss.
				<</if>>
			<<elseif $enemyanger gte 20>>
				<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
					You feel <<his>> ass twitch around your length as <<he>> fucks you.
				<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
					<<He>> continues to violate your <<penis>>, using you as a sex toy.
				<<else>>
					<<He>> fucks your <<penis>>, taking as much of you into <<his>> ass as <<he>> can.
				<</if>>
			<<else>>
				<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
					<<He>> continues riding your <<penis>>, <<his>> anus rhythmically pounding your length. <<His>> body jerks whenever you hit a sensitive spot.
				<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
					<<He>> continues riding your <<penis>>, <<his>> anus rhythmically pounding your length.
				<<else>>
					<<He>> rides your <<penis>> with steady movements.
				<</if>>
			<</if>>
			<<sex 30>><<bruise penis>><<violence 1>><<set $speechotheranuspenetrated to 1>>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].vagina is "otheranusimminent">>
		<<if $rng gte 101>>
			<span class="blue"><<He>> stops pressing <<his>> ass against your <<penis>>.</span>
			<<set $NPCList[_n].vagina to "otheranusentrance">><<set $penisstate to "otheranusentrance">><<set $speechotheranusentrance to 1>>
		<<elseif $rng gte 1>>
			<<if $nopenile is 0>>
				<<if (($penissize is -1 and $arousal lte ($arousalmax / 5) * 4) or ($penissize is -2 and $arousal lte ($arousalmax / 10) * 9))>>
					<<He>> presses <<his>> ass against the tip of your <<penis>>, trying to take you in. <span class="blue">But you don't have an erection.</span>
					<<set $speechpenissmall to 1>><<set $enemyanger += 5>>
				<<elseif $penissize lte 2 or $penissize is 3 and random(1, 100) gte 70 or $penissize gte 4 and random(1, 100) gte 90>>
					<<if $player.virginity.penile isnot true>>
						<span class="pink"><<He>> eases your <<penis>> into <<his>> ass, swallowing you to the base.</span>
						<<sex 30>><<set $NPCList[_n].vagina to "otheranus">><<penilestat>><<bruise penis>><<violence 1>><<raped>><<penisraped>><<set $penisstate to "otheranus">><<set $speechotheranuspenetrated to 1>>
					<<elseif $player.virginity.penile is true>>
						<span class="pink"> <<He>> eases your virgin penis into <<his>> ass,</span><span class="red"> separating your foreskin from your glans and forever robbing you of your purity.</span>
						<<sex 100>><<set $NPCList[_n].vagina to "otheranus">><<takeVirginity $NPCList[_n].fullDescription "penile">><<bruise penis>><<penilestat>><<violence 100>><<raped>><<penisraped>><<set $penisstate to "otheranus">><<set $speechpenisvirgin to 1>>
					<</if>>
					<<takeNPCVirginity $NPCList[_n].fullDescription "anal">>
					<<if $penissize gte 4>>
						<<He>> looks proud to have taken something so big.
					<</if>>
				<<else>>
					<<He>> presses <<his>> ass against the tip of your <<penis>>, trying to take you in. <span class="blue">Your girth proves too much.</span>
					<<set $speechpenisbig to 1>><<set $enemyanger += 5>>
				<</if>>
			<<else>>
				Respecting your wishes, <<he>> does not envelope your <<penis>> with <<his>> ass, instead teasing the tip of your glans.
				<<sex 15>><<set $speechotheranuswithhold to 1>>
			<</if>>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].vagina is "otheranusentrance">>
		<<if $rng gte 101>>
			<span class="lblue"><<He>> moves <<his>> ass away from your <<penis>>.</span>
			<<set $NPCList[_n].vagina to 0>><<set $penisuse to 0>><<set $penisstate to 0>>
		<<elseif $rng gte 1>>
			<<if $worn.over_lower.vagina_exposed is 0>>
				<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> ass against your <<penis>> through your $worn.over_lower.name.
				<<sex 5>><<set $worn.over_lower.integrity -= 10>><<set $speechotheranusentrance to 1>>
			<<elseif $worn.lower.vagina_exposed is 0>>
				<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> ass against your <<penis>> through your $worn.lower.name.
				<<sex 5>><<set $worn.lower.integrity -= 10>><<set $speechotheranusentrance to 1>>
			<<elseif $worn.lower.vagina_exposed is 1 and $worn.over_lower.vagina_exposed is 1>>
				<<set $rng to random(1, 100)>>
				<<if $worn.under_lower.vagina_exposed is 0>>
					<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> ass against your <<penis>> through your $worn.under_lower.name.
					<<sex 5>><<set $worn.under_lower.integrity -= 10>><<set $speechotheranusentrance to 1>>
				<<elseif $worn.under_lower.vagina_exposed is 1>>
					<<if $rng gte 51>>
						<<if $NPCList[_n].chastity.anus.includes("shield")>>
							<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].chastity.anus against your <<penis>><<if $worn.genitals.type.includes("chastity")>><<set $worn.genitals.integrity -= 10>> through your $worn.genitals.name<</if>>.
							<<sex 25>><<set $speechNPCChastity to 1>>
						<<elseif $worn.genitals.type.includes("chastity")>>
							<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> ass against your <<penis>> through your $worn.genitals.name.
							<<sex 25>><<set $worn.genitals.integrity -= 10>><<set $speechchastity to 1>>
						<<elseif $nopenile is 1 and !$npcSub>>
							<span class="purple"><<He>> presses <<his>> ass against your <<penis>>.</span>
							<<sex 20>><<set $NPCList[_n].vagina to "otheranusimminent">><<set $penisstate to "otheranusimminent">><<set $speechotheranusimminent to 1>>
						<<elseif $penisWetness gte ($penissize * 15) + random(1, 40) or random(1, 2) is 2 and !$npcSub>>
							<<He>> presses <<his>> ass against your <<penis>>. <<penis_lube_text>> <span class="pink">your tip is pushed into <<him>>, a thrust away from being enveloped.</span>
							<<sex 20>><<set $NPCList[_n].vagina to "otheranusimminent">><<set $penisstate to "otheranusimminent">><<set $speechotheranusimminent to 1>>
						<<elseif !$npcSub>>
							<<He>> presses <<his>> ass against your <<penis>>, <span class="blue">but fails to envelop you.</span> Your penis angles away and rubs between <<his>> cheeks.
							<<sex 5>><<set $speechotheranusimminent to 1>>
						<</if>>
					<<elseif $rng gte 1>>
						<<if !$worn.genitals.type.includes("chastity")>>
							<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> your <<penis>> between <<his>> cheeks.
							<<sex 10>>
						<<else>>
							<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> cheeks on your $worn.genitals.name.
							<<sex 10>>
						<</if>>
					<</if>>
				<</if>>
			<</if>>
		<</if>>
	<</if>>

	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].vagina is "facesit">>
		<<if $consensual is 0 and $underwater isnot 1>>
			<<if ($oxygen gt 150 and $enemyanger gte 30) or $enemyanger gte (($enemyangermax / 5) * 4)>>
				<<oxygen -150>>
				<<print either(
					"<<He>> covers your face with <<his>> pussy and ass.",
					"<<His>> pussy and ass press down on your face.",
					"<<He>> continues to sit down full weight on your face.",
					"<<He>> smothers you under <<him>>.",
					"<<His>> pussy and ass press down on your mouth and nose."
				)>>
				<<sex 1>><<bruise face>><<bruise face>>

				<<if $oxygen gte 900>>
					<span class="blue">You struggle for breath.</span>
					<<violence 3>>
				<<elseif $oxygen gte 600>>
					<span class="purple">You can't breathe!</span>
					<<violence 5>>
				<<elseif $oxygen gte 300>>
					<span class="pink">You feel light-headed.</span>
					<<violence 10>>
				<<elseif $oxygen gte 1>>
					<span class="pink">You see stars.</span>
					<<violence 20>>
				<<else>>
					<span class="red">You are suffocating.</span>
					<<violence 50>>
				<</if>>

			<<elseif $oxygen lte 900>>
				<<print either(
					"<<He>> lets you breathe in air from under <<him>>.",
					"<<He>> lifts off slightly, just enough to let you breathe a little.",
					"You are able to snatch in some small amount of air from under <<him>>."
				)>>
			<</if>>
		<</if>>

		<<if $analingusdisablegiving is "f" and
				($rng lt 5 or ($rng lt 10 and $enemyanger gte $enemyangermax / 10))>>
			<<He>> shifts <<his>> position on your face, pressing <<his>> ass onto your mouth.
			<<set $mouthstate to "anal">><<set $NPCList[_n].vagina to "facesitanal">>
			<<set $speechmouthotheranus to 1>>
		<<elseif $rng gte 0>>
			<<if $mouthactiondefault is "vaginalick" and random(1) is 0>>
				<<if !$npcSub>>
					<<He>> grinds <<his>> pussy into your mouth and tongue.
				<<else>>
					You lap and lick <<his>> pussy.
				<</if>>
			<<else>>
				<<if !$npcSub>>
					<<He>> rubs <<his>> pussy against your lips.
				<<else>>
					You continue to violate <<his>> pussy with your lips.
				<</if>>
			<</if>>

			<<if $enemyarousal gte (($enemyarousalmax / 5) * 3)>>
				You can taste <<his>> juices.
			<</if>>
			<<sex 3>><<set $speechfacesit to 1>>
		<<else>>
			<<He>> gets up off of your face.
			<<set $mouthuse to 0>><<set $mouthstate to 0>><<set $NPCList[_n].vagina to 0>>
		<</if>>
	<</if>>

	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].vagina is "facesitanal">>
		<<if $rng gt 10 or ($rng gt 5 and $enemyanger gte $enemyangermax / 10)>>
			<<if $enemyarousal gte (($enemyarousalmax / 5) * 3)>>
				<<He>> grinds <<his>> ass against your mouth.
			<<else>>
				<<He>> slowly moves <<his>> ass against your lips.
			<</if>>
			<<sex 3>><<set $speechmouthotheranus to 1>>
			<<if $mouthactiondefault is "anallick">>
				<<set $speechanallick to 1>>
			<<elseif $mouthactiondefault is "analkiss">>
				<<set $speechanalkiss to 1>>
			<</if>>
		<<elseif $rng gte 0>>
			<<He>> moves <<his>> ass away from your mouth, pressing <<his>> pussy down onto it as <<he>> changes <<his>> position.
			<<set $mouthstate to "vagina">><<set $NPCList[_n].vagina to "facesit">>
			<<set $speechfacesit to 1>>
		<<else>>
			<<He>> gets up off of your face.
			<<set $mouthuse to 0>><<set $mouthstate to 0>><<set $NPCList[_n].vagina to 0>>
		<</if>>
	<</if>>

	<<if $NPCList[_n].vagina is 0 and $NPCList[_n].penis is 0>>
		<<if random(0,1) is 0>>
			<<vaginainit>>
			<<penisinit>>
		<<else>>
			<<penisinit>>
			<<vaginainit>>
		<</if>>
	<<elseif $NPCList[_n].vagina is 0>>
		<<vaginainit>>
	<<elseif $NPCList[_n].penis is 0>>
		<<penisinit>>
	<</if>>

	<!-- MOUTH START -->

	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].mouth is "thigh">>
		<<He>> kisses and licks your thigh.
		<<neutral 5>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].mouth is "bottom">>
		<<He>> kisses and licks your <<bottom>>.
		<<neutral 5>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].mouth is "anus">>
		<<if $rng gte 101>>
			<span class="purple"><<He>> retracts <<his>> tongue from your anus.</span>
			<<sex 30>><<set $NPCList[_n].mouth to "anusimminent">><<bruise anus>><<violence 1>><<set $anusstate to "othermouthimminent">>
		<<elseif $rng gte 1>>
			<<if $enemyarousal lte ($enemyarousalmax / 5)>>
				<<He>> caresses your anus with <<his>> tongue.
				<<sex 30>><<bruise anus>><<violence 1>>
			<<elseif $enemyarousal lte (($enemyarousalmax / 5) * 2)>>
				<<His>> tongue probes inside your <<bottom>>.
				<<sex 30>><<bruise anus>><<violence 1>>
			<<elseif $enemyarousal lte (($enemyarousalmax / 5) * 3)>>
				<<He>> circles <<his>> tongue inside your <<bottom>>.
				<<sex 30>><<bruise anus>><<violence 1>>
			<<elseif $enemyarousal lte (($enemyarousalmax / 5) * 4)>>
				<<He>> presses <<his>> mouth firmly against your <<bottom>>, letting <<him>> push <<his>> tongue deeper into your anus.
				<<sex 30>><<bruise anus>><<violence 1>>
			<<else>>
				Repeatedly thrusting and retracting, <<he>> fucks your <<bottom>> with <<his>> tongue.
				<<sex 30>><<bruise anus>><<violence 1>>
			<</if>>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].mouth is "anusimminent">>
		<<if $rng gte 101>>
			<span class="blue"><<He>> stops pressing <<his>> tongue against your anus.</span>
			<<set $NPCList[_n].mouth to "anusentrance">><<set $anusstate to "othermouthentrance">>
		<<elseif $rng gte 1>>
			<<if $noanal is 0 and $worn.genitals.anus_exposed is 0>>
				<<He>> uses <<his>> tongue to lick around your $worn.genitals.name attempting to get past it.
				<<sex 25>><<set $worn.genitals.integrity -= 10>>
			<<elseif $noanal is 1 and $worn.genitals.anus_exposed is 0>>
				<<He>> uses <<his>> tongue to lick around your $worn.genitals.name.
				<<sex 30>>
			<<elseif $noanal is 0>>
				<<if $player.virginity.anal isnot true or $virginitytest isnot 1>>
					<span class="pink"><<He>> pushes <<his>> tongue into your anus.</span>
					<<sex 30>><<set $NPCList[_n].mouth to "anus">><<analstat>><<bruise anus>><<violence 1>><<set $anusstate to "othermouth">>
				<<elseif $player.virginity.anal is true>>
					<span class="pink"><<He>> pushes <<his>> tongue into your virgin anus,</span><span class="red"> violating you in a way you hadn't conceived of.</span>
					<<sex 100>><<set $NPCList[_n].mouth to "anus">><<takeVirginity $NPCList[_n].fullDescription "anal">><<bruise anus>><<analstat>><<violence 100>><<raped>><<anusraped>><<set $anusstate to "othermouth">>
				<</if>>
			<<else>>
				Respecting your wishes, <<he>> does not penetrate your <<bottom>> with <<his>> tongue, instead licking your anus.
				<<sex 15>>
			<</if>>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].mouth is "anusentrance">>
		<<if $rng gte 101>>
			<span class="lblue"><<He>> moves <<his>> head away from your <<bottom>>.</span>
			<<set $NPCList[_n].mouth to 0>><<set $anususe to 0>><<set $anusstate to 0>>
			<<if $NPCList[_n].vagina is "othermouth">>
				<<set $NPCList[_n].vagina to 0>>
			<</if>>
			<<if $NPCList[_n].penis is "othermouth">>
				<<set $NPCList[_n].penis to 0>>
			<</if>>
		<<elseif $rng gte 1>>
			<<if $worn.over_lower.anus_exposed is 0>>
				<<He>> circles <<his>> tongue around your anus through your $worn.over_lower.name.
				<<sex 5>><<set $worn.over_lower.integrity -= 10>>
			<<elseif $worn.lower.anus_exposed is 0>>
				<<He>> circles <<his>> tongue around your anus through your $worn.lower.name.
				<<sex 5>><<set $worn.lower.integrity -= 10>>
			<<elseif $worn.lower.anus_exposed is 1 and $worn.over_lower.anus_exposed is 1>>
				<<set $rng to random(1, 100)>>
				<<if $worn.under_lower.anus_exposed is 0>>
					<<He>> circles <<his>> tongue around your anus through your $worn.under_lower.name.
					<<sex 5>><<set $worn.under_lower.integrity -= 10>>
				<<elseif $worn.genitals.anus_exposed is 0>>
					<<He>> prods your $worn.genitals.name with <<his>> tongue.
					<<sex 5>><<set $worn.genitals.integrity -= 10>>
				<<elseif $worn.under_lower.anus_exposed is 1 and $worn.genitals.anus_exposed is 1>>
					<<if $rng gte 71>>
						<<if $noanal is 0 and $worn.genitals.anal_shield is 1>>
							<span class="purple"><<He>> presses <<his>> tongue against your $worn.genitals.name near your anus.</span>
							<<sex 20>><<set $NPCList[_n].mouth to "anusimminent">><<set $anusstate to "othermouthimminent">>
						<<elseif $noanal is 1>>
							<span class="purple"><<He>> presses <<his>> tongue against your anus.</span>
							<<sex 20>><<set $NPCList[_n].mouth to "anusimminent">><<set $anusstate to "othermouthimminent">>
						<<else>>
							<span class="purple"><<He>> presses <<his>> tongue against your anus, preparing to penetrate you.</span>
							<<sex 20>><<set $NPCList[_n].mouth to "anusimminent">><<set $anusstate to "othermouthimminent">>
						<</if>>
					<<elseif $rng gte 1>>
						<<He>> kisses and licks your <<bottom>>.
						<<sex 10>>
					<</if>>
				<</if>>
			<</if>>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].mouth is "vagina">>
		<<if $rng gte 101>>
			<span class="purple"><<He>> retracts <<his>> tongue from your <<pussy>>.</span>
			<<sex 30>><<set $NPCList[_n].mouth to "vaginaimminent">><<bruise vagina>><<violence 1>><<set $vaginastate to "othermouthimminent">>
		<<elseif $rng gte 1>>
			<<if $enemyarousal lte ($enemyarousalmax / 5)>>
				<<He>> caresses your vagina with <<his>> tongue.
				<<sex 30>><<bruise vagina>><<violence 1>>
			<<elseif $enemyarousal lte (($enemyarousalmax / 5) * 2)>>
				<<He>> presses down on your <<clit>> with <<his>> teeth while exploring your vagina with <<his>> tongue.
				<<sex 30>><<bruise vagina>><<violence 1>>
			<<elseif $enemyarousal lte (($enemyarousalmax / 5) * 3)>>
				<<He>> circles <<his>> tongue around your vagina.
				<<sex 30>><<bruise vagina>><<violence 1>>
			<<elseif $enemyarousal lte (($enemyarousalmax / 5) * 4)>>
				<<He>> presses <<his>> mouth firmly against your <<pussy>>, then pushes <<his>> tongue deeper into your vagina. <<He>> slowly pulls out again, then takes a deep breath.
				<<sex 30>><<bruise vagina>><<violence 1>>
			<<else>>
				Repeatedly thrusting and retracting, <<he>> fucks your <<pussy>> with <<his>> tongue.
				<<sex 30>><<bruise vagina>><<violence 1>>
			<</if>>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].mouth is "vaginaimminent">>
		<<if $rng gte 101>>
			<span class="blue"><<He>> stops pressing <<his>> tongue against your <<pussy>>.</span>
			<<set $NPCList[_n].mouth to "vaginaentrance">><<set $vaginastate to "othermouthentrance">>
		<<elseif $rng gte 1>>
			<<if $novaginal is 0 and $worn.genitals.type.includes("chastity")>>
				<<He>> licks around your $worn.genitals.name, attempting to get past it.
				<<sex 25>><<set $worn.genitals.integrity -= 10>>
			<<elseif $novaginal is 1 and $worn.genitals.type.includes("chastity")>>
				<<He>> licks around your $worn.genitals.name.
				<<sex 30>>
			<<elseif $novaginal is 0>>
				<<if $player.virginity.vaginal isnot true or $virginitytest isnot 1>>
					<span class="pink"><<He>> pushes <<his>> tongue between your <<pussy>> lips.</span>
					<<sex 30>><<set $NPCList[_n].mouth to "vagina">><<vaginalstat>><<bruise vagina>><<violence 1>><<set $vaginastate to "othermouth">>
				<<elseif $player.virginity.vaginal is true>>
					<span class="pink"><<He>> pushes <<his>> tongue into your virgin pussy,</span><span class="red"> breaking your hymen and forever robbing you of your purity.</span>
					<<sex 100>><<set $NPCList[_n].mouth to "vagina">><<takeVirginity $NPCList[_n].fullDescription "vaginal">><<bruise vagina>><<vaginalstat>><<violence 100>><<raped>><<vaginaraped>><<set $vaginastate to "othermouth">>
				<</if>>
			<<else>>
				Respecting your wishes, <<he>> does not penetrate your <<pussy>> with <<his>> tongue, instead running <<his>> tongue up and down your labia.
				<<sex 15>>
			<</if>>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].mouth is "vaginaentrance">>
		<<if $rng gte 101>>
			<span class="lblue"><<He>> moves <<his>> head away from your <<pussy>>.</span>
			<<set $NPCList[_n].mouth to 0>><<set $vaginause to 0>><<set $vaginastate to 0>>
			<<if $NPCList[_n].vagina is "othermouth">>
				<<set $NPCList[_n].vagina to 0>>
			<</if>>
			<<if $NPCList[_n].penis is "othermouth">>
				<<set $NPCList[_n].penis to 0>>
			<</if>>
		<<elseif $rng gte 1>>
			<<if $worn.over_lower.vagina_exposed is 0>>
				<<He>> traces the outline of your <<pussy>> with <<his>> tongue through your $worn.over_lower.name.
				<<sex 5>><<set $worn.over_lower.integrity -= 10>>
			<<elseif $worn.lower.vagina_exposed is 0>>
				<<He>> traces the outline of your <<pussy>> with <<his>> tongue through your $worn.lower.name.
				<<sex 5>><<set $worn.lower.integrity -= 10>>
			<<elseif $worn.lower.vagina_exposed is 1 and $worn.over_lower.vagina_exposed is 1>>
				<<set $rng to random(1, 100)>>
				<<if $worn.under_lower.vagina_exposed is 0>>
					<<He>> traces the outline of your <<pussy>> with <<his>> tongue through your $worn.under_lower.name.
					<<sex 5>><<set $worn.under_lower.integrity -= 10>>
				<<elseif $worn.under_lower.vagina_exposed is 1>>
					<<if $rng gte 71>>
						<<if $novaginal is 0 and $worn.genitals.type.includes("chastity")>>
							<span class="purple"><<He>> presses <<his>> lips against your $worn.genitals.name, near your <<pussy>>.</span>
							<<sex 20>><<set $NPCList[_n].mouth to "vaginaimminent">><<set $vaginastate to "othermouthimminent">>
						<<elseif $novaginal is 1>>
							<span class="purple"><<He>> presses <<his>> lips against your <<pussy>>.</span>
							<<sex 20>><<set $NPCList[_n].mouth to "vaginaimminent">><<set $vaginastate to "othermouthimminent">>
						<<else>>
							<span class="purple"><<He>> presses <<his>> lips against your <<pussy>>, preparing to fuck you with <<his>> tongue.</span>
							<<sex 20>><<set $NPCList[_n].mouth to "vaginaimminent">><<set $vaginastate to "othermouthimminent">>
						<</if>>
					<<elseif $rng gte 1>>
						<<if !$worn.genitals.type.includes("chastity")>>
							<<He>> blows on your <<clit>> and runs <<his>> tongue around your labia.
							<<sex 10>>
						<<else>>
							<<He>> stares at your $worn.genitals.name.
							<<sex 5>>
						<</if>>
					<</if>>
				<</if>>
			<</if>>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].mouth is "penis">>
		<<if $rng gte 101>>
			<span class="purple"><<He>> moves <<his>> head back, releasing your <<penis>> from <<his>> mouth.</span>
			<<sex 30>><<set $NPCList[_n].mouth to "penisimminent">><<bruise penis>><<violence 1>><<set $penisstate to "othermouthimminent">>
		<<elseif $rng gte 1>>
			<<if $enemyarousal lte ($enemyarousalmax / 5)>>
				<<He>> slowly caresses your shaft with <<his>> tongue.
				<<sex 30>><<bruise penis>><<violence 1>>
			<<elseif $enemyarousal lte (($enemyarousalmax / 5) * 2)>>
				Eyes fixed on your face, <<he>> wraps <<his>> tongue around your <<penis>> and sucks.
				<<sex 30>><<bruise penis>><<violence 1>>
			<<elseif $enemyarousal lte (($enemyarousalmax / 5) * 3)>>
				<<He>> squeezes <<his>> lips around your <<penis>>, and circles <<his>> tongue around your glans.
				<<sex 30>><<bruise penis>><<violence 1>>
			<<elseif $enemyarousal lte (($enemyarousalmax / 5) * 4)>>
				<<He>> takes you deeper into <<his>> mouth, until your <<penis>> disappears inside <<him>> completely. <<He>> slowly pushes you out again, then takes a deep breath.
				<<sex 30>><<bruise penis>><<violence 1>>
			<<else>>
				<<He>> repeatedly swallows and expels your <<penis>>, fucking you with <<his>> mouth.
				<<sex 30>><<bruise penis>><<violence 1>>
			<</if>>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].mouth is "penisimminent">>
		<<if $rng gte 101>>
			<span class="blue"><<He>> stops pressing <<his>> lips against your <<penis>>.</span>
			<<set $NPCList[_n].mouth to "penisentrance">><<set $penisstate to "othermouthentrance">>
		<<elseif $rng gte 1>>
			<<if $nopenile is 0 and $worn.genitals.type.includes("chastity")>>
				<<He>> licks around your $worn.genitals.name, near your <<penis>>, attempting to get past it.
				<<sex 25>><<set $worn.genitals.integrity -= 10>>
			<<elseif $nopenile is 1 and $worn.genitals.type.includes("chastity")>>
				<<He>> licks around your $worn.genitals.name, near your <<penis>>.
				<<sex 30>>
			<<elseif $nopenile is 0>>
				<<if $player.virginity.penile isnot true or $virginitytest isnot 1>>
					<span class="pink"><<He>> pushes <<his>> lips against your <<penis>>, taking you into <<his>> mouth.</span>
					<<sex 30>><<set $NPCList[_n].mouth to "penis">><<penilestat>><<bruise penis>><<violence 1>><<set $penisstate to "othermouth">>
				<<elseif $player.virginity.penile is true>>
					<span class="pink"><<He>> pushes <<his>> lips against your virgin penis, taking you into <<his>> mouth,</span><span class="red"> separating your foreskin from your glans and forever robbing you of your purity.</span>
					<<sex 100>><<set $NPCList[_n].mouth to "penis">><<takeVirginity $NPCList[_n].fullDescription "penile">><<bruise penis>><<penilestat>><<violence 100>><<raped>><<penisraped>><<set $penisstate to "othermouth">>
				<</if>>
				<<takeNPCVirginity $NPCList[_n].fullDescription "oral">>
			<<else>>
				Respecting your wishes, <<he>> does not envelope your <<penis>> with <<his>> mouth, instead kissing the tip of your glans.
				<<sex 15>>
			<</if>>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].mouth is "penisentrance">>
		<<if $rng gte 101>>
			<span class="lblue"><<He>> moves <<his>> head away from your <<penis>>.</span>
			<<set $NPCList[_n].mouth to 0>><<set $penisuse to 0>><<set $penisstate to 0>>
			<<if $NPCList[_n].vagina is "othermouth">>
				<<set $NPCList[_n].vagina to 0>>
			<</if>>
			<<if $NPCList[_n].penis is "othermouth">>
				<<set $NPCList[_n].penis to 0>>
			<</if>>
		<<elseif $rng gte 1>>
			<<if $worn.over_lower.vagina_exposed is 0>>
				<<He>> traces the outline of your <<penis>> with <<his>> tongue through your $worn.over_lower.name.
				<<sex 5>><<set $worn.over_lower.integrity -= 10>>
			<<elseif $worn.lower.vagina_exposed is 0>>
				<<He>> traces the outline of your <<penis>> with <<his>> tongue through your $worn.lower.name.
				<<sex 5>><<set $worn.lower.integrity -= 10>>
			<<elseif $worn.lower.vagina_exposed is 1 and $worn.over_lower.vagina_exposed is 1>>
				<<set $rng to random(1, 100)>>
				<<if $worn.under_lower.vagina_exposed is 0>>
					<<He>> traces the outline of your <<penis>> with <<his>> tongue through your $worn.under_lower.name.
					<<sex 5>><<set $worn.under_lower.integrity -= 10>>
				<<elseif $worn.under_lower.vagina_exposed is 1>>
					<<if $rng gte 71>>
						<<if $worn.genitals.type.includes("chastity")>>
							<span class="purple"><<He>> tries to wriggle <<his>> tongue into your $worn.genitals.name, eager to taste your <<penis>>.</span>
							<<sex 20>>
						<<elseif $nopenile is 1>>
							<span class="purple"><<He>> presses <<his>> lips against your <<penis>>.</span>
							<<sex 20>><<set $NPCList[_n].mouth to "penisimminent">><<set $penisstate to "othermouthimminent">>
						<<else>>
							<span class="purple"><<He>> presses <<his>> lips against your <<penis>>, preparing to take you in <<his>> mouth proper.</span>
							<<sex 20>><<set $NPCList[_n].mouth to "penisimminent">><<set $penisstate to "othermouthimminent">>
						<</if>>
					<<elseif $rng gte 1>>
						<<if !$worn.genitals.type.includes("chastity")>>
							<<He>> blows on and licks the tip of your <<penis>>.
							<<sex 10>>
						<<else>>
							<<He>> stares at your $worn.genitals.name.
							<<sex 5>>
						<</if>>
					<</if>>
				<</if>>
			<</if>>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].mouth is "kiss">>
		<<if $speechvaginavirgin isnot 1 and $speechpenisvirgin isnot 1 and $speechanusvirgin isnot 1 and $speechmouthvirgin isnot 1>>
			<<if $rng gte 101>>
				<span class="lblue"><<He>> pulls <<his>> mouth away from yours.</span>
				<<set $NPCList[_n].mouth to 0>><<set $mouthuse to 0>><<set $mouthstate to 0>>
				<<set $NPCList[_n].location.head to 0>>
			<<else>>
				<<if $npcSub>>
					<<He>> nervously follows your lead, allowing you to explore <<his>> mouth with your tongue.
				<<elseif $enemyanger lte 20>>
					<<He>> explores your mouth with <<his>> tongue.
					<<sex 2>>
				<<else>>
					<<He>> thrusts <<his>> tongue deep into your mouth.
					<<violence 1>>
				<</if>>
			<</if>>
		<<else>>
			<span class="lblue"><<He>> pulls <<his>> mouth away from yours.</span>
			<<set $mouthuse to 0>><<set $NPCList[_n].mouth to 0>><<set $mouthstate to 0>>
			<<set $NPCList[_n].location.head to 0>>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].mouth is "kissimminent">>
		<<if $speechvaginavirgin isnot 1 and $speechpenisvirgin isnot 1 and $speechanusvirgin isnot 1 and $speechmouthvirgin isnot 1>>
			<<if $rng gte 101>>
				<span class="lblue"><<He>> pulls <<his>> mouth away from yours.</span>
				<<set $NPCList[_n].mouth to 0>><<set $mouthuse to 0>><<set $mouthstate to 0>>
				<<set $NPCList[_n].location.head to 0>>
			<<elseif $rng lte 100>>
				<<He>> pushes <<his>> tongue between your lips.
				<<set $NPCList[_n].mouth to "kiss">><<set $mouthstate to "kiss">><<sex 2>>
			<<else>>
				<<if $enemyanger lte 20>>
					<<He>> gently probes your lips with <<his>> tongue.
					<<sex 2>>
				<<else>>
					<<He>> bites and toys with your lips.
					<<violence 1>>
				<</if>>
			<</if>>
		<<else>>
			<span class="lblue"> <<He>> pulls <<his>> mouth away from yours.</span>
			<<set $mouthuse to 0>><<set $NPCList[_n].mouth to 0>><<set $mouthstate to 0>>
			<<set $NPCList[_n].location.head to 0>>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].mouth is "kissentrance">>
		<<if $speechvaginavirgin isnot 1 and $speechpenisvirgin isnot 1 and $speechanusvirgin isnot 1 and $speechmouthvirgin isnot 1>>
			<<if $rng gte 101>>
				<span class="lblue"><<He>> pulls <<his>> mouth away from yours.</span>
				<<set $NPCList[_n].mouth to 0>><<set $mouthuse to 0>><<set $mouthstate to 0>>
				<<set $NPCList[_n].location.head to 0>>
			<<elseif $rng lte 100>>
				<<He>> pulls you closer and presses your lips together in a kiss.
				<<if $player.virginity.kiss is true>>
					<<set $speechkissvirgin to 1>>
					<<if $npcrow.includes(_n)>>
						<<takeKissVirginityNamed `$npc[$npcrow.indexOf(_n)]`>>
					<<else>>
						<<takeKissVirginity $NPCList[_n].fullDescription `($consensual is 1?"":"rape")`>>
					<</if>>
				<</if>>
				<<set $NPCList[_n].mouth to "kissimminent">><<set $mouthstate to "kissimminent">><<sex 2>>
			<<else>>
				<<if $enemyanger lte 20>>
					<<He>> gently brushes <<his>> lips against yours.
					<<sex 1>>
				<<else>>
					<<He>> bites your lower lip.
					<<violence 1>>
				<</if>>
			<</if>>
		<<else>>
			<span class="lblue"><<He>> pulls <<his>> mouth away from yours.</span>
			<<set $mouthuse to 0>><<set $NPCList[_n].mouth to 0>><<set $mouthstate to 0>>
			<<set $NPCList[_n].location.head to 0>>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].mouth is "chest">>
		<<if $speechvaginavirgin isnot 1 and $speechpenisvirgin isnot 1 and $speechanusvirgin isnot 1 and $speechmouthvirgin isnot 1>>
			<<if $enemyanger gte 100>>
				<<if $milk_amount gte 1>>
					<<He>> sucks your <<nipple>>. <<Hes>> rough, biting and squeezing. Milk leaks from the tip.
					<<breastfeed>>
					<<violence 5>>
				<<else>>
					<<He>> sucks your <<nipple>>. <<Hes>> rough, biting and squeezing. Despite <<his>> efforts, no milk comes out. You've been sucked dry.
					<<milkvolume 1>>
					<<set $cheststate to "chestimminent">><<set $NPCList[_n].mouth to "chestimminent">>
					<<violence 3>>
				<</if>>
			<<else>>
				<<if $milk_amount gte 1>>
					<<He>> continues to suck your <<nipple>>. Milk leaks from the tip.
					<<breastfeed>>
					<<sex 5>>
				<<else>>
					<<He>> continues to suck your <<nipple>>, but no milk comes out. You've been sucked dry.
					<<milkvolume 1>>
					<<set $cheststate to "chestimminent">><<set $NPCList[_n].mouth to "chestimminent">>
					<<sex 3>>
				<</if>>
			<</if>>
		<<else>>
			<span class="lblue"><<He>> pulls <<his>> mouth away from your chest.</span>
			<<set $chestuse to 0>><<set $cheststate to 0>><<set $NPCList[_n].mouth to 0>>
			<<set $NPCList[_n].location.head to 0>>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].mouth is "chestimminent">>
		<<if $speechvaginavirgin isnot 1 and $speechpenisvirgin isnot 1 and $speechanusvirgin isnot 1 and $speechmouthvirgin isnot 1>>
			<<if $lactating is 1 and $breastfeedingdisable is "f" and $milk_amount gte 1>>
				<span class="pink"><<He>> takes your <<nipple>> into <<his>> mouth. You feel milk leak from your tip.</span>
				<<breastfeed>>
				<<set $cheststate to "chest">><<set $NPCList[_n].mouth to "chest">><<sex 5>>
				<<milkvolume 1>><<set $enemyanger -= 10>>
			<<else>>
				<<if random(1, 100) gte 81>>
					<<He>> pulls <<his>> head away from your chest.
					<<set $chestuse to 0>><<set $cheststate to 0>><<set $NPCList[_n].mouth to 0>>
				<<else>>
					<<if $enemyanger gte 100>>
						<<He>> kneads your <<nipple>> between <<his>> teeth.
						<<violence 3>>
					<<else>>
						<<He>> sucks your <<nipple>> while <<his>> tongue works the tip.
						<<sex 3>>
					<</if>>
					<<milkvolume 1>>
				<</if>>
			<</if>>
		<<else>>
			<span class="lblue"><<He>> pulls <<his>> mouth away from your chest.</span>
			<<set $chestuse to 0>><<set $cheststate to 0>><<set $NPCList[_n].mouth to 0>>
			<<set $NPCList[_n].location.head to 0>>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<if $NPCList[_n].mouth is "chestentrance">>
		<<if $speechvaginavirgin isnot 1 and $speechpenisvirgin isnot 1 and $speechanusvirgin isnot 1 and $speechmouthvirgin isnot 1>>
			<<if $enemyanger gte 100>>
				<<He>> bites your <<nipple>>, hard enough to hurt.
				<<set $NPCList[_n].mouth to "chestimminent">><<set $cheststate to "chestimminent">>
				<<violence 3>>
			<<else>>
				<<He>> presses the tip of <<his>> tongue against your <<nipple>>, licking and teasing.
				<<set $NPCList[_n].mouth to "chestimminent">><<set $cheststate to "chestimminent">>
				<<sex 3>>
			<</if>>
			<<milkvolume 1>>
		<<else>>
			<span class="lblue"><<He>> pulls <<his>> mouth away from your chest.</span>
			<<set $chestuse to 0>><<set $cheststate to 0>><<set $NPCList[_n].mouth to 0>>
			<<set $NPCList[_n].location.head to 0>>
		<</if>>
	<</if>>
	<<set $rng to random(1, 100)>>
	<<namedNpcComments $NPCList[_n].fullDescription>>
	<<if ($NPCList[_n].mouth is 0 or $NPCList[_n].mouth is "speech_only") and $speechdisable isnot 1 and _noNameComment>>
		<<if $combatgoal is "strip">>
			<<set $rng to random(1, 100)>>
			<<if $rng lte 25>>
				<<if $enemyanger lte 60>>
					<<He>> speaks.
					"<<print either("Let me take all these clothes off.",
					"Let's get you naked.",
					"I think you enjoy being stripped naked!",
					"You don't need clothes.",
					"You need to be naked!")>>"
				<<else>>
					<<He>> speaks.
					"<<print either("I'll rip your clothes off if I need to!",
					"I'll get you naked one way or another!",
					"I want your clothes gone!",
					"You like being stripped naked, don't you!",
					"You don't deserve clothes.",
					"I want you nude!")>>"
				<</if>>
			<</if>>
		<<elseif $speechvaginavirgin is 1>>
			<<if $enemyanger lte 60>>
				<<He>> speaks. "You were a virgin! I can't believe my luck!"
			<<else>>
				<<He>> speaks. "I felt your hymen tear bitch. Something to remember me by."
			<</if>>
		<<elseif $speechpenisvirgin is 1>>
			<<if $enemyanger lte 60>>
				<<He>> speaks. "AHH! This was your first time wasn't it? It feels so good!"
			<<else>>
				<<He>> speaks. "How's it feel to have your virgin dick broken in? Feels amazing for me."
			<</if>>
		<<elseif $speechanusvirgin is 1>>
			<<if $enemyanger lte 60>>
				<<He>> speaks. "It's so tight! This must be the first time your ass has been used like this."
			<<else>>
				<<He>> speaks. "It's so tight! This must be the first time your ass has been used like this. I've got plenty more work to do before you're properly broken in."
			<</if>>
		<<elseif $speechmouthvirgin is 1>>
			<<if $enemyanger lte 60>>
				<<He>> speaks. "Is this the first time you've tasted dick?"
			<<else>>
				<<He>> speaks. "Is this the first time you've tasted dick? You'll be a cum-addicted cock slave soon."
			<</if>>
		<<elseif $speechspray is 1>>
			<<sprayspeech>>
		<<elseif $speechcum is 1 and $rng gte 61 and $speechorgasmrepeat lte 1 and $speechorgasmcount lte 6>>
			<<cumspeech>>
		<<elseif $rng gte 91>>
			<<if not $gloryhole>>
				<<basespeech>><<neutral 1>>
			<<else>>
				<<basegloryholespeech>><<neutral 1>>
			<</if>>
		<<elseif $rng gte 61>>
			<<combatspeech _n>><<neutral 1>>
		<<elseif $rng gte 41 and !$gloryhole>>
			<<clothesspeech>>
		<<elseif !$gloryhole>>
			<<set $rng to random(1, 100)>>
			<<if $enemyanger + $rng lte 20>>
				<<He>> <<admires>> your body.
				<<neutral 1>>
			<<elseif $enemyanger + $rng lte 25>>
				<<if $position is "wall" and $walltype isnot "front">>
					<<He>> <<admires>> your helpless <<bottom>>.
					<<neutral 1>>
					<<if random(1, 2) is 2>>
						<<bodypart_admire right_bottom>>
					<<else>>
						<<bodypart_admire left_bottom>>
					<</if>>
				<<else>>
					<<He>> <<admires>> your hair.
					<<neutral 1>>
					<<if random(1, 2) is 2>>
						<<bodypart_admire left_shoulder>>
					<<else>>
						<<bodypart_admire right_shoulder>>
					<</if>>
				<</if>>
			<<elseif $enemyanger + $rng lte 30>>
				<<if $position is "wall" and $walltype isnot "front">>
					<<He>> <<admires>> your helpless hips.
					<<neutral 1>>
					<<bodypart_admire pubic>>
				<<else>>
					<<He>> <<admires>> your chest.
					<<neutral 1>>
					<<bodypart_admire breasts>>
				<</if>>
			<<elseif $enemyanger + $rng lte 35>>
				<<if $walltype is "front">>
					<<He>> <<admires>> your face.
					<<neutral 1>>
					<<if random(1, 2) is 2>>
						<<bodypart_admire left_cheek>>
					<<else>>
						<<bodypart_admire right_cheek>>
					<</if>>
				<<else>>
					<<He>> <<admires>> your legs.
					<<neutral 1>>
					<<if random(1, 2) is 2>>
						<<bodypart_admire left_thigh>>
					<<else>>
						<<bodypart_admire right_thigh>>
					<</if>>
				<</if>>
			<<elseif $enemyanger + $rng lte 40>>
				<<if $position is "wall" and $walltype isnot "front">>
					<<He>> <<admires>> your helpless legs.
					<<neutral 1>>
					<<if random(1, 2) is 2>>
						<<bodypart_admire left_thigh>>
					<<else>>
						<<bodypart_admire right_thigh>>
					<</if>>
				<<elseif $chestuse is 0 and $NPCList[_n].location.genitals isnot "head" and $NPCList[_n].location.head isnot "head" and $NPCList[_n].location.head isnot "genitals">>
					<<set $NPCList[_n].mouth to "chestentrance">><<set $chestuse to "mouth">><<set $cheststate to "mouthentrance">>
					<span class="blue"><<He>> moves <<his>> head to your chest.</span>
					<<neutralbreast 1>>
					<<bodypart_admire breasts>>
					<<set $NPCList[_n].location.head to "head">>
				<<else>>
					<<He>> leers at your <<breasts>>.
				<</if>>
			<<elseif $enemyanger + $rng lte 45>>
				<<if $position is "wall" and $walltype isnot "front">>
					<<He>> kisses your helpless thighs.
					<<neutral 3>>
					<<if random(1, 2) is 2>>
						<<bodypart_admire left_thigh>>
					<<else>>
						<<bodypart_admire right_thigh>>
					<</if>>
				<<else>>
					<<He>> kisses you on the forehead.
					<<neutral 3>>
					<<bodypart_admire forehead>>
				<</if>>
			<<elseif $enemyanger + $rng lte 50>>
				<<if $position is "wall" and $walltype isnot "front">>
					<<He>> kisses you on the hips.
					<<neutral 3>>
					<<if random(1, 2) is 2>>
						<<bodypart_admire left_bottom>>
					<<else>>
						<<bodypart_admire right_bottom>>
					<</if>>
				<<elseif $NPCList[_n].penis is "mouth" or $NPCList[_n].vagina is "mouth">>
					<<He>> leans back, savouring the feel of your mouth on <<his>> genitals.
					<<neutral 10>>
				<<else>>
					<<He>> kisses you on the cheek.
					<<neutral 3>>
					<<if random(1, 2) is 2>>
						<<bodypart_admire left_cheek>>
					<<else>>
						<<bodypart_admire right_cheek>>
					<</if>>
				<</if>>
			<<elseif $enemyanger + $rng lte 55>>
				<<if $position is "wall" and $walltype isnot "front">>
					<<He>> licks your helpless thighs.
					<<neutral 3>>
					<<if random(1, 2) is 2>>
						<<bodypart_admire left_thigh>>
					<<else>>
						<<bodypart_admire right_thigh>>
					<</if>>
				<<elseif $NPCList[_n].penis is "mouth" or $NPCList[_n].vagina is "mouth">>
					<<He>> leans back, savouring the feel of your mouth on <<his>> genitals.
					<<neutral 10>>
				<<else>>
					<<He>> kisses your neck.
					<<neutral 3>>
					<<if random(1, 2) is 2>>
						<<bodypart_admire breasts>>
					<<else>>
						<<bodypart_admire breasts>>
					<</if>>
				<</if>>
			<<elseif $enemyanger + $rng lte 60>>
				<<if $position is "wall" and $walltype isnot "front">>
					<<He>> licks your helpless hips.
					<<neutral 3>>
					<<if random(1, 2) is 2>>
						<<bodypart_admire left_bottom>>
					<<else>>
						<<bodypart_admire right_bottom>>
					<</if>>
				<<else>>
					<<cheeklick _n>>
				<</if>>
			<<elseif $enemyanger + $rng lte 80>>
				<<neutral 10>>
				<<if $position is "wall" and $walltype isnot "front">>
					<<He>> licks your helpless legs.
					<<neutral 3>>
					<<if random(1, 2) is 2>>
						<<bodypart_admire left_thigh>>
					<<else>>
						<<bodypart_admire right_thigh>>
					<</if>>
				<<else>>
					<<if $mouthuse is 0>>
						<<if $NPCList[_n].penis is "chest">>
							<<combatspeech _n>><<neutral 1>>
						<<elseif $NPCList[_n].location.genitals isnot "head">>
							<span class="blue"><<He>> moves <<his>> lips close to yours, about to kiss.</span>
							<<set $mouthuse to "kiss">><<set $mouthstate to "kissentrance">><<set $NPCList[_n].mouth to "kissentrance">><<sex 1>>
							<<set $NPCList[_n].location.head = "head">>
						<</if>>
					<<else>>
						<<cheeklick _n>>
					<</if>>
				<</if>>
			<<elseif $enemyanger + $rng lte 84 and $anususe is 0 and $analingusdisablereceiving is "f" and $NPCList[_n].location.head is 0 and $NPCList[_n].location.genitals isnot "genitals" and $walltype isnot "front">>
				<<neutral 10>>
				<<if $NPCList[_n].location.genitals is "head">>
					<span class="blue">You feel <<him>> lean forward along your body, then you feel <<his>> breath on your <<bottom>>.</span>
				<<else>>
					<span class="blue"><<He>> kneels behind you. You feel <<his>> breath on your <<bottom>>.</span>
				<</if>>
				<<set $anususe to "othermouth">><<set $anusstate to "othermouthentrance">><<set $NPCList[_n].mouth to "anusentrance">>
				<<sex 1>><<set $NPCList[_n].location.head to "genitals">>
			<<elseif $enemyanger + $rng lte 92 and $NPCList[_n].location.head is 0 and $NPCList[_n].location.genitals isnot "genitals" and $walltype isnot "front">>
				<<neutral 10>>
				<<if $vaginause is 0 and $NPCList[_n].vagina is 0 and $player.vaginaExist>>
					<span class="blue"><<He>> kneels beside you. You feel <<his>> breath on your <<pussy>>.</span>
					<<set $vaginause to "othermouth">><<set $vaginastate to "othermouthentrance">><<set $NPCList[_n].mouth to "vaginaentrance">>
					<<set $NPCList[_n].vagina to "othermouth">><<sex 1>><<set $NPCList[_n].location.head to "genitals">>
				<<elseif $vaginause is 0 and $NPCList[_n].penis is 0 and $player.vaginaExist>>
					<span class="blue"><<He>> kneels beside you. You feel <<his>> breath on your <<pussy>>.</span>
					<<set $vaginause to "othermouth">><<set $vaginastate to "othermouthentrance">><<set $NPCList[_n].mouth to "vaginaentrance">>
					<<set $NPCList[_n].penis to "othermouth">><<sex 1>><<set $NPCList[_n].location.head to "genitals">>
				<<elseif $vaginause is 0 and $NPCList[_n].vagina is "facesit" and $player.vaginaExist>>
					<span class="blue">You feel <<him>> lean forward along your body, then feel <<his>> breath on your <<pussy>>.</span>
					<<set $vaginause to "othermouth">><<set $vaginastate to "othermouthentrance">><<set $NPCList[_n].mouth to "vaginaentrance">>
					<<sex 1>><<set $NPCList[_n].location.head to "genitals">>
				<<else>>
					<<He>> breathes on your skin, making your hair stand on end.
					<<neutral 1>>
				<</if>>
			<<elseif $enemyanger + $rng lte 100 and $NPCList[_n].location.head is 0 and $NPCList[_n].location.genitals isnot "genitals" and $walltype isnot "front">>
				<<neutral 10>>
				<<if $penisuse is 0 and $NPCList[_n].penis is 0 and $player.penisExist>>
					<<if $player.condom isnot false>>
						<<removeCondom>>
						<<He>> removes the condom on your penis.
					<</if>>
					<span class="blue">
						<<He>> kneels beside
						<<if $player.condom isnot false>>
							<<removeCondom>>
							you and removes your condom.
						<<else>>
							you.
						<</if>>
						You feel <<his>> breath on your <<penis>>.
					</span>
					<<set $penisuse to "othermouth">><<set $penisstate to "othermouthentrance">><<set $NPCList[_n].mouth to "penisentrance">>
					<<set $NPCList[_n].vagina to "othermouth">><<sex 1>><<set $NPCList[_n].location.head to "genitals">>
				<<elseif $penisuse is 0 and $NPCList[_n].vagina is 0 and $player.penisExist>>
					<span class="blue">
						<<He>> kneels beside
						<<if $player.condom isnot false>>
							<<removeCondom>>
							you and removes your condom.
						<<else>>
							you.
						<</if>>
						You feel <<his>> breath on your <<penis>>.
					</span>
					<<set $penisuse to "othermouth">><<set $penisstate to "othermouthentrance">><<set $NPCList[_n].mouth to "penisentrance">>
					<<set $NPCList[_n].penis to "othermouth">><<sex 1>><<set $NPCList[_n].location.head to "genitals">>
				<<elseif $penisuse is 0 and $NPCList[_n].vagina is "facesit" and $player.penisExist>>
					<span class="blue">
						You feel <<him>> lean forward along your body, then feel <<his>> breath on your
						<<if $player.condom isnot false>>
							<<removeCondom>>
							<<penis>> as your condom is removed.
						<<else>>
							<<penis>>.
						<</if>>
					</span>
					<<set $penisuse to "othermouth">><<set $penisstate to "othermouthentrance">><<set $NPCList[_n].mouth to "penisentrance">>
					<<sex 1>><<set $NPCList[_n].location.head to "genitals">>
				<<else>>
					<<He>> breathes on your skin, making your hair stand on end.
					<<neutral 1>>
				<</if>>
			<<elseif $enemyanger + $rng lte 105>>
				<<if $position is "wall" and $walltype isnot "front" and $NPCList[_n].location.genitals isnot "genitals">>
					<<He>> kisses and caresses your helpless thighs with <<his>> tongue.
					<<neutral 10>>
					<<if random(1, 2) is 2>>
						<<bodypart_admire left_thigh>>
					<<else>>
						<<bodypart_admire right_thigh>>
					<</if>>
				<<elseif $NPCList[_n].location.genitals isnot "head">>
					<<He>> kisses and caresses your <<nipple>> with <<his>> tongue.
					<<neutralbreast 10>>
					<<bodypart_admire breasts>>
				<</if>>
			<<elseif $enemyanger + $rng lte 110>>
				<<if $position is "wall" and $walltype isnot "front" and $NPCList[_n].location.genitals isnot "genitals">>
					<<He>> kisses and gently bites your helpless <<bottom>>.
					<<neutral 10>>
					<<if random(1, 2) is 2>>
						<<bodypart_admire left_bottom>>
					<<else>>
						<<bodypart_admire right_bottom>>
					<</if>>
				<<elseif $NPCList[_n].penis is "mouth" or $NPCList[_n].vagina is "mouth">>
					<<He>> leans back, savouring the feel of your mouth on <<his>> genitals.
					<<neutral 10>>
				<<elseif $NPCList[_n].location.genitals isnot "head">>
					<<He>> kisses and gently bites you on the neck.
					<<neutral 10>>
					<<bodypart_admire breasts>>
				<</if>>
			<<elseif $enemyanger + $rng lte 115>>
				<<if $walltype is "front">>
					<<He>> spits on your face.
					<<neutral 5>>
					<<bodypart_admire forehead>>
				<<else>>
					<<He>> spits on your <<genitals>>.
					<<neutral 5>>
					<<bodypart_admire pubic>>
				<</if>>
			<<elseif $enemyanger + $rng lte 120>>
				<<if $walltype is "front">>
					<<He>> spits on your back.
					<<neutral 5>>
					<<bodypart_admire back>>
				<<else>>
					<<He>> spits on your <<bottom>>.
					<<neutral 5>>
					<<if random(1, 2) is 2>>
						<<bodypart_admire left_bottom>>
					<<else>>
						<<bodypart_admire right_bottom>>
					<</if>>
				<</if>>
			<<elseif $enemyanger + $rng lte 130>>
				<<if $position is "wall" and $walltype isnot "front">>
					<<He>> spits on your tummy.
					<<neutral 5>>
					<<if random(1, 2) is 2>>
						<<bodypart_admire back>>
					<<else>>
						<<bodypart_admire back>>
					<</if>>
				<<elseif $NPCList[_n].location.genitals isnot "head" and $NPCList[_n].location.head isnot "head" and $NPCList[_n].location.head isnot "genitals" and $chestuse is 0>>
					<<set $NPCList[_n].mouth to "chestentrance">><<set $chestuse to "mouth">><<set $cheststate to "mouthentrance">>
					<span class="blue"><<He>> moves <<his>> head to your chest.</span>
					<<neutralbreast 1>>
					<<bodypart_admire breasts>>
					<<set $NPCList[_n].location.head to "head">>
				<</if>>
			<<elseif $enemyanger + $rng lte 135 and $NPCList[_n].location.genitals isnot "genitals">>
				<<if $walltype is "front">>
					<<He>> runs <<his>> tongue over your cheek and jaw.
					<<neutral 5>>
					<<if random(1, 2) is 2>>
						<<bodypart_admire left_cheek>>
					<<else>>
						<<bodypart_admire right_cheek>>
					<</if>>
				<<else>>
					<<He>> runs <<his>> tongue up your inner thigh.
					<<neutral 5>>
					<<if random(1, 2) is 2>>
						<<bodypart_admire left_thigh>>
					<<else>>
						<<bodypart_admire right_thigh>>
					<</if>>
				<</if>>
			<<elseif $enemyanger + $rng lte 140>>
				<<if $position is "wall" and $walltype isnot "front">>
					<<He>> spits on your helpless thighs.
					<<neutral 5>>
					<<if random(1, 2) is 2>>
						<<bodypart_admire left_thigh>>
					<<else>>
						<<bodypart_admire right_thigh>>
					<</if>>
				<<else>>
					<<He>> spits on your face.
					<<neutral 5>>
					<<if random(1, 2) is 2>>
						<<bodypart_admire left_cheek>>
					<<else>>
						<<bodypart_admire right_cheek>>
					<</if>>
				<</if>>
			<<elseif $enemyanger + $rng lte 145 and $NPCList[_n].location.genitals isnot "head">>
				<<He>> presses <<his>> mouth against your forehead.
				<<neutral 5>>
				<<bodypart_admire forehead>>
			<<elseif $enemyanger + $rng lte 150>>
				<<if $walltype isnot "front">>
					<<He>> bites your cheek.
					<<violence 10>><<hitstat>><<bruise face>>
					<<if random(1, 2) is 2>>
						<<bodypart_admire left_cheek>>
					<<else>>
						<<bodypart_admire right_cheek>>
					<</if>>					
				<<else>>
					<<He>> bites your <<bottom>>.
					<<violence 10>><<hitstat>><<bruise bottom>>
					<<if random(1, 2) is 2>>
						<<bodypart_admire left_bottom>>
					<<else>>
						<<bodypart_admire right_bottom>>
					<</if>>
				<</if>>
			<<elseif $enemyanger + $rng lte 155>>
				<<if $walltype isnot "front">>
					<<He>> <<admires>> your <<breasts>>, eyes full of thirst.
					<<neutral 5>>
					<<bodypart_admire chest>>
				<<else>>
					<<He>> <<admires>> your groin, eyes full of thirst.
					<<neutral 5>>
					<<bodypart_admire pubic>>
				<</if>>
			<<elseif $enemyanger + $rng lte 160>>
				<<if $position is "wall" and $walltype isnot "front" and $NPCList[_n].location.genitals isnot "genitals">>
					<<He>> bites your thighs.
					<<violence 10>><<hitstat>><<bruise thigh>>
					<<if random(1, 2) is 2>>
						<<bodypart_admire left_thigh>>
					<<else>>
						<<bodypart_admire right_thigh>>
					<</if>>
				<<elseif $NPCList[_n].location.genitals isnot "head">>
					<<He>> bites your shoulders.
					<<violence 10>><<hitstat>><<bruise leftarm>><<bruise rightarm>>
					<<if random(1, 2) is 2>>
						<<bodypart_admire left_shoulder>>
					<<else>>
						<<bodypart_admire right_shoulder>>
					<</if>>
				<</if>>
			<<elseif $enemyanger + $rng lte 165 and $NPCList[_n].location.genitals isnot "genitals">>
				<<He>> bites your tummy.
				<<violence 10>><<hitstat>><<bruise tummy>>
				<<bodypart_admire back>>
			<<elseif $enemyanger + $rng lte 170>>
				<<if $position is "wall" and $walltype isnot "front" and $NPCList[_n].location.genitals isnot "genitals">>
					<<He>> bites your hips.
					<<violence 10>><<hitstat>><<bruise tummy>>
					<<if random(1, 2) is 2>>
						<<bodypart_admire pubic>>
					<<else>>
						<<bodypart_admire pubic>>
					<</if>>
				<<elseif $NPCList[_n].penis is "mouth" or $NPCList[_n].vagina is "mouth">>
					<<He>> leans back, savouring the feel of your mouth on <<his>> genitals.
					<<neutral 10>>
				<<elseif $NPCList[_n].location.genitals isnot "head">>
					<<He>> bites your neck.
					<<violence 10>><<hitstat>><<bruise neck>>
					<<bodypart_admire breasts>>
				<</if>>
			<<elseif $enemyanger + $rng lte 180>>
				<<if $position is "wall" and $walltype isnot "front" and $NPCList[_n].location.genitals isnot "genitals">>
					<<He>> bites your thighs.
					<<violence 10>><<hitstat>><<bruise thigh>>
					<<if random(1, 2) is 2>>
						<<bodypart_admire left_thigh>>
					<<else>>
						<<bodypart_admire right_thigh>>
					<</if>>
				<<elseif $NPCList[_n].penis is "mouth" or $NPCList[_n].vagina is "mouth">>
					<<He>> leans back, savouring the feel of your mouth on <<his>> genitals.
					<<neutral 10>>
				<<elseif $NPCList[_n].location.genitals isnot "head">>
					<<He>> bites your cheek.
					<<violence 10>><<hitstat>><<bruise face>>
					<<if random(1, 2) is 2>>
						<<bodypart_admire left_cheek>>
					<<else>>
						<<bodypart_admire right_cheek>>
					<</if>>
				<</if>>
			<<elseif $enemyanger + $rng gte 190>>
				<<if $position is "wall" and $walltype isnot "front" and $NPCList[_n].location.genitals isnot "genitals">>
					<<He>> bites your <<bottom>>.
					<<violence 10>><<hitstat>><<bruise bottom>>
					<<if random(1, 2) is 2>>
						<<bodypart_admire left_bottom>>
					<<else>>
						<<bodypart_admire right_bottom>>
					<</if>>
				<<elseif $NPCList[_n].location.genitals isnot "head">>
					<<He>> bites your <<breasts>>.
					<<violence 10>><<hitstat>><<bruise chest>><<playWithBreasts>>
					<<bodypart_admire breasts>>
				<</if>>
			<</if>>
		<</if>>
	<</if>>
<</if>>
<<if $stalk and _stripped>>/*NPC can run off with clothes, and trigger a chase sequence. */
	<<stalk_flight>>
	<<set $position to "stalk">>
	<<He>> runs away, <span class="pink">with your clothes still in <<his>> possession!</span>
<</if>>
<<manend>><<set $pullaway to 0>><<set $NPCList[_n].intro to 0>>

<<if $oxygen lt $oxygenmax and $underwater isnot 1 and _strangle is 1>>
	<<unset _strangle>>
	<br>Air: <<oxygencaption>>
<</if>>

<</widget>>


<<widget "penisinit">>
	<<set $rng to random(1,100)>>

	<<if $gloryhole>>
		The $NPCList[_n].penisdesc waits expectantly.
	<<elseif $npcSub>>
		<<His>> $NPCList[_n].penisdesc twitches, awaiting your touch.
	<<elseif $enemyanger + $rng lte 20>>
		<<if $NPCList[_n].lefthand is 0>>
			<<if $enemyarousal lte 40>>
				<<He>> slowly rubs <<his>> shaft.
				<<submission 1>>
			<<elseif $enemyarousal lte 90>>
				<<He>> quickly rubs <<his>> shaft.
				<<submission 2>>
			<<elseif $enemyarousal gte 91>>
				<<He>> rapidly rubs <<his>> shaft.
				<<submission 3>>
			<</if>>
		<<elseif $NPCList[_n].righthand is 0>>
			<<if $enemyarousal lte 40>>
				<<He>> slowly rubs <<his>> shaft.
				<<submission 1>>
			<<elseif $enemyarousal lte 90>>
				<<He>> quickly rubs <<his>> shaft.
				<<submission 2>>
			<<elseif $enemyarousal gte 91>>
				<<He>> rapidly rubs <<his>> shaft.
				<<submission 3>>
			<</if>>
		<<else>>
			<<if $walltype is "front">>
				<<He>> slaps <<his>> $NPCList[_n].penisdesc against your cheek.
				<<submission 2>>
			<<else>>
				<<He>> rubs <<his>> $NPCList[_n].penisdesc against your thighs.
				<<submission 2>>
			<</if>>
		<</if>>
	<<elseif $enemyanger + $rng lte 25>>
		<<if $position is "wall" and $walltype isnot "front">>
			<<He>> rubs <<his>> $NPCList[_n].penisdesc against your thighs.
			<<submission 2>>
		<<else>>
			<<He>> rubs <<his>> $NPCList[_n].penisdesc against your tummy.
			<<submission 2>>
		<</if>>
	<<elseif $enemyanger + $rng lte 30>>
		<<if $position is "wall" and $walltype isnot "front">>
			<<He>> rubs <<his>> $NPCList[_n].penisdesc against your thighs.
			<<submission 2>>
		<<elseif $breastsize gte 3>>
			<span class="blue"><<He>> presses <<his>> $NPCList[_n].penisdesc against your <<breasts>>.</span>
			<<submission 2>><<playWithBreasts>><<set $chestactiondefault to "rub">><<set $chestuse to "penis">><<cheststat>><<set $mouthactiondefault to "peniskiss">><<set $NPCList[_n].penis to "chest">><<set $NPCList[_n].location.genitals to "head">>
		<<else>>
			<<He>> rubs <<his>> $NPCList[_n].penisdesc against your <<breasts>>.
			<<submission 2>><<playWithBreasts>>
		<</if>>
	<<elseif $enemyanger + $rng lte 35>>
		<<if $walltype is "front">>
			<<He>> slaps <<his>> $NPCList[_n].penisdesc against your cheek.
			<<submission 2>>
		<<else>>
			<<He>> rubs <<his>> $NPCList[_n].penisdesc against your thighs.
			<<submission 2>>
		<</if>>
	<<elseif $enemyanger + $rng lte 40>>
		<<if $position is "wall" and $walltype isnot "front">>
			<<He>> rubs <<his>> $NPCList[_n].penisdesc against your thighs.
			<<submission 2>>
		<<elseif $NPCList[_n].mouth is 0>>
			<<He>> rubs <<his>> $NPCList[_n].penisdesc against your face.
			<<submission 2>>
		<<else>>
			<<He>> rubs <<his>> $NPCList[_n].penisdesc against your thighs.
			<<submission 2>>
		<</if>>
	<<elseif $enemyanger + $rng lte 45 and $NPCList[_n].location.genitals is 0 and $NPCList[_n].location.head isnot "genitals" and $walltype isnot "front">>
		<<if $player.penisExist>>
			<<if $penisuse is 0>>
				<<if $analdisable is "f" and $consensual is 1>>
					<<if $condomUse is false>>
					<<elseif $condomUse is true and $player.condom is false and $parasite.penis.name is undefined>>
						<<equipCondom>>
						<span class="green"><<He>> puts a condom on your <<penis>>.</span>
					<</if>>
					<span class="blue"><<He>> straddles you, rubbing <<his>> ass against your <<penis>>.</span>
					<<neutral 5>><<set $penisuse to "otheranus">><<set $NPCList[_n].penis to "otheranusentrance">><<set $penisstate to "otheranusentrance">><<set $speechotheranusentrance to 1>>
					<<set $NPCList[_n].location.genitals = "genitals">>
				<</if>>
			<</if>>
		<</if>>
	<<elseif $enemyanger + $rng lte 60 and $NPCList[_n].location.genitals is 0 and $NPCList[_n].location.head isnot "head">>
		<<if $mouthuse is 0>>
			<<if $penisbitten is 0>>
				<<if $position isnot "wall">>
					<<if $NPCList[_n].condom isnot false>>
						<<removeCondom _n>>
						<<He>> removes the condom on <<his>> penis.
					<</if>>
					<span class="blue"><<He>> positions <<his>> $NPCList[_n].penisdesc in front of your mouth.</span>
					<<neutral 5>><<set $mouthuse to "penis">><<set $NPCList[_n].penis to "mouthentrance">><<set $mouthstate to "entrance">><<set $speechmouthentrance to 1>>
					<<set $NPCList[_n].location.genitals = "head">>
				<</if>>
			<</if>>
		<</if>>
	<<elseif $enemyanger + $rng lte 100 and $NPCList[_n].location.genitals is 0 and $NPCList[_n].location.head isnot "genitals" and $walltype isnot "front">>
		<<if $player.vaginaExist and $vaginause is 0 and ($anususe isnot 0 or random(0,100) gte 50)>>
			<<if $condomUse is false>>
			<<elseif ($condomUse is true or (random(0,100) lt $condomautochance and $npcCondoms isnot undefined)) and $NPCList[_n].condom is false>>
				<<equipCondom _n>>
				<span class="green"><<He>> puts a condom on <<his>> penis.</span>
			<</if>>
			<span class="blue"><<He>> moves between your legs, positioning <<his>> $NPCList[_n].penisdesc in front of your <<pussy>>.</span>
			<<neutral 5>><<set $vaginause to "penis">><<set $NPCList[_n].penis to "vaginaentrance">><<set $vaginastate to "entrance">><<set $speechvaginaentrance to 1>>
			<<set $NPCList[_n].location.genitals = "genitals">>
		<<elseif $analdisable is "f" and $anususe is 0>>
			<<if $condomUse is false>>
			<<elseif ($condomUse is true or (random(0,100) lt $condomautochance and $npcCondoms isnot undefined)) and $NPCList[_n].condom is false>>
				<<equipCondom _n>>
				<span class="green"><<He>> puts a condom on <<his>> penis.</span>
			<</if>>
			<span class="blue"><<He>> moves between your legs, positioning <<his>> $NPCList[_n].penisdesc in front of your <<bottom>>.</span>
			<<neutral 5>><<set $anususe to "penis">><<set $NPCList[_n].penis to "anusentrance">><<set $anusstate to "entrance">><<set $speechanusentrance to 1>>
			<<set $NPCList[_n].location.genitals = "genitals">>
		<</if>>
	<<elseif $enemyanger + $rng lte 120>>
		<<if $analingusdisablegiving is "f" and $enemyno gte 2 and $position isnot "wall"
				and $mouthuse is 0 and $NPCList[_n].location.head isnot "head" and $NPCList[_n].location.genitals is 0
				and (!$player.vaginaExist or $vaginause isnot 0)
				and (!$player.penisExist or $penisuse isnot 0)
				and ($analdisable is "t" or $anususe isnot 0)>>
			<span class="purple"><<He>> turns around and moves <<his>> ass in front of your face.</span>
			<<submission 5>><<set $mouthuse to "otheranus">><<set $mouthstate to "otheranus">><<set $NPCList[_n].penis to "mouthotheranus">>
			<<set $NPCList[_n].location.genitals = "head">><<set $speechmouthotheranus to 1>>
		<<else>>
			<<He>> slowly traces <<his>> length across your exposed skin.
			<<neutral 1>><<neutral 5>>
		<</if>>
	<<elseif $enemyanger + $rng lte 140>>
		<<if $penisbitten is 0>>
			<<if $position isnot "wall">>
				<<if $mouthuse is 0 and $NPCList[_n].location.genitals is 0 and $NPCList[_n].location.head isnot "head">>
					<<if $NPCList[_n].condom isnot false>>
						<<removeCondom _n>>
						<<He>> removes the condom on <<his>> penis.
					<</if>>
					<span class="purple"><<He>> shoves <<his>> $NPCList[_n].penisdesc against your lips.</span>
					<<submission 5>><<set $mouthuse to "penis">><<set $mouthstate to "imminent">><<set $NPCList[_n].penis to "mouthimminent">><<set $speechmouthimminent to 1>>
					<<set $NPCList[_n].location.genitals = "head">>
				<<else>>
					<<He>> slowly traces <<his>> length across your exposed skin.
					<<neutral 1>>
				<</if>>
			<<else>>
				<<He>> slowly traces <<his>> length across your exposed skin.
				<<neutral 1>>
			<</if>>
		<</if>>
	<<elseif $enemyanger + $rng lte 150 and $NPCList[_n].location.genitals is 0 and $NPCList[_n].location.head isnot "genitals" and $footdisable is "f" and $walltype isnot "front">>
		<span class="purple"><<He>> presses <<his>> foot against your <<genitals>>.</span>
		<<neutral 5>><<violence 1>><<set $NPCList[_n].penis to "footjob">>
		<<if $player.penisExist>>
			<<set $penisuse to "feet">><<set $speechpenisfoot to 1>>
		<</if>>
		<<if $player.vaginaExist>>
			<<set $vaginause to "feet">>
			<<if !$player.penisExist>>
				<<set $speechvaginafoot to 1>>
			<</if>>
		<</if>>
	<<elseif $enemyanger + $rng lte 170 and $NPCList[_n].location.genitals is 0 and $NPCList[_n].location.head isnot "genitals" and $walltype isnot "front">>
		<<if $anususe is 0 and $analdisable is "f">>
			<<if $condomUse is false>>
			<<elseif ($condomUse is true or (random(0,100) lt $condomautochance and $npcCondoms isnot undefined)) and $NPCList[_n].condom is false>>
				<<equipCondom _n>>
				<span class="green"><<He>> puts a condom on <<his>> penis.</span>
			<</if>>
			<<if $worn.lower.anus_exposed is 1 and $worn.over_lower.anus_exposed is 1>>
				<<if $worn.under_lower.anus_exposed is 1 and $worn.genitals.anus_exposed is 1>>
					<span class="purple"><<He>> presses <<his>> $NPCList[_n].penisdesc against your anus, preparing to penetrate.</span>
					<<sex 5>><<set $anususe to "penis">><<set $NPCList[_n].penis to "anusimminent">><<set $anusstate to "imminent">><<set $speechanusimminent to 1>>
				<<elseif $worn.under_lower.anus_exposed is 0>>
					<span class="blue"><<He>> presses <<his>> $NPCList[_n].penisdesc against your anus through your $worn.under_lower.name.</span>
					<<sex 3>><<set $NPCList[_n].penis to "anusentrance">><<set $anususe to "penis">><<set $worn.under_lower.integrity -= 10>><<set $anusstate to "entrance">><<set $speechanusentrance to 1>>
				<</if>>
			<<elseif $worn.over_lower.anus_exposed is 0>>
				<span class="blue"><<He>> presses <<his>> $NPCList[_n].penisdesc against your anus through your $worn.over_lower.name.</span>
				<<sex 2>><<set $NPCList[_n].penis to "anusentrance">><<set $anususe to "penis">><<set $worn.over_lower.integrity -= 10>><<set $anusstate to "entrance">><<set $speechanusentrance to 1>>
			<<elseif $worn.lower.anus_exposed is 0>>
				<span class="blue"><<He>> presses <<his>> $NPCList[_n].penisdesc against your anus through your $worn.lower.name.</span>
				<<sex 2>><<set $NPCList[_n].penis to "anusentrance">><<set $anususe to "penis">><<set $worn.lower.integrity -= 10>><<set $anusstate to "entrance">><<set $speechanusentrance to 1>>
			<</if>>
			<<set $NPCList[_n].location.genitals = "genitals">>
		<</if>>
	<<elseif $enemyanger + $rng gte 171 and $NPCList[_n].location.genitals is 0 and $NPCList[_n].location.head isnot "genitals" and $walltype isnot "front">>
		<<if $player.vaginaExist and $vaginause is 0 and (!$player.penisExist or $anususe isnot 0 or random(0,100) gte 50)>>
			<<if $condomUse is false>>
			<<elseif ($condomUse is true or (random(0,100) lt $condomautochance and $npcCondoms isnot undefined)) and $NPCList[_n].condom is false>>
				<<equipCondom _n>>
				<span class="green"><<He>> puts a condom on <<his>> penis.</span>
			<</if>>
			<<if $worn.lower.vagina_exposed is 1 and $worn.over_lower.vagina_exposed is 1>>
				<<if $worn.under_lower.vagina_exposed is 1 and !$worn.genitals.type.includes("chastity")>>
					<span class="purple"><<He>> presses <<his>> $NPCList[_n].penisdesc against your <<pussy>>, preparing to penetrate.</span>
					<<sex 5>><<set $vaginause to "penis">><<set $NPCList[_n].penis to "vaginaimminent">><<set $vaginastate to "imminent">><<set $speechvaginaimminent to 1>>
				<<elseif $worn.under_lower.vagina_exposed is 0>>
					<span class="blue"><<He>> presses <<his>> $NPCList[_n].penisdesc against your <<pussy>> through your $worn.under_lower.name.</span>
					<<set $worn.under_lower.integrity -= 10>><<sex 3>><<set $NPCList[_n].penis to "vaginaentrance">><<set $vaginause to "penis">><<set $vaginastate to "entrance">><<set $speechvaginaentrance to 1>>
				<</if>>
			<<elseif $worn.over_lower.vagina_exposed is 0>>
				<span class="blue"><<He>> presses <<his>> $NPCList[_n].penisdesc against your <<pussy>> through your $worn.over_lower.name.</span>
				<<sex 2>><<set $NPCList[_n].penis to "vaginaentrance">><<set $vaginause to "penis">><<set $worn.over_lower.integrity -= 10>><<set $vaginastate to "entrance">><<set $speechvaginaentrance to 1>>
			<<elseif $worn.lower.vagina_exposed is 0>>
				<span class="blue"><<He>> presses <<his>> $NPCList[_n].penisdesc against your <<pussy>> through your $worn.lower.name.</span>
				<<sex 2>><<set $NPCList[_n].penis to "vaginaentrance">><<set $vaginause to "penis">><<set $worn.lower.integrity -= 10>><<set $vaginastate to "entrance">><<set $speechvaginaentrance to 1>>
			<</if>>
			<<set $NPCList[_n].location.genitals to "genitals">>
		<<elseif $player.penisExist>>
			<<if $anususe is 0 and $analdisable is "f">>
				<<if $condomUse is false>>
				<<elseif ($condomUse is true or (random(0,100) lt $condomautochance and $npcCondoms isnot undefined)) and $NPCList[_n].condom is false>>
					<<equipCondom _n>>
					<span class="green"><<He>> puts a condom on <<his>> penis.</span>
				<</if>>
				<<if $worn.lower.anus_exposed is 1 and $worn.over_lower.anus_exposed is 1>>
					<<if $worn.under_lower.anus_exposed is 1 and $worn.genitals.anus_exposed is 1>>
						<span class="purple"><<He>> presses <<his>> $NPCList[_n].penisdesc against your anus, preparing to penetrate.</span>
						<<sex 5>><<set $anususe to "penis">><<set $NPCList[_n].penis to "anusimminent">><<set $anusstate to "imminent">><<set $speechanusimminent to 1>>
					<<elseif $worn.under_lower.anus_exposed is 0>>
						<span class="blue"><<He>> presses <<his>> $NPCList[_n].penisdesc against your anus through your $worn.under_lower.name.</span>
						<<sex 3>><<set $NPCList[_n].penis to "anusentrance">><<set $anususe to "penis">><<set $worn.under_lower.integrity -= 10>><<set $anusstate to "entrance">><<set $speechanusentrance to 1>>
					<</if>>
				<<elseif $worn.over_lower.anus_exposed is 0>>
					<span class="blue"><<He>> presses <<his>> $NPCList[_n].penisdesc against your anus through your $worn.over_lower.name.</span>
					<<sex 2>><<set $NPCList[_n].penis to "anusentrance">><<set $anususe to "penis">><<set $worn.over_lower.integrity -= 10>><<set $anusstate to "entrance">><<set $speechanusentrance to 1>>
				<<elseif $worn.lower.anus_exposed is 0>>
					<span class="blue"><<He>> presses <<his>> $NPCList[_n].penisdesc against your anus through your $worn.lower.name.</span>
					<<sex 2>><<set $NPCList[_n].penis to "anusentrance">><<set $anususe to "penis">><<set $worn.lower.integrity -= 10>><<set $anusstate to "entrance">><<set $speechanusentrance to 1>>
				<</if>>
				<<set $NPCList[_n].location.genitals = "genitals">>
			<</if>>
		<</if>>
	<</if>>
<</widget>>

<<widget "vaginainit">>
	<<set $rng to random(1,100)>>

	<<if $gloryhole>>
		The pussy waits expectantly.
	<<elseif $npcSub>>
		<<His>> legs quiver, <<his>> pussy waiting for you to do something.
		<<neutral 1>><<set $speechvaginaflaunt to 1>>
	<<elseif $enemyanger + $rng lte 20 and $NPCList[_n].location.genitals is 0>>
		<<He>> sways <<his>> hips suggestively.
		<<neutral 1>><<set $speechvaginaflaunt to 1>>
	<<elseif $enemyanger + $rng lte 40>>
		<<He>> rubs <<his>> pussy.
		<<neutral 3>><<set $speechvaginaflaunt to 1>>
	 <<elseif $enemyanger + $rng lte 50 and $NPCList[_n].location.genitals is 0 and $NPCList[_n].location.head isnot "genitals"
			and $player.penisExist and $penisuse is 0 and $analdisable is "f" and $walltype isnot "front">>
		<<if $condomUse is false>>
		<<elseif $condomUse is true and $player.condom is false and $parasite.penis.name is undefined>>
			<<equipCondom>>
			<span class="green"><<He>> puts a condom on your <<penis>>.</span>
		<</if>>
		<span class="blue"><<He>> straddles you, rubbing <<his>> ass against your <<penis>>.</span>
		<<neutral 5>><<set $penisuse to "otheranus">><<set $NPCList[_n].vagina to "otheranusentrance">><<set $penisstate to "otheranusentrance">><<set $speechotheranusentrance to 1>>
		<<set $NPCList[_n].location.genitals = "genitals">>
	<<elseif $enemyanger + $rng lte 60 and $NPCList[_n].location.genitals is 0 and $NPCList[_n].location.head isnot "head" and $mouthuse is 0>>
		<<if $rng % 5 is 0>>
			<<if $position is "doggy">>
				<<He>> gently rolls you onto your back.
				<<set $position to "missionary">>
			<</if>>
			<span class="purple">
			<<print either(
				"<<He>> straddles your face and slowly lowers <<his>> pussy down onto your mouth.",
				"<<He>> stands over your face and lowers <<himself>>, planting <<his>> pussy on your face.",
				"<<His>> pussy comes down onto your face and rests lightly on your mouth, and <<he>> waits expectantly."
			)>>
			</span>
			<<submission 5>><<set $NPCList[_n].vagina to "facesit">><<set $mouthuse to "facesit">><<set $mouthstate to "vagina">>
			<<set $speechfacesit to 1>><<set $NPCList[_n].location.genitals = "head">>
		<<else>>
			<span class="purple"><<He>> takes hold of your head and gently guides it in towards <<his>> pussy as <<he>> opens <<his>> legs.</span>
			<<submission 5>><<set $mouthuse to "othervagina">><<set $NPCList[_n].vagina to "mouth">><<set $mouthstate to "othervagina">>
			<<set $speechvaginamouth to 1>><<set $NPCList[_n].location.genitals = "head">>
		<</if>>
	<<elseif $enemyanger + $rng lte 70>>
		<<if $walltype is "front">>
			<<He>> rubs <<his>> pussy against your cheek.
			<<neutral 10>>
		<<else>>
			<<He>> rubs <<his>> pussy against your thigh.
			<<neutral 10>>
		<</if>>
	<<elseif $enemyanger + $rng lte 80 and $NPCList[_n].lefthand is 0>>
		<span class="lblue"><<He>> presses <<his>> fingers against <<his>> labia.</span>
		<<neutral 1>><<set $enemyarousal += 10>><<set $NPCList[_n].vagina to "lefthand">><<set $NPCList[_n].lefthand to "othervagina">>
	<<elseif $enemyanger + $rng lte 80 and $NPCList[_n].righthand is 0>>
		<span class="lblue"><<He>> presses <<his>> fingers against <<his>> labia.</span>
		<<neutral 1>><<set $enemyarousal += 10>><<set $NPCList[_n].vagina to "righthand">><<set $NPCList[_n].righthand to "othervagina">>
	<<elseif $enemyanger + $rng lte 80>>
		<<if $walltype is "front">>
			<<He>> rubs <<his>> pussy against your cheek.
			<<neutral 10>>
		<<else>>
			<<He>> rubs <<his>> pussy against your thigh.
			<<neutral 10>>
		<</if>>
	<<elseif $enemyanger + $rng lte 100 and $penisuse is 0 and $player.penisExist and $worn.under_lower.vagina_exposed is 1 and $worn.lower.vagina_exposed is 1 and $worn.over_lower.vagina_exposed is 1 and $NPCList[_n].location.genitals is 0 and $NPCList[_n].location.head isnot "genitals" and $walltype isnot "front">>
		<<set $penisuse to "othervagina">><<set $NPCList[_n].vagina to "penisentrance">><<set $penisstate to "entrance">>
		<<if $condomUse is false>>
		<<elseif $condomUse is true and $player.condom is false and $parasite.penis.name is undefined>>
			<<equipCondom>>
			<span class="green"><<He>> puts a condom on your <<penis>>.</span>
		<</if>>
		<span class="blue"><<He>> straddles you, <<his>> pussy hovering close to your <<penis>>.</span>
		<<set $NPCList[_n].location.genitals = "genitals">>
	<<elseif $enemyanger + $rng lte 100 and $vaginause is 0 and $player.vaginaExist and $worn.under_lower.vagina_exposed is 1 and $worn.lower.vagina_exposed is 1 and $worn.over_lower.vagina_exposed is 1 and $NPCList[_n].location.genitals is 0 and $NPCList[_n].location.head isnot "genitals" and $walltype isnot "front">>
		<<set $vaginause to "othervagina">><<set $vaginastate to "othervaginaentrance">><<set $NPCList[_n].vagina to "vaginaentrance">><<sex 5>>
		<span class="blue"><<He>> moves <<his>> pussy close to yours.</span>
		<<set $NPCList[_n].location.genitals = "genitals">><<set $speechtribentrance to 1>>
	<<elseif $enemyanger + $rng lte 120 and $penisuse is 0 and $player.penisExist and $worn.under_lower.vagina_exposed is 1 and $worn.lower.vagina_exposed is 1 and $worn.over_lower.vagina_exposed is 1 and $NPCList[_n].location.genitals is 0 and $NPCList[_n].location.head isnot "genitals" and !$worn.genitals.type.includes("chastity") and $walltype isnot "front">>
		<<set $penisuse to "othervagina">><<set $NPCList[_n].vagina to "penisimminent">><<set $penisstate to "imminent">>
		<<if $condomUse is false>>
		<<elseif $condomUse is true and $player.condom is false and $parasite.penis.name is undefined>>
			<<equipCondom>>
			<span class="green"><<He>> puts a condom on your <<penis>>.</span>
		<</if>>
		<span class="purple"><<He>> wraps <<his>> legs around your pelvis, pressing <<his>> pussy against your <<genitals>>.</span>
		<<set $NPCList[_n].location.genitals = "genitals">>
	<<elseif $enemyanger + $rng lte 120 and $vaginause is 0 and $player.vaginaExist and $worn.under_lower.vagina_exposed is 1 and $worn.lower.vagina_exposed is 1 and $worn.over_lower.vagina_exposed is 1 and $NPCList[_n].location.genitals is 0 and $NPCList[_n].location.head isnot "genitals" and $walltype isnot "front">>
		<<set $vaginause to "othervagina">><<set $vaginastate to "othervaginaimminent">><<set $NPCList[_n].vagina to "vaginaimminent">><<sex 20>>
		<span class="purple"><<He>> pushes <<his>> pussy close to yours.</span>
		<<set $NPCList[_n].location.genitals = "genitals">>
	<<elseif $enemyanger + $rng lte 140 and $NPCList[_n].location.genitals is 0 and $NPCList[_n].location.head isnot "genitals">>
		<<if $position is "wall" and $walltype isnot "front">>
			<<He>> sits on your protruding <<bottom>>, pressing down on you painfully.
			<<violence 3>>
		<<elseif $mouthuse is 0>>
			<<He>> rubs <<his>> clit against your face.
			<<violence 3>>
		<<else>>
			<<He>> frots against your thigh while squeezing it with <<his>> own.
			<<violence 3>>
		<</if>>
	<<elseif $enemyanger + $rng lte 160 and $NPCList[_n].location.genitals is 0 and $NPCList[_n].location.head isnot "genitals" and $footdisable is "f" and $walltype isnot "front">>
		<span class="purple"><<He>> presses <<his>> foot against your <<genitals>>.</span>
		<<neutral 5>><<set $NPCList[_n].vagina to "footjob">>
		<<if $player.penisExist>>
			<<set $penisuse to "feet">><<set $speechpenisfoot to 1>>
		<</if>>
		<<if $player.vaginaExist>>
			<<set $vaginause to "feet">>
			<<if !$player.penisExist>>
				<<set $speechvaginafoot to 1>>
			<</if>>
		<</if>>
	<<elseif $enemyanger + $rng lte 180 and $NPCList[_n].location.genitals is 0 and $NPCList[_n].location.head isnot "genitals">>
		<<if $position is "wall" and $walltype isnot "front">>
			<<He>> kicks you in the <<bottom>>.
			<<violence 10>><<hitstat>><<bruise bottom>>
		<<else>>
			<<He>> kicks you in the stomach.
			<<violence 10>><<hitstat>><<bruise face>>
		<</if>>
	<<elseif $enemyanger + $rng lte 200 and $mouthuse is 0>>
		<<if $pullaway is 1>>
			<<set $pullaway to 0>>
			Saliva drips from <<his>> pussy.
		<<else>>
			<<if $position is "wall" and $walltype isnot "front" and $NPCList[_n].location.genitals is 0 and $NPCList[_n].location.head isnot "genitals">>
				<<if $player.penisExist>>
					<<He>> kicks your <<penis>>.
					<<violence 20>><<hitstat>><<bruise penis>><<set $speechbeat to 1>>
				<<elseif $player.vaginaExist>>
					<<He>> kicks your <<pussy>>.
					<<violence 20>><<hitstat>><<bruise vagina>><<set $speechbeat to 1>>
				<</if>>
			<<elseif $NPCList[_n].location.genitals is 0 and $NPCList[_n].location.head isnot "head" and $mouthuse is 0>>
				<<if $rng % 2 is 0>>
					<<if $position is "doggy">>
						<<He>> turns you onto your back.
						<<set $position to "missionary">>
					<</if>>
					<span class="purple">
					<<print either(
						"<<He>> swings a leg over your face and sits down, sitting on your face.",
						"<<He>> sits down on your face, covering your mouth with <<his>> pussy.",
						"<<His>> pussy and ass descend onto your face, as <<he>> sits on it."
					)>>
					</span>
					<<submission 5>><<set $NPCList[_n].vagina to "facesit">><<set $mouthuse to "facesit">><<set $mouthstate to "vagina">>
					<<violence 3>><<bruise face>><<set $speechfacesit to 1>>
					<<set $NPCList[_n].location.genitals = "head">>
				<<else>>
					<span class="purple"><<He>> wraps <<his>> legs around your head and presses <<his>> pussy against your mouth.</span>
					<<submission 5>><<set $mouthuse to "othervagina">><<set $NPCList[_n].vagina to "mouth">><<set $mouthstate to "othervagina">><<violence 3>><<bruise face>><<set $speechvaginamouth to 1>>
					<<set $NPCList[_n].location.genitals = "head">>
				<</if>>
			<</if>>
		<</if>>
	<<elseif $NPCList[_n].location.genitals is 0 and $NPCList[_n].location.head isnot "genitals">>
		<<if $position is "wall" and $walltype isnot "front">>
			<<if $player.penisExist>>
				<<He>> kicks your <<penis>>.
				<<violence 20>><<hitstat>><<bruise penis>><<set $speechbeat to 1>>
			<<elseif $player.vaginaExist>>
				<<He>> kicks your <<pussy>>.
				<<violence 20>><<hitstat>><<bruise vagina>><<set $speechbeat to 1>>
			<</if>>
		<<else>>
			<<He>> kicks you in the face.
			<<violence 10>><<bruise face>><<set $speechbeat to 1>><<hitstat>>
		<</if>>
	<</if>>
<</widget>>

<<widget "mancombat_strangle">>
<<set _left = $NPCList[_n].lefthand is "throat">>
<<set _right = $NPCList[_n].righthand is "throat">>
<<set _hands = (_left ? 1 : 0) + (_right ? 1 : 0)>>
<<set _handname = _hands == 2 ? "hands" : (_left ? "left hand" : "right hand")>>
<<set _handvar = _left ? "lefthand" : "righthand">>

<<if $enemyanger gte 100 or $keepchoke or ($enemyanger + $rng gte 150 and $asphyxiaLvl gte 4)>>
	<<if $underwater isnot 1 and $asphyxiaLvl gte 3>>
		<<if _hands == 2>>
			<!-- -200 per turn with both hands: max to 0 oxygen in 6 turns -->
			<<oxygen -250>>
		<<else>>
			<!-- -175 per turn with one hand: max to 0 oxygen in 7 turns -->
			<<oxygen -225>>
		<</if>>
		<<set $speechthroat to 1>>
		<<set $submissive += 1>>
	<</if>>
	<<bruise neck>><<bruise neck>>

	<<if $asphyxiaLvl gte 3>>
		<<He>> strangles your throat<<if _hands is 2>> with both hands<</if>>.
		<<if $oxygen gte 900>>
			<<violence 5 1 1 0.02 1>>
		<<elseif $oxygen gte 600>>
			<span class="purple"> You can't breathe!</span>
			<<violence 10 1 1 0.02 1>>
		<<elseif $oxygen gte 300>>
			<span class="pink"> You feel light-headed.</span>
			<<violence 20 1 1 0.02 1>>
		<<elseif $oxygen gte 1>>
			<span class="pink"> You see stars.</span>
			<<violence 40 1 1 0.02 1>>
		<<else>>
			<span class="red"> You are suffocating!</span>
			<<suffocatepass>>
			<<violence 100 1 1 0.02 1.1>>
		<</if>>
	<<else>>
		<<He>> holds you by the neck roughly <<if _hands is 2>> with both hands<</if>>.
	<</if>>
<<elseif $rng gte 91 and _hands is 2>>
	<span class="teal"><<He>> releases <<his>> hands from your throat.</span>
	<<set $neckuse to 0>>
	<<gaspair>>
	<<set $NPCList[_n].lefthand to 0>><<set $NPCList[_n].righthand to 0>>
<<elseif $rng gte 81>>
	<<if _hands is 2>>
		<span class="teal"><<He>> releases <<his>> right hand from your throat.</span>
		<<set $NPCList[_n].righthand to 0>>
		<<suffocatepass -1>>
	<<else>>
		<span class="teal"><<He>> releases <<his>> _handname from your throat.</span>
		<<set $neckuse to 0>>
		<<gaspair>>
		<<set $NPCList[_n][_handvar] to 0>>
	<</if>>
<<elseif $rng gte 71 and _hands is 2>>
	<span class="teal"><<He>> releases <<his>> left hand from your throat.</span>
	<<set $NPCList[_n].lefthand to 0>>
	<<suffocatepass -1>>
<<else>>
	<<He>> holds you down <<if _hands is 2>>with both hands around<<else>>by<</if>> your throat.
	<<violence _hands>>
	<<suffocatepass -1>>
<</if>>
<<bruise neck>><<if _hands is 2>><<bruise neck>><</if>>
<<if random(1, 2) is 2>>
	<<bodypart_admire_chance left_cheek>>
<<else>>
	<<bodypart_admire_chance right_cheek>>
<</if>>
<</widget>>

<<widget "mancombat_choke">>
<<set _left = $NPCList[_n].lefthand is "throat">>
<<set _right = $NPCList[_n].righthand is "throat">>
<<set _hands = (_left ? 1 : 0) + (_right ? 1 : 0)>>
<<set _handname = _hands == 2 ? "hands" : (_left ? "left hand" : "right hand")>>
<<set _handvar = _left ? "lefthand" : "righthand">>

<!-- 97.2% probability to stop choking before you pass out if my math is correct (95% if with both hands) -->
<<if $oxygen gt 600 or $askedtochoke gte 1 or $keepchoke or $enemyanger gte 100 or $rng lte 55>>
	<<if $underwater isnot 1 and $asphyxiaLvl gte 2>>
		<<if _hands == 2>>
			<!-- -175 per turn with both hands: max to 0 oxygen in 7 turns -->
			<<oxygen -225>>
		<<else>>
			<!-- -150 per turn with one hand: max to 0 oxygen in 8 turns -->
			<<oxygen -200>>
		<</if>>
		<<set $askedtochoke to 0>>
		<<set $speechthroat to 1>>
		<<set $submissive += 2>>
	<</if>>
	<<bruise neck>>

	<<if $asphyxiaLvl gte 2>>
		<<He>> chokes you with <<if _hands is 2>>both hands<<else>><<his>> _handname<</if>>.
		<<if $oxygen gte 900>>
			<<violence 5 1 0.1 0.02 1>>
		<<elseif $oxygen gte 600>>
			<span class="purple"> You can't breathe!</span>
			<<violence 10 1 0.1 0.02 1>>
		<<elseif $oxygen gte 300>>
			<span class="pink"> You feel light-headed.</span>
			<<violence 20 1 0.1 0.02 1>>
		<<elseif $oxygen gte 1>>
			<span class="pink"> You see stars.</span>
			<<violence 40 1 0.1 0.02 1>>
		<<else>>
			<span class="red"> You are suffocating!</span>
			<<suffocatepass>>
			<<violence 100 1 0.1 0.02 1.1>>
		<</if>>
	<<else>>
		<<He>> holds your neck in a gentle but firm grip<<if _hands is 2>> with both hands<</if>>.
	<</if>>
<<elseif $rng gte 91 and _hands is 2>>
	<span class="teal"><<He>> releases <<his>> hands from your neck.</span>
	<<set $neckuse to 0>>
	<<gaspair>>
	<<set $NPCList[_n].lefthand to 0>><<set $NPCList[_n].righthand to 0>>
<<elseif $rng gte 81>>
	<<if _hands is 2>>
		<span class="teal"><<He>> releases <<his>> right hand from your neck.</span>
		<<set $NPCList[_n].righthand to 0>>
		<<suffocatepass -1>>
	<<else>>
		<span class="teal"><<He>> releases <<his>> _handname from your neck.</span>
		<<set $neckuse to 0>>
		<<gaspair>>
		<<set $NPCList[_n][_handvar] to 0>>
	<</if>>
<<elseif $rng gte 71 and _hands is 2>>
	<span class="teal"><<He>> releases <<his>> left hand from your neck.</span>
	<<set $NPCList[_n].lefthand to 0>>
	<<suffocatepass -1>>
<<else>>
	<<He>> holds you down <<if _hands is 2>>with both hands around<<else>>by<</if>> your neck.
	<<violence _hands 1 0.1 0.02 1>>
	<<suffocatepass -1>>
<</if>>
<<bruise neck>>
<<if random(1, 2) is 2>>
	<<bodypart_admire_chance left_cheek>>
<<else>>
	<<bodypart_admire_chance right_cheek>>
<</if>>
<</widget>>

<<widget "gaspair">>
<<if $underwater isnot 1>>
	<<if $oxygen gte 900>>
		You inhale sharply.
	<<elseif $oxygen gte 600>>
		You gasp for air.
	<<elseif $oxygen gte 1>>
		You hungrily gasp for air.
	<<else>>
		You hungrily gasp for air and cough.
	<</if>>
<<oxygen 300>>
<</if>>
<<set $suffocating to 0>>
<</widget>>

<<widget "suffocatepass">>
<<set $suffocating = Math.clamp($suffocating + ($args[0] or 1), 0, 10)>>
<<if $suffocating gte 2>><span class="red"> You're about to lose consciousness.</span><</if>>
<!-- Lose consciousness if it has been 20+ seconds since PC ran out of air -->
<<if $suffocating gte 3 and $suffocated isnot 1>>
	<<set $previousPassage = $passage>>
	<<set $suffocationPhase to 1>>
	<<set $suffocated to 1>>
	<<goto "Man combat suffocated">>
<</if>>
<</widget>>

:: Man combat suffocated

<<if $suffocationPhase lte 1>>
	<span class='red'>You suffocate.</span><br>
	Your vision clouds and fades.
	<<if $vaginastate is "penetrated" or $vaginastate is "othervagina" or $penisstate is "othervagina" or $penisstate is "otheranus" or $penisstate is "othermouth" or $anusstate is "penetrated" or $mouthstate is "penetrated">>
		You jerk in a spasm for the last time and droop. Your limp body continues to be fucked relentlessly.
	<<else>>
		Your body spasms for the last time and goes limp.
	<</if>>
	<<set $penisaction to 0>>
	<<set $vaginaaction to 0>>
	<<set $anusaction to 0>>
	<<set $leftaction to 0>>
	<<set $rightaction to 0>>
	<<set $mouthaction to 0>>
	<<set $thighaction to 0>>
	<<set $cheekaction to 0>>
	<<set $feetaction to 0>>
	<<set $chestaction to 0>>
	<<set $mockaction to "none">>
	<<set $bodyaction to 0>>

	<!-- Didn't use $NPCList[_n].righthand instead of .find() because once i've got a weird error
		 with $NPCList[_n] being undefined here. Perhaps, temporary _n expired? -->
	<<set _npc = $NPCList.find(x => x.lefthand == "throat" || x.righthand == "throat")>>
	<<set _npc.righthand to 0>>
	<<set _npc.lefthand to 0>>
	<<set $neckuse to 0>>
	<<set $enemyanger -= 70>>
	<<set $suffocationPhase to 2>>
	<br><br>
	<<link [[Next|Man combat suffocated]]>><</link>>
<<else>>
	<span class="red">You are unconscious.</span><br>
	<!-- Simulate 30 seconds of sex while passed out -->
	<<set _simTurns to 3>>
	<<set _turn to 0>>
	<<repeat 1.5s>>
		<<if _turn lt _simTurns>>
			<div class="unconscious shimmering"><<man>><<integritycheck>></div>
			<<pass10sec>>
		<<else>>
			<div class="fade-in">
			You regain consciousness with a long gasp. Your body is still being used.
			<<oxygenrefresh>>
			<<set $suffocating to 0>>
			<<unset $suffocated>>
			<<unset $suffocationPhase>>
			<br><br>
			<span id="nextlink"><<link [[Next|$previousPassage]]>><</link>></span>
			</div>
			<<numberify '#nextlink'>>
			<<stop>>
		<</if>>
		<<set _turn += 1>>
	<</repeat>>
<</if>>
